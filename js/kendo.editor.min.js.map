{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","FormatTool","bomFill","emptyElementContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","registerTool","toolName","tool","toolOptions","cssClass","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","messages","bold","italic","underline","strikethrough","superscript","subscript","justifyCenter","justifyLeft","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","insertHtml","viewHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","foreColor","backColor","style","emptyFolder","editAreaTitle","uploadFile","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogCancel","createTable","createTableHint","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","alignment","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","id","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","height","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","replace","innerHTML","mousedown","_endTyping","mouseup","_mouseup","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","e","_selectionChange","_selectionStarted","resizable","isResizable","isPlainObject","content","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","w","width","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","location","hostname","hide","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","body","open","write","isRtl","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","t","NS","_handlers","hasOwnProperty","split","on","_deregisterHandlers","handlers","off","blurTrigger","execCommand","touch","selectionchange","keydown","_activeElement","focus","range","left","container","offset","direction","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","ctrlKey","altKey","shiftKey","gecko","target","which","is","click","createRange","selectNode","cut copy paste","focusin","hasAttribute","show","focusout","active","contains","focused","removeClass","o","cmd","toolsFromShortcut","changesContent","refresh","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","text","concat","destroy","_focusOutside","msie","tempInput","blur","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","managesUndoRedo","async","change","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","FormatCommand","formatter","nodes","toggleClass","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","isAncestorOrSelf","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","significantNodes","grep","child","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","isEmptyspace","isBlock","isEmpty","isInline","scrollContainer","webkit","compatMode","scrollTo","elementTop","elementHeight","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","restoreScrollTop","insertAt","newElement","position","referenceElement","removeTextSiblings","tag","sibling","next","ofType","changeTag","tagName","skipAttributes","attribute","create","specified","cssText","setAttribute","appendChild","editableParent","wrap","unwrap","createElement","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","match","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","getElementsByTagName","_preventScriptExecution","l","legacyIE","originalSrc","originalHref","semanticFilter","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","sort","a","b","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","u","face","script","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","toStart","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","index","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","subRange","select","movedStart","movedEnd","item","enumerate","visit","rootNode","getEditable","nodeToPath","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","collapsedToStart","startParent","endParent","startIndex","endIndex","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","finishUpdate","startRestorePoint","endRestorePoint","GenericCommand","Command","restorePoint","marker","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","genericCommand","postProcess","InsertHtmlTool","initOptions","dataSource","_selectBox","SelectBox","dataTextField","dataValueField","highlightFirst","selectbox","isTypingKey","evt","Event","isDefaultPrevented","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","li","ListFormatter","_handleSelection","ancestor","table","emptyParagraphContent","_join","_root","dest","method","backspace","del","systemCommandIsInProgress","createUndoCommand","changed","isModifierKey","isSystem","typingInProgress","isCharacter","String","fromCharCode","alt","shift","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","fragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","onload","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","images","originalEvent","files","when","results","Array","onpaste","r","clipboardRange","clipboardNode","unbind","bind","containers","clean","splittableParent","splittable","fragmentsHtml","rangeEnd","applicable","display","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","list","level","placeholder","rootMargin","listContainer","margin","listIndex","levelType","blockChildren","lastMargin","levels","parseFloat","marginLeft","listStyleType","removeAttributes","removeAttributeNode","createColGroup","row","cells","colgroup","cell","prependTo","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","rows","firstRow","longestRow","eq","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","removeAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","action","actions","ul","thead","tbody","td","cleaner","tdCleaner","cellText","PrintCommand","print","ExportPdfCommand","initialValue","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","activate","formatNode","formatNodes","consolidate","last","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parents","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","ColorTool","palette","_widget","ColorPicker","toolIcon","fontWeight","fontStyle","listElements","BlockFormatFinder","candidate","suitable","BlockFormatter","nonImages","imageFormat","imageAttributes","namedFormat","GreedyBlockFormatter","formatTag","BlockFormatTool","textAlign","float","marginRight","listStylePosition","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","rng","siblings","NewLineCommand","filler","oldIE","ListFormatFinder","unwrapTag","isList","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","lastSection","lastNodes","sections","ListCommand","ListTool","lastIndexOfRegExp","str","indexOfRegExp","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","dialog","_initialText","_range","_close","visible","_apply","_keydown","linkUrl","_dialog","center","ENTER","ESC","textInput","anchor","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","KEDITORFILEURL","KEDITORFILETITLE","FileCommand","file","showBrowser","applied","keyDown","FileBrowser","transport","read","_fileBrowser","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onerror","ImageBrowser","_imageBrowser","DropDownList","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","decorate","indentDirection","IndentFormatter","parentList","siblingList","nestedList","targetIndex","targets","splice","targetNode","listParent","nextAll","IndentCommand","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","ViewHtmlCommand","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","OVERFLOWANCHOR","focusable","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","autoFocus","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","origin","copyAnchorStyles","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","DOWN","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","overflowAnchor","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","outerWidth","outerHeight","TABINDEX","localizedText","res","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","hasClass","updateGroups","angular","unbindResize","buttons","enabledButtons","disabledButtons","popupElement","move","constrain","focusElement","currentContainer","UP","TAB","button","stopPropagation","lastIndexOf","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","detach","ACTIVESTATE","SELECTEDSTATE","getTouches","editableCell","tableFormatFinder","TableCommand","_tableHtml","columns","insertedTable","PopupTool","_open","_activate","_toggle","_popup","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_exec","_valid","status","selectedRows","selectedColumns","tableSize","InsertRowCommand","cellCount","newRow","InsertColumnCommand","columnIndex","newCell","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool"],"mappings":"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,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '<a href=\"\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= data.cssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker #= data.cssClass #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a href=\"\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\"><span unselectable=\"on\" class=\"k-icon k-i-more\"></span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + toolName;\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogCancel: 'Cancel',\n            createTable: 'Create table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function () {\n                        that._mouseup();\n                    }\n                });\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-resize-se\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                }\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                iframe.src = src;\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:1px .2em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange());\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var NS = '.kendoEditor';\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        type = type.split(' ').join(NS + ' ') + NS;\n                        this._handlers.push({\n                            element: element,\n                            type: type,\n                            handler: handler\n                        });\n                        element.on(type, handler);\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'selectionchange': proxy(this._selectionChange, this),\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            if (left) {\n                                offset -= 1;\n                            }\n                            if (offset + direction > 0 && container.nodeType == 3 && container.nodeValue[offset] == '\\uFEFF') {\n                                range.setStart(container, offset + direction);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            8,\n                            9,\n                            33,\n                            34,\n                            35,\n                            36,\n                            37,\n                            38,\n                            39,\n                            40,\n                            40,\n                            45,\n                            46\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            editor._selectionChange();\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'mousedown': function (e) {\n                        editor._selectionStarted = true;\n                        if (browser.gecko) {\n                            return;\n                        }\n                        var target = $(e.target);\n                        if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                            window.open(target.attr('href'), '_new');\n                        }\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                        }, 10);\n                    }\n                });\n            },\n            _mouseup: function () {\n                var that = this;\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that.textarea.val(that.value());\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(that.textarea.val());\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                kendo.destroy(this.wrapper);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                if (activeElement != body && activeElement != iframe) {\n                    var scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that.restoreSelection();\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({ range: range }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        if (!command.managesUndoRedo) {\n                            that.undoRedoStack.push(command);\n                        }\n                        command.editor = that;\n                        command.exec();\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new kendo.ui.editor.FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        if (browser.msie && browser.version == 10) {\n            emptyElementContent = ' ';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                FormatTool: FormatTool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (node && node.nodeType === 3 && node.nodeValue === '\\uFEFF') {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (child.nodeType == 3 && whitespaceOrBom.test(child.nodeValue)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (kendo.support.browser.webkit || scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node) {\n                var element = $(Dom.isDataNode(node) ? node.parentNode : node), wnd = Dom.windowFromDocument(node.ownerDocument), windowHeight = wnd.innerHeight, elementTop, elementHeight, scrollContainer = Dom.scrollContainer(node.ownerDocument);\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (!elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            restoreScrollTop: function (doc) {\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                node.parentNode.removeChild(node);\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                        if (Dom.isWhitespace(node)) {\n                            Dom.insertBefore(node, parent);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!node.childNodes.length && !Dom.isEmpty(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color');\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types)) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var name;\n                for (; i < len; i++) {\n                    name = Dom.name(nodes[i]);\n                    if (!invert && name == tagName || invert && name != tagName) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var Serializer = {\n            toEditableHtml: function (html) {\n                var br = '<br class=\"k-br\">';\n                html = html || '';\n                return html.replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            this.removeAttribute(name);\n                        }\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            result.push('<iframe');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            result.push('<script');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<b>');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<i>');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<strong>');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<em>');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<span style=\"text-decoration:underline;\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    attributes.sort(function (a, b) {\n                        return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                    });\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (node.nodeValue === '\\uFEFF') {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, 'td') || node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous;\n                    if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/serializer'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return new RangeIterator(subRange);\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.html = that.body.innerHTML;\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && !root.attributes.contentEditable)) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                this.body.innerHTML = this.html;\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(that.caret);\n                range.selectNode(that.caret);\n                return that.caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var collapsed = false;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node)) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/system', ['editor/range'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, dom = editorNS.Dom, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange());\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range);\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    that.startRestorePoint = new RestorePoint(range);\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                range.setStartAfter(caret);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                if (dom.isDataNode(node)) {\n                    this._cleanBomBefore(range);\n                }\n                if (block && block.previousSibling && editorNS.RangeUtils.isStartOf(range, block)) {\n                    var prev = block.previousSibling;\n                    var caret = this._addCaret(block);\n                    this._merge(prev, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (li && editorNS.RangeUtils.isStartOf(range, li)) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    this.editor.selectRange(range);\n                    return true;\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                if (/t(able|body)/i.test(dom.name(ancestor))) {\n                    range.selectNode(table);\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(this.editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                return true;\n            },\n            _root: function (node) {\n                while (node && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest.appendChild(src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var range = this.editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    finishUpdate(this.editor, startRestorePoint);\n                }\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange());\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions;\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == e.ctrlKey && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = editorNS.RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue);\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    editor.body.appendChild(clipboardNode);\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(editor.body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(editor.body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l;\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\n                    if (this.cleaners[i].applicable(html)) {\n                        html = this.cleaners[i].clean(html);\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    editorNS.RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                $(fragment.childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content;\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    content = p.innerHTML;\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li = placeholder, rootMargin, listContainer, i, p, type, margin, list, listData;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || name != 'p') {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else {\n                            lastMargin = -1;\n                            li = placeholder;\n                        }\n                        continue;\n                    }\n                    margin = parseFloat(p.style.marginLeft || 0);\n                    if (rootMargin === undefined) {\n                        rootMargin = margin;\n                    }\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = dom.create(document, type, { style: { listStyleType: listType.style } });\n                        if (li == placeholder || margin <= lastMargin) {\n                            if (listContainer && rootMargin !== margin) {\n                                listContainer.appendChild(list);\n                            } else {\n                                dom.insertBefore(list, p);\n                            }\n                            levels[margin] = {};\n                        } else {\n                            listContainer = li;\n                            li.appendChild(list);\n                        }\n                        levels[margin][levelType] = list;\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    lastMargin = margin;\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = this.extractListLevels(html);\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = this.lockRange(true);\n                this.editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                });\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand,\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool,\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            Keyboard: Keyboard,\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner,\n            PrintCommand: PrintCommand,\n            ExportPdfCommand: ExportPdfCommand\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/inlineformat', ['editor/system'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        dom.attr(formatNode, this.attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{ tags: ['span'] }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                ui.data(this.type).value('inherit');\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{ tags: ['span'] }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-' + options.name,\n                    palette: palette,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        editor.focus();\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatblock', ['editor/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = RangeUtils.nodes(range);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        tagName = dom.name(blocks[i]);\n                        if (tagName == 'li') {\n                            list = blocks[i].parentNode;\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                            range = this.editor.createRange();\n                            range.selectNode(blocks[i]);\n                            formatter.toggle(range);\n                        } else if (formatTag && (tagName == 'td' || blocks[i].attributes.contentEditable)) {\n                            new BlockFormatter(format, this.values).apply(blocks[i].childNodes);\n                        } else {\n                            element = dom.changeTag(blocks[i], formatTag);\n                            dom.attr(element, format[0].attr);\n                        }\n                    }\n                } else {\n                    new BlockFormatter(format, this.values).apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            }\n        });\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                Command.fn.init.call(this, options);\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            FormatCommand: FormatCommand,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/linebreak', ['editor/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        range.setStartBefore(focusNode.firstChild || focusNode);\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, rng, shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (li.nextSibling) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        dom.insertAfter(paragraph, li.parentNode);\n                        dom.remove(li.parentNode.childNodes.length == 1 ? li.parentNode : li);\n                        paragraph.innerHTML = emptyParagraphContent;\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = dom.create(doc, 'p');\n                    dom.insertAfter(paragraph, heading);\n                    paragraph.innerHTML = emptyParagraphContent;\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous);\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next);\n                RangeUtils.selectRange(range);\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                range.deleteContents();\n                range.insertNode(br);\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/lists', ['editor/linebreak'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                var name = dom.name(node);\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        dom.unwrap(node);\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.childNodes, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section;\n                do {\n                    section = dom.closestEditable(nodes[i], [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        if (lastSection) {\n                            sections.push({\n                                section: lastSection,\n                                nodes: lastNodes\n                            });\n                        }\n                        lastNodes = [nodes[i]];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(nodes[i]);\n                    }\n                    i++;\n                } while (i < nodes.length);\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/link', ['editor/lists'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                options.formatter = {\n                    toggle: function (range) {\n                        new InlineFormatter([{ tags: ['a'] }]).remove(textNodes(range));\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var traverser = new LeftDomTextTraverser({\n                    node: range.startContainer,\n                    offset: range.startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/file', [\n        'kendo.filebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(dialog.element.find('.k-filebrowser'), extend({}, fileBrowser, {\n                        change: function () {\n                            dialog.element.find(KEDITORFILEURL).val(this.value());\n                        },\n                        apply: apply\n                    }));\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/image', [\n        'kendo.imagebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(dialog.element.find('.k-imagebrowser'), extend({}, imageBrowser, {\n                        change: function () {\n                            dialog.element.find(KEDITORIMAGEURL).val(this.value());\n                        },\n                        apply: apply\n                    }));\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/image'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/indent', ['editor/components'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            remove: function (nodes) {\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                options.formatter = {\n                    toggle: function (range) {\n                        new IndentFormatter().apply(RangeUtils.nodes(range));\n                    }\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                options.formatter = {\n                    toggle: function (range) {\n                        new IndentFormatter().remove(RangeUtils.nodes(range));\n                    }\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitable = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len;\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    isOutdentable = indent(suitable[i]);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable[i]).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable[i], 'li') && (listParentsCount > 1 || indent(suitable[i].parentNode)) || dom.ofType(suitable[i], [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/viewhtml', ['editor/indent'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), content = ViewHtmlCommand.indent(editor.value()), textarea = '.k-editor-textarea';\n                function apply(e) {\n                    editor.value(dialog.find(textarea).val());\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog\\'>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatting', ['editor/viewhtml'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    this.clean(nodes[c]);\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/formatting'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = kendo.ui.editor.EditorUtils;\n        var ToolTemplate = kendo.ui.editor.ToolTemplate;\n        var Tool = kendo.ui.editor.Tool;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-button-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-move\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        e.preventDefault();\n                    }\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0;\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'more' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(editorElement.outerWidth() - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - wrapper.outerHeight() - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        window.open();\n                    }\n                }\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-custom',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + (options.name == 'custom' ? 'i-custom' : options.name);\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.element.add(popupElement).off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, buttons, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).hasClass('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 : -1, that.element, true);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement) {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    var button = $(this);\n                    e.preventDefault();\n                    e.stopPropagation();\n                    button.removeClass('k-state-hover');\n                    if (!button.is('[data-popup]')) {\n                        that._editor.exec(that._toolName(this));\n                    }\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                return tool[0] ? tool[0].substring(tool[0].lastIndexOf('-') + 1) : 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = kendo.ui.editor.RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool && tool.update) {\n                        tool.update($(this), nodes);\n                    }\n                });\n                this.update();\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', group.outerWidth(true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/tables', ['editor/toolbar'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var editableCell = '<td>' + Editor.emptyElementContent + '</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr>' + new Array(columns + 1).join(editableCell) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                options.postProcess = this.postProcess;\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                this._editor = options.editor;\n                this._popup = popup;\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', function () {\n                    that._setTableSize();\n                }).on('down', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.dialogCancel);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.dialogCancel).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            },\n            update: function (ui, nodes) {\n                var isFormatted;\n                PopupTool.fn.update.call(this, ui);\n                isFormatted = tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyElementContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyElementContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var table = dom.closest(rows[0], 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        var row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/system',\n        'editor/inlineformat',\n        'editor/formatblock',\n        'editor/linebreak',\n        'editor/lists',\n        'editor/link',\n        'editor/file',\n        'editor/image',\n        'editor/components',\n        'editor/indent',\n        'editor/viewhtml',\n        'editor/formatting',\n        'editor/toolbar',\n        'editor/tables'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}