{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","FormatTool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","registerTool","toolName","tool","toolOptions","cssClass","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","messages","bold","italic","underline","strikethrough","superscript","subscript","justifyCenter","justifyLeft","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","insertHtml","viewHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","foreColor","backColor","style","emptyFolder","editAreaTitle","uploadFile","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTable","createTableHint","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","replace","innerHTML","mousedown","_endTyping","mouseup","_mouseup","_initializeImmutables","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","e","_selectionChange","_selectionStarted","resizable","isResizable","isPlainObject","content","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","location","hostname","hide","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","body","open","write","isRtl","msie","edge","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","t","NS","_handlers","hasOwnProperty","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","_mousedown","execCommand","touch","selectionchange","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","click","target","createRange","selectNode","cut copy paste","focusin","hasAttribute","show","focusout","toolbarContainerElement","active","get","contains","preventPopupHide","is","focused","removeClass","immutables","Immutables","gecko","which","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","dispose","tempInput","blur","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","managesUndoRedo","async","change","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","FormatCommand","formatter","nodes","toggleClass","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","isAncestorOrSelf","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isEmpty","isInline","list","scrollContainer","webkit","compatMode","scrollTo","elementTop","elementHeight","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeTextSiblings","tag","closestBy","condition","rootCondition","ofType","changeTag","tagName","skipAttributes","attribute","specified","cssText","setAttribute","appendChild","editableParent","wrap","unwrap","createElement","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","getElementsByTagName","_preventScriptExecution","l","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","sort","a","b","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","hasClass","serialize","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","u","face","script","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","toStart","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","index","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","select","movedStart","movedEnd","item","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","collapsedToStart","startParent","endParent","startIndex","endIndex","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","finishUpdate","startRestorePoint","endRestorePoint","GenericCommand","selected","getSibling","PREVIOUS_SIBLING","Command","restorePoint","marker","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","expandImmutablesIn","genericCommand","postProcess","InsertHtmlTool","initOptions","dataSource","_selectBox","SelectBox","dataTextField","dataValueField","highlightFirst","selectbox","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","cell","forwards","getNext","removeTableContent","backspaceHandler","isTypingKey","evt","Event","isDefaultPrevented","immutablesContext","deleteSelection","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","li","ListFormatter","_handleSelection","ancestor","table","emptyParagraphContent","_handleImmutables","_join","startImmutable","endImmutable","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","method","backspace","del","systemCommandIsInProgress","createUndoCommand","changed","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","typingInProgress","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","alt","shift","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","fragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","onload","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","images","originalEvent","files","when","results","Array","onpaste","r","clipboardRange","clipboardNode","_decoreateClipboardNode","_moveToCaretPosition","containers","clean","borderWidth","overflow","margin","padding","fontVariant","fontWeight","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","skipCleaners","applicable","display","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","placeholder","rootMargin","listContainer","listIndex","levelType","blockChildren","lastMargin","levels","parseFloat","marginLeft","listStyleType","removeAttributes","removeAttributeNode","createColGroup","row","cells","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","eq","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","removeAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","action","actions","ul","thead","tbody","td","cleaner","tdCleaner","cellText","PrintCommand","print","ExportPdfCommand","initialValue","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","activate","formatNode","formatNodes","consolidate","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parents","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","ColorTool","palette","_widget","ColorPicker","toolIcon","fontStyle","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","imageFormat","imageAttributes","nonImages","applyFormatting","immutableFormat","splice","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","_initOptions","BlockFormatTool","textAlign","float","marginRight","listStylePosition","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","rng","parentChildrenLength","siblings","NewLineCommand","filler","oldIE","ListFormatFinder","unwrapTag","isList","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ListCommand","ListTool","lastIndexOfRegExp","str","indexOfRegExp","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","dialog","_initialText","_range","_close","visible","_apply","_keydown","linkUrl","_dialog","center","ENTER","ESC","textInput","anchor","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","KEDITORFILEURL","KEDITORFILETITLE","FileCommand","file","showBrowser","applied","keyDown","FileBrowser","transport","read","_fileBrowser","ev","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onerror","ImageBrowser","_imageBrowser","DropDownList","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","decorate","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ViewHtmlCommand","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","autoFocus","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","origin","copyAnchorStyles","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","overflowAnchor","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","move","constrain","focusElement","currentContainer","button","stopPropagation","toolname","lastIndexOf","_immutablesContext","_updateImmutablesState","uiData","widget","groupUi","uiElement","trackImmutables","toolsToBeUpdated","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","detach","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","twTool","_open","_activate","_toggle","_popup","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_exec","_valid","status","selectedRows","selectedColumns","tableSize","InsertRowCommand","cellCount","newRow","InsertColumnCommand","columnIndex","newCell","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool","lowerBound","upperBound","getScrollBarWidth","scrollHeight","clientHeight","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","WIDTH","column","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnWidth","columnLeftOffset","adjacentColumnWidth","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowPosition","tableBodyTopOffset","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","startImmutableParent","endImmutableParent","editableNodes","randomId","chars","charAt","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","cancelDeleting","closestSelectionLi","closestImmutableLi","nextImmutable","_removeImmutable","commonContainer","_nextNode","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","lastSelectedRow","rowIndex","cellsLength","newRowsCount","cellIndex","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","unit","TableWizardEditTool","numericTextBoxSettings","units","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","_destroyComponents"],"mappings":"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CLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MAC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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a href=\"\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker #= data.cssClass #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a href=\"\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\"><span unselectable=\"on\" class=\"k-icon k-i-more\"></span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + toolName;\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            createTable: 'Create table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function () {\n                        that._mouseup();\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-resize-se\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                }\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                iframe.src = src;\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (browser.msie || browser.edge ? 'height:auto;' : '') + (os.ios ? 'word-break:break-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var NS = '.kendoEditor';\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        type = type.split(' ').join(NS + ' ') + NS;\n                        this._handlers.push({\n                            element: element,\n                            type: type,\n                            handler: handler\n                        });\n                        element.on(type, handler);\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                this._registerHandler(mousedownTrigger, 'mousedown ', proxy(this._mousedown, this));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'selectionchange': proxy(this._selectionChange, this),\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            editor._selectionChange();\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target);\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n            },\n            _mouseup: function () {\n                var that = this;\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    that.textarea.val(that.value());\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(that.textarea.val());\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                if (activeElement != body && activeElement != iframe) {\n                    var scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that.restoreSelection();\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        if (!command.managesUndoRedo) {\n                            that.undoRedoStack.push(command);\n                        }\n                        command.editor = that;\n                        command.exec();\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new kendo.ui.editor.FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie && browser.version == 10) {\n            emptyTableCellContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                FormatTool: FormatTool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (kendo.support.browser.webkit || scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node) {\n                var element = $(Dom.isDataNode(node) ? node.parentNode : node), wnd = Dom.windowFromDocument(node.ownerDocument), windowHeight = wnd.innerHeight, elementTop, elementHeight, scrollContainer = Dom.scrollContainer(node.ownerDocument);\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (!elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                node.parentNode.removeChild(node);\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                        if (Dom.isWhitespace(node)) {\n                            Dom.insertBefore(node, parent);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!node.childNodes.length && !Dom.isEmpty(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color');\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types)) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            this.removeAttribute(name);\n                        }\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            result.push('<iframe');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            result.push('<script');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<b>');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<i>');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<strong>');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<em>');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<span style=\"text-decoration:underline;\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    attributes.sort(function (a, b) {\n                        return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                    });\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (node.nodeValue === '\\uFEFF') {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous;\n                    if ($(node).hasClass('k-table-resize-handle') || $(node).hasClass('k-column-resize-handle') || $(node).hasClass('k-row-resize-handle')) {\n                        return;\n                    }\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/serializer'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var collapsed = false;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node)) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/system', ['editor/range'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, EditorUtils = editorNS.EditorUtils, RangeUtils = editorNS.RangeUtils, registerTool = EditorUtils.registerTool, dom = editorNS.Dom, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                range.setStartAfter(caret);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    this.editor.selectRange(range);\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (li && editorNS.RangeUtils.isStartOf(range, li)) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    this.editor.selectRange(range);\n                    return true;\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _root: function (node) {\n                while (node && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = editorNS.RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue);\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    editorNS.RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                $(fragment.childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content;\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    content = p.innerHTML;\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li = placeholder, rootMargin, listContainer, i, p, type, margin, list, listData;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || name != 'p') {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else {\n                            lastMargin = -1;\n                            li = placeholder;\n                        }\n                        continue;\n                    }\n                    margin = parseFloat(p.style.marginLeft || 0);\n                    if (rootMargin === undefined) {\n                        rootMargin = margin;\n                    }\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = dom.create(document, type, { style: { listStyleType: listType.style } });\n                        if (li == placeholder || margin <= lastMargin) {\n                            if (listContainer && rootMargin !== margin) {\n                                listContainer.appendChild(list);\n                            } else {\n                                dom.insertBefore(list, p);\n                            }\n                            levels[margin] = {};\n                        } else {\n                            listContainer = li;\n                            li.appendChild(list);\n                        }\n                        levels[margin][levelType] = list;\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    lastMargin = margin;\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = this.extractListLevels(html);\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = this.lockRange(true);\n                this.editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                });\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand,\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool,\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard,\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner,\n            PrintCommand: PrintCommand,\n            ExportPdfCommand: ExportPdfCommand\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/inlineformat', ['editor/system'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        if (dom.is(formatNode, 'font')) {\n                            if (styleAttr.color) {\n                                formatNode.removeAttribute('color');\n                            }\n                            if (styleAttr.fontName) {\n                                formatNode.removeAttribute('face');\n                            }\n                            if (styleAttr.fontSize) {\n                                formatNode.removeAttribute('size');\n                            }\n                        }\n                        dom.attr(formatNode, attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                ui.data(this.type).value('inherit');\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-' + options.name,\n                    palette: palette,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        ui.value(null);\n                        editor.focus();\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatblock', ['editor/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            FormatCommand: FormatCommand,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/linebreak', ['editor/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        range.setStartBefore(focusNode.firstChild || focusNode);\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = dom.create(doc, 'p');\n                    dom.insertAfter(paragraph, heading);\n                    paragraph.innerHTML = emptyParagraphContent;\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous);\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next);\n                RangeUtils.selectRange(range);\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                range.deleteContents();\n                range.insertNode(br);\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/lists', ['editor/linebreak'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/link', ['editor/lists'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var traverser = new LeftDomTextTraverser({\n                    node: range.startContainer,\n                    offset: range.startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/file', [\n        'kendo.filebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(dialog.element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            dialog.element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/image', [\n        'kendo.imagebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(dialog.element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            dialog.element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/image'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/indent', ['editor/components'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/viewhtml', ['editor/indent'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content;\n                options.serialization.immutables = editor.immutables;\n                content = ViewHtmlCommand.indent(editor.value());\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog\\'>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatting', ['editor/viewhtml'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                that.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/formatting'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = kendo.ui.editor.EditorUtils;\n        var ToolTemplate = kendo.ui.editor.ToolTemplate;\n        var Tool = kendo.ui.editor.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-button-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-move\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'more' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-custom',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled';\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, buttons, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).hasClass('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 : -1, that.element, true);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement) {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    var button = $(this);\n                    e.preventDefault();\n                    e.stopPropagation();\n                    button.removeClass('k-state-hover');\n                    if (!button.is('[data-popup]')) {\n                        that._editor.exec(that._toolName(this));\n                    }\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editorNS = kendo.ui.editor, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    var editorNS = kendo.ui.editor;\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/tables', ['editor/toolbar'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.buttonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', function () {\n                    that._setTableSize();\n                }).on('down', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.dialogCancel);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.dialogCancel).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyTableCellContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var row = rows[0];\n                if (this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: tableBody.position().top + scrollTopOffset,\n                    left: column.position().left + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.position().left;\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var rootElement = $(options.rootElement);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var handleOffset = constrain({\n                    value: resizeHandle.position().left + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(column.next());\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(column.index(), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = outerWidth(tableBody);\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).index();\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).index() === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth($(this.element).children(TBODY))));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return $(this).index() === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rowPosition = row.position();\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: rowPosition.top + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowPosition.left + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyTopOffset = tableBody.position().top;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var handleOffset = constrain({\n                    value: resizeHandle.position().top + scrollTopOffset + e.y.delta,\n                    min: $(row).position().top + scrollTopOffset + min,\n                    max: tableBodyTopOffset + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || null,\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor,\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', ['editor/table-wizard/table-wizard-command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-font-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-font-icon k-i-justify-clear',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-font-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-justify-clear',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-font-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-justify-clear',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-edit-form-container k-popup-edit-form\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-input k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker().data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/system',\n        'editor/inlineformat',\n        'editor/formatblock',\n        'editor/linebreak',\n        'editor/lists',\n        'editor/link',\n        'editor/file',\n        'editor/image',\n        'editor/components',\n        'editor/indent',\n        'editor/viewhtml',\n        'editor/formatting',\n        'editor/toolbar',\n        'editor/tables',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/immutables',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}