{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","FormatTool","bomFill","emptyElementContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","NS","keys","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","registerTool","toolName","tool","toolOptions","cssClass","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","messages","bold","italic","underline","strikethrough","superscript","subscript","justifyCenter","justifyLeft","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","insertHtml","viewHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","foreColor","backColor","style","emptyFolder","editAreaTitle","uploadFile","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogCancel","createTable","createTableHint","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","alignment","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","closest","on","update","_wrapTextarea","wrapper","find","id","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","height","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","replace","innerHTML","_endTypingHandler","_endTyping","_mouseupHandler","_mouseup","resize","notify","isTypingInProgress","endTyping","saveSelection","e","_selectionChange","msie","ensureTrailingBreaks","body","_selectionStarted","resizable","isResizable","isPlainObject","content","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","w","width","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","location","hostname","hide","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","open","write","isRtl","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","_spellCorrectTimeout","RestorePoint","getRange","mozilla","_finishUpdate","blurTrigger","execCommand","touch","_activeElement","focus","range","left","container","offset","direction","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","test","exec","clearTimeout","keydown","selectionCodes","ctrlKey","altKey","shiftKey","keyup","gecko","target","which","is","createRange","selectNode","hasAttribute","show","active","contains","focused","removeClass","refresh","serialization","entities","semantic","scripts","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","text","concat","destroy","add","off","_focusOutside","tempInput","blur","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","managesUndoRedo","async","change","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","FormatCommand","formatter","nodes","toggleClass","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","paperSize","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","split","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling",34,38,39,60,62,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,402,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,977,978,982,8226,8230,8242,8243,8254,8260,8472,8465,8476,8482,8501,8592,8593,8594,8595,8596,8629,8656,8657,8658,8659,8660,8704,8706,8707,8709,8711,8712,8713,8715,8719,8721,8722,8727,8730,8733,8734,8736,8743,8744,8745,8746,8747,8756,8764,8773,8776,8800,8801,8804,8805,8834,8835,8836,8838,8839,8853,8855,8869,8901,8968,8969,8970,8971,9001,9002,9674,9824,9827,9829,9830,338,339,352,353,376,710,732,8194,8195,8201,8204,8205,8206,8207,8211,8212,8216,8217,8218,8220,8221,8222,8224,8225,8240,8249,8250,8364,"findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","isAncestorOrSelf","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","stripBom","insignificant","className","_moz_dirty","_moz_editor_bogus_node","significantNodes","grep","child","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","isEmptyspace","isBlock","isEmpty","isInline","scrollContainer","webkit","compatMode","scrollTo","elementTop","elementHeight","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChild","removeTextSiblings","tag","sibling","next","ofType","changeTag","tagName","skipAttributes","attribute","create","specified","cssText","setAttribute","appendChild","editableParent","wrap","unwrap","createElement","removeAttribute","unstyle","inlineStyle","span","getEffectiveBackground","backgroundStyle","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","match","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","getElementsByTagName","_preventScriptExecution","l","legacyIE","originalSrc","originalHref","semanticFilter","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","sort","a","b","htmlEncode","skip","skipEncoding","childNode","mapper","previous","tagMap","end","textOnly","childrenCount","textChild","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","u","face","script","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","toStart","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","index","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","subRange","select","movedStart","movedEnd","item","enumerate","visit","rootNode","getEditable","nodeToPath","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","collapsedToStart","startParent","endParent","startIndex","endIndex","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","finishUpdate","startRestorePoint","endRestorePoint","GenericCommand","Command","restorePoint","marker","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","genericCommand","postProcess","InsertHtmlTool","initOptions","dataSource","_selectBox","SelectBox","dataTextField","dataValueField","highlightFirst","selectbox","isTypingKey","evt","Event","isDefaultPrevented","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","li","ListFormatter","_handleSelection","ancestor","table","emptyParagraphContent","_join","_root","dest","method","backspace","del","systemCommandIsInProgress","createUndoCommand","changed","isModifierKey","isSystem","handlers","typingInProgress","isCharacter","String","fromCharCode","alt","shift","onEndTyping","stopTyping","force","timeout","what","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","htmlToFragment","fragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","onload","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","images","originalEvent","files","when","results","Array","onpaste","r","clipboardRange","clipboardNode","unbind","bind","containers","clean","splittableParent","splittable","fragmentsHtml","rangeEnd","applicable","display","Cleaner","replacements","replacement","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","startingSymbol","_convertToLi","placeholder","margin","list","blockChildren","lastMargin","levels","ul","parseFloat","marginLeft","removeAttributes","removeAttributeNode","createColGroup","row","cells","colgroup","cell","prependTo","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","rows","firstRow","longestRow","eq","headers","titles","PrintCommand","print","ExportPdfCommand","initialValue","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","activate","formatNode","formatNodes","consolidate","last","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parents","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","ColorTool","palette","_widget","ColorPicker","toolIcon","fontWeight","fontStyle","listElements","BlockFormatFinder","candidate","suitable","BlockFormatter","nonImages","imageFormat","imageAttributes","namedFormat","GreedyBlockFormatter","formatTag","BlockFormatTool","textAlign","float","marginRight","listStylePosition","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","rng","siblings","NewLineCommand","filler","oldIE","ListFormatFinder","unwrapTag","isList","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","lastSection","lastNodes","sections","ListCommand","ListTool","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","dialog","_initialText","_range","_close","visible","click","_apply","_keydown","linkUrl","_dialog","center","ENTER","ESC","textInput","anchor","UnlinkTool","KEDITORFILEURL","KEDITORFILETITLE","FileCommand","file","showBrowser","applied","keyDown","FileBrowser","transport","read","_fileBrowser","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onerror","ImageBrowser","_imageBrowser","DropDownList","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","decorate","indentDirection","IndentFormatter","parentList","siblingList","nestedList","targetIndex","targets","splice","targetNode","listParent","nextAll","IndentCommand","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","ViewHtmlCommand","cmd","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","OVERFLOWANCHOR","focusable","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","origin","copyAnchorStyles","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","DOWN","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","overflowAnchor","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","outerWidth","outerHeight","TABINDEX","removeAttr","localizedText","res","_nativeTools","currentTool","nativeTools","isFunction","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","hasClass","updateGroups","angular","unbindResize","buttons","enabledButtons","disabledButtons","popupElement","move","constrain","focusElement","currentContainer","UP","TAB","button","stopPropagation","lastIndexOf","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","detach","ACTIVESTATE","SELECTEDSTATE","editableCell","tableFormatFinder","TableCommand","_tableHtml","columns","insertedTable","PopupTool","_open","_activate","_toggle","_popup","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","_setTableSize","_exec","_valid","status","selectedRows","selectedColumns","tableSize","InsertRowCommand","cellCount","newRow","td","InsertColumnCommand","columnIndex","newCell","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool"],"mappings":"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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, NS = '.kendoEditor', keys = kendo.keys;\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '<a href=\"\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= data.cssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker #= data.cssClass #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a href=\"\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\"><span unselectable=\"on\" class=\"k-icon k-i-more\"></span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + toolName;\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogCancel: 'Cancel',\n            createTable: 'Create table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                element.closest('form').on('submit' + NS, function () {\n                    that.update();\n                });\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                that._endTypingHandler = proxy(that._endTyping, that);\n                that._mouseupHandler = proxy(that._mouseup, that);\n                $(document).on('mousedown', that._endTypingHandler).on('mouseup', that._mouseupHandler);\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                if (!browser.msie) {\n                    kendo.ui.editor.Dom.ensureTrailingBreaks(this.body);\n                }\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-resize-se\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                }\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                iframe.src = src;\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:1px .2em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{table-layout:fixed;width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                $(editor.body).on('contextmenu' + NS, function () {\n                    editor.one('select', function () {\n                        beforeCorrection = null;\n                    });\n                    editor._spellCorrectTimeout = setTimeout(function () {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange());\n                        falseTrigger = false;\n                    }, 10);\n                }).on('input' + NS, function () {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                });\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    $(doc).on('mouseup' + NS, proxy(editor._mouseup, editor));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                $(blurTrigger).on('blur' + NS, proxy(this._blur, this));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    $(doc).on('selectionchange' + NS, proxy(this._selectionChange, this)).on('keydown' + NS, function () {\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                $(editor.body).on('dragstart' + NS, false).on('keydown' + NS, function (e) {\n                    var range;\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                        return false;\n                    }\n                    if (e.keyCode === keys.F10) {\n                        setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? 'startContainer' : 'endContainer'];\n                        var offset = range[left ? 'startOffset' : 'endOffset'];\n                        var direction = left ? -1 : 1;\n                        if (left) {\n                            offset -= 1;\n                        }\n                        if (offset + direction > 0 && container.nodeType == 3 && container.nodeValue[offset] == '\\uFEFF') {\n                            range.setStart(container, offset + direction);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n                    var toolName = editor.keyboard.toolFromShortcut(editor.toolbar.tools, e);\n                    if (toolName) {\n                        e.preventDefault();\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n                        editor.trigger('keydown', e);\n                        editor.exec(toolName);\n                        return false;\n                    }\n                    editor.keyboard.clearTimeout();\n                    editor.keyboard.keydown(e);\n                }).on('keyup' + NS, function (e) {\n                    var selectionCodes = [\n                        8,\n                        9,\n                        33,\n                        34,\n                        35,\n                        36,\n                        37,\n                        38,\n                        39,\n                        40,\n                        40,\n                        45,\n                        46\n                    ];\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                        editor._selectionChange();\n                    }\n                    editor.keyboard.keyup(e);\n                }).on('mousedown' + NS, function (e) {\n                    editor._selectionStarted = true;\n                    if (browser.gecko) {\n                        return;\n                    }\n                    var target = $(e.target);\n                    if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                        window.open(target.attr('href'), '_new');\n                    }\n                }).on('click' + NS, function (e) {\n                    var dom = kendo.ui.editor.Dom, range;\n                    if (dom.name(e.target) === 'img') {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                }).on('cut' + NS + ' copy' + NS + ' paste' + NS, function (e) {\n                    editor.clipboard['on' + e.type](e);\n                }).on('focusin' + NS, function () {\n                    if (editor.body.hasAttribute('contenteditable')) {\n                        $(this).addClass('k-state-active');\n                        editor.toolbar.show();\n                    }\n                }).on('focusout' + NS, function () {\n                    setTimeout(function () {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        var toolbar = editor.toolbar;\n                        if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                            $(body).removeClass('k-state-active');\n                            toolbar.hide();\n                        }\n                    }, 10);\n                });\n            },\n            _mouseup: function () {\n                var that = this;\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that.textarea.val(that.value());\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(that.textarea.val());\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                $(that.window).add(that.document).add(that.body).add(that.wrapper).add(that.element.closest('form')).off(NS);\n                $(document).off('mousedown', that._endTypingHandler).off('mouseup', that._mouseupHandler);\n                that._endTypingHandler = that._mouseupHandler = null;\n                clearTimeout(this._spellCorrectTimeout);\n                that._focusOutside();\n                that.toolbar.destroy();\n                kendo.destroy(that.wrapper);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:absolute;left:-10px;top:-10px;width:1px;height:1px;font-size:0;border:0;\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, currentHtml = editorNS.Serializer.domToXhtml(body, this.options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body);\n                if (!browser.msie) {\n                    kendo.ui.editor.Dom.ensureTrailingBreaks(this.body);\n                }\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                if (activeElement != body && activeElement != iframe) {\n                    var scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that.restoreSelection();\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({ range: range }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        if (!command.managesUndoRedo) {\n                            that.undoRedoStack.push(command);\n                        }\n                        command.editor = that;\n                        command.exec();\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new kendo.ui.editor.FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '<br class=\"k-br\" />';\n        if (browser.msie) {\n            if (browser.version < 10) {\n                emptyElementContent = '\\uFEFF';\n            } else if (browser.version < 11) {\n                emptyElementContent = ' ';\n            }\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                FormatTool: FormatTool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                var paperSize = options.paperSize;\n                this._drawPDF(progress).then(function (root) {\n                    options.paperSize = 'auto';\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        forceProxy: options.forceProxy\n                    });\n                    options.paperSize = paperSize;\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (child.nodeType == 3 && whitespaceOrBom.test(child.nodeValue)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (kendo.support.browser.webkit || scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node) {\n                var element = $(Dom.isDataNode(node) ? node.parentNode : node), wnd = Dom.windowFromDocument(node.ownerDocument), windowHeight = wnd.innerHeight, elementTop, elementHeight, scrollContainer = Dom.scrollContainer(node.ownerDocument);\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (!elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            restoreScrollTop: function (doc) {\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                node.parentNode.removeChild(node);\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                        if (Dom.isWhitespace(node)) {\n                            Dom.insertBefore(node, parent);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!node.childNodes.length && !Dom.isEmpty(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color');\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types)) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var name;\n                for (; i < len; i++) {\n                    name = Dom.name(nodes[i]);\n                    if (!invert && name == tagName || invert && name != tagName) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p><\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var Serializer = {\n            toEditableHtml: function (html) {\n                var br = '<br class=\"k-br\">';\n                html = html || '';\n                return html.replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            this.removeAttribute(name);\n                        }\n                    }\n                });\n            },\n            htmlToDom: function (html, root) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                root.innerHTML = html;\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            result.push('<iframe');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            result.push('<script');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<b>');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<i>');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<strong>');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<em>');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<span style=\"text-decoration:underline;\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    attributes.sort(function (a, b) {\n                        return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                    });\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous;\n                    if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (dom.isInline(node) && node.childNodes.length == 1 && node.firstChild.nodeType == 3 && !text(node.firstChild)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                if (textOnly(root)) {\n                    return dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                }\n                children(root);\n                result = result.join('');\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/serializer'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return new RangeIterator(subRange);\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.html = that.body.innerHTML;\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && !root.attributes.contentEditable)) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                this.body.innerHTML = this.html;\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(that.caret);\n                range.selectNode(that.caret);\n                return that.caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var collapsed = false;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node)) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/system', ['editor/range'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, EditorUtils = editorNS.EditorUtils, registerTool = EditorUtils.registerTool, dom = editorNS.Dom, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange());\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range);\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    that.startRestorePoint = new RestorePoint(range);\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                range.setStartAfter(caret);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                if (dom.isDataNode(node)) {\n                    this._cleanBomBefore(range);\n                }\n                if (block && block.previousSibling && editorNS.RangeUtils.isStartOf(range, block)) {\n                    var prev = block.previousSibling;\n                    var caret = this._addCaret(block);\n                    this._merge(prev, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (li && editorNS.RangeUtils.isStartOf(range, li)) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    this.editor.selectRange(range);\n                    return true;\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                if (/t(able|body)/i.test(dom.name(ancestor))) {\n                    range.selectNode(table);\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(this.editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                return true;\n            },\n            _root: function (node) {\n                while (node && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest.appendChild(src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var range = this.editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    finishUpdate(this.editor, startRestorePoint);\n                }\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange());\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions;\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == e.ctrlKey && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.cleaners = [\n                    new ScriptCleaner(),\n                    new TabCleaner(),\n                    new MSWordFormatCleaner(),\n                    new WebkitFormatCleaner()\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = editorNS.RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue);\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    editor.body.appendChild(clipboardNode);\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(editor.body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(editor.body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l;\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\n                    if (this.cleaners[i].applicable(html)) {\n                        html = this.cleaners[i].clean(html);\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    editorNS.RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                $(fragment.childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            clean: function (html) {\n                var that = this, replacements = that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function () {\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function () {\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function () {\n                this.replacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    '',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ];\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (html) {\n                var startingSymbol;\n                if (/^(<span [^>]*texhtml[^>]*>)?<span [^>]*(Symbol|Wingdings)[^>]*>/i.test(html)) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html)) {\n                    return 'ul';\n                }\n                if (/^\\s*\\w+[\\.\\)]\\u00a0{2,}/.test(html)) {\n                    return 'ol';\n                }\n            },\n            _convertToLi: function (p) {\n                var content;\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivx]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    content = p.innerHTML;\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(dom.blockElements.join(','), placeholder), lastMargin = -1, lastType, name, levels = {\n                        'ul': {},\n                        'ol': {}\n                    }, li = placeholder, i, p, type, margin, list, key, child;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    type = this.listType(p.innerHTML);\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    if (!type || name != 'p') {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else {\n                            levels = {\n                                'ul': {},\n                                'ol': {}\n                            };\n                            li = placeholder;\n                            lastMargin = -1;\n                        }\n                        continue;\n                    }\n                    margin = parseFloat(p.style.marginLeft || 0);\n                    list = levels[type][margin];\n                    if (margin > lastMargin || !list) {\n                        list = dom.create(document, type);\n                        if (li == placeholder) {\n                            dom.insertBefore(list, p);\n                        } else {\n                            li.appendChild(list);\n                        }\n                        levels[type][margin] = list;\n                    }\n                    if (lastType != type) {\n                        for (key in levels) {\n                            for (child in levels[key]) {\n                                if ($.contains(list, levels[key][child])) {\n                                    delete levels[key][child];\n                                }\n                            }\n                        }\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    lastMargin = margin;\n                    lastType = type;\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                html = Cleaner.fn.clean.call(that, html);\n                html = that.stripEmptyAnchors(html);\n                placeholder = dom.create(document, 'div', { innerHTML: html });\n                that.headers(placeholder);\n                that.lists(placeholder);\n                that.tables(placeholder);\n                html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function () {\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = this.lockRange(true);\n                this.editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                });\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand,\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool,\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            Keyboard: Keyboard,\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            PrintCommand: PrintCommand,\n            ExportPdfCommand: ExportPdfCommand\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/inlineformat', ['editor/system'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        dom.attr(formatNode, this.attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1) {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{ tags: ['span'] }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                ui.data(this.type).value('inherit');\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{ tags: ['span'] }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-' + options.name,\n                    palette: palette,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        editor.focus();\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatblock', ['editor/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = RangeUtils.nodes(range);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        tagName = dom.name(blocks[i]);\n                        if (tagName == 'li') {\n                            list = blocks[i].parentNode;\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                            range = this.editor.createRange();\n                            range.selectNode(blocks[i]);\n                            formatter.toggle(range);\n                        } else if (formatTag && (tagName == 'td' || blocks[i].attributes.contentEditable)) {\n                            new BlockFormatter(format, this.values).apply(blocks[i].childNodes);\n                        } else {\n                            element = dom.changeTag(blocks[i], formatTag);\n                            dom.attr(element, format[0].attr);\n                        }\n                    }\n                } else {\n                    new BlockFormatter(format, this.values).apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            }\n        });\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                Command.fn.init.call(this, options);\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            FormatCommand: FormatCommand,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/linebreak', ['editor/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        range.setStartBefore(focusNode.firstChild || focusNode);\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, rng, shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (li.nextSibling) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        dom.insertAfter(paragraph, li.parentNode);\n                        dom.remove(li.parentNode.childNodes.length == 1 ? li.parentNode : li);\n                        paragraph.innerHTML = emptyParagraphContent;\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = dom.create(doc, 'p');\n                    dom.insertAfter(paragraph, heading);\n                    paragraph.innerHTML = emptyParagraphContent;\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous);\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next);\n                RangeUtils.selectRange(range);\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                range.deleteContents();\n                range.insertNode(br);\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/lists', ['editor/linebreak'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                var name = dom.name(node);\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        dom.unwrap(node);\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.childNodes, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section;\n                do {\n                    section = dom.closestEditable(nodes[i], [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        if (lastSection) {\n                            sections.push({\n                                section: lastSection,\n                                nodes: lastNodes\n                            });\n                        }\n                        lastNodes = [nodes[i]];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(nodes[i]);\n                    }\n                    i++;\n                } while (i < nodes.length);\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/link', ['editor/lists'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                options.formatter = {\n                    toggle: function (range) {\n                        new InlineFormatter([{ tags: ['a'] }]).remove(textNodes(range));\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != 'http://') {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return 'http://';\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            UnlinkTool: UnlinkTool\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/file', [\n        'kendo.filebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(dialog.element.find('.k-filebrowser'), extend({}, fileBrowser, {\n                        change: function () {\n                            dialog.element.find(KEDITORFILEURL).val(this.value());\n                        },\n                        apply: apply\n                    }));\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/image', [\n        'kendo.imagebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(dialog.element.find('.k-imagebrowser'), extend({}, imageBrowser, {\n                        change: function () {\n                            dialog.element.find(KEDITORIMAGEURL).val(this.value());\n                        },\n                        apply: apply\n                    }));\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/image'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/indent', ['editor/components'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            remove: function (nodes) {\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                options.formatter = {\n                    toggle: function (range) {\n                        new IndentFormatter().apply(RangeUtils.nodes(range));\n                    }\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                options.formatter = {\n                    toggle: function (range) {\n                        new IndentFormatter().remove(RangeUtils.nodes(range));\n                    }\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitable = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len;\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    isOutdentable = indent(suitable[i]);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable[i]).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable[i], 'li') && (listParentsCount > 1 || indent(suitable[i].parentNode)) || dom.ofType(suitable[i], [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/viewhtml', ['editor/indent'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), content = ViewHtmlCommand.indent(editor.value()), textarea = '.k-editor-textarea';\n                function apply(e) {\n                    editor.value(dialog.find(textarea).val());\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog\\'>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatting', ['editor/viewhtml'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    this.clean(nodes[c]);\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/formatting'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = kendo.ui.editor.EditorUtils;\n        var ToolTemplate = kendo.ui.editor.ToolTemplate;\n        var Tool = kendo.ui.editor.Tool;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-button-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-move\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        e.preventDefault();\n                    }\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0;\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'more' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(editorElement.outerWidth() - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - wrapper.outerHeight() - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        window.open();\n                    }\n                }\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-custom',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + (options.name == 'custom' ? 'i-custom' : options.name);\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.element.add(popupElement).off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, buttons, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).hasClass('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 : -1, that.element, true);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement) {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    var button = $(this);\n                    e.preventDefault();\n                    e.stopPropagation();\n                    button.removeClass('k-state-hover');\n                    if (!button.is('[data-popup]')) {\n                        that._editor.exec(that._toolName(this));\n                    }\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                return tool[0] ? tool[0].substring(tool[0].lastIndexOf('-') + 1) : 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editor = that._editor, range = editor.getRange(), nodes = kendo.ui.editor.RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool && tool.update) {\n                        tool.update($(this), nodes);\n                    }\n                });\n                this.update();\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', group.outerWidth(true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/tables', ['editor/toolbar'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = '.kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool;\n        var editableCell = '<td>' + Editor.emptyElementContent + '</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr>' + new Array(columns + 1).join(editableCell) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                options.postProcess = this.postProcess;\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                this._editor = options.editor;\n                this._popup = popup;\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.on('mousemove' + NS, function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave' + NS, function () {\n                    that._setTableSize();\n                }).on('mouseup' + NS, function (e) {\n                    that._exec(tableFromLocation(e));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.dialogCancel);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.dialogCancel).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off(NS);\n            },\n            update: function (ui, nodes) {\n                var isFormatted;\n                PopupTool.fn.update.call(this, ui);\n                isFormatted = tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyElementContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyElementContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var table = dom.closest(rows[0], 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        var row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/system',\n        'editor/inlineformat',\n        'editor/formatblock',\n        'editor/linebreak',\n        'editor/lists',\n        'editor/link',\n        'editor/file',\n        'editor/image',\n        'editor/components',\n        'editor/indent',\n        'editor/viewhtml',\n        'editor/formatting',\n        'editor/toolbar',\n        'editor/tables'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}