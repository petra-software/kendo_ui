{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","FormatTool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","COLUMN_RESIZING_NS","ROW_RESIZING_NS","TABLE_RESIZING_NS","SELECT","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","registerTool","toolName","tool","toolOptions","cssClass","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","messages","bold","italic","underline","strikethrough","superscript","subscript","justifyCenter","justifyLeft","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","insertFile","insertHtml","viewHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","foreColor","backColor","style","emptyFolder","editAreaTitle","uploadFile","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTable","createTableHint","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","_initializeColumnResizing","_initializeRowResizing","_initializeTableResizing","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","replace","innerHTML","mousedown","_endTyping","mouseup","_mouseup","_initializeImmutables","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","e","_selectionChange","_selectionStarted","resizable","isResizable","isPlainObject","content","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","TableResizing","create","bind","_showTableResizeHandles","_destroyTableResizing","tableResizing","destroy","showResizeHandles","ColumnResizing","_destroyColumnResizing","columnResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","location","hostname","hide","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","body","open","write","isRtl","msie","edge","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","t","NS","_handlers","hasOwnProperty","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","_mousedown","execCommand","touch","selectionchange","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","click","target","createRange","selectNode","cut copy paste","focusin","hasAttribute","show","focusout","toolbarContainerElement","active","get","contains","preventPopupHide","is","focused","removeClass","immutables","Immutables","gecko","which","o","cmd","toolsFromShortcut","changesContent","refresh","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","tempInput","blur","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","managesUndoRedo","async","change","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","FormatCommand","formatter","nodes","toggleClass","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","isAncestorOrSelf","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isEmpty","isInline","list","scrollContainer","webkit","compatMode","scrollTo","elementTop","elementHeight","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeTextSiblings","tag","closestBy","condition","rootCondition","ofType","changeTag","tagName","skipAttributes","attribute","specified","cssText","setAttribute","appendChild","editableParent","wrap","unwrap","createElement","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","getElementsByTagName","_preventScriptExecution","l","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","sort","a","b","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","hasClass","serialize","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","u","face","script","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","toStart","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","index","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","select","movedStart","movedEnd","item","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","collapsedToStart","startParent","endParent","startIndex","endIndex","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","finishUpdate","startRestorePoint","endRestorePoint","GenericCommand","selected","Command","restorePoint","marker","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","expandImmutablesIn","genericCommand","postProcess","InsertHtmlTool","initOptions","dataSource","_selectBox","SelectBox","dataTextField","dataValueField","highlightFirst","selectbox","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","cell","forwards","getNext","removeTableContent","backspaceHandler","isTypingKey","evt","Event","isDefaultPrevented","immutablesContext","deleteSelection","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","li","ListFormatter","_handleSelection","ancestor","table","emptyParagraphContent","_handleImmutables","_join","startImmutable","endImmutable","_root","dest","method","backspace","del","systemCommandIsInProgress","createUndoCommand","changed","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","typingInProgress","isCharacter","String","fromCharCode","alt","shift","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","fragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","onload","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","images","originalEvent","files","when","results","Array","onpaste","r","clipboardRange","clipboardNode","_decoreateClipboardNode","_moveToCaretPosition","unbind","containers","clean","borderWidth","overflow","margin","padding","fontVariant","fontWeight","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","skipCleaners","applicable","display","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","placeholder","rootMargin","listContainer","listIndex","levelType","blockChildren","lastMargin","levels","parseFloat","marginLeft","listStyleType","removeAttributes","removeAttributeNode","createColGroup","row","cells","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","eq","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","removeAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","action","actions","ul","thead","tbody","td","cleaner","tdCleaner","cellText","PrintCommand","print","ExportPdfCommand","initialValue","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","activate","formatNode","formatNodes","consolidate","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parents","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","ColorTool","palette","_widget","ColorPicker","toolIcon","fontStyle","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","imageFormat","imageAttributes","nonImages","applyFormatting","immutableFormat","splice","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","_initOptions","BlockFormatTool","textAlign","float","marginRight","listStylePosition","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","rng","parentChildrenLength","siblings","NewLineCommand","filler","oldIE","ListFormatFinder","unwrapTag","isList","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ListCommand","ListTool","lastIndexOfRegExp","str","indexOfRegExp","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","dialog","_initialText","_range","_close","visible","_apply","_keydown","linkUrl","_dialog","center","ENTER","ESC","textInput","anchor","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","KEDITORFILEURL","KEDITORFILETITLE","FileCommand","file","showBrowser","applied","keyDown","FileBrowser","transport","read","_fileBrowser","ev","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onerror","ImageBrowser","_imageBrowser","DropDownList","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","decorate","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ViewHtmlCommand","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","OVERFLOWANCHOR","focusable","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","autoFocus","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","origin","copyAnchorStyles","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","overflowAnchor","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","outerWidth","outerHeight","TABINDEX","localizedText","res","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","move","constrain","focusElement","currentContainer","button","stopPropagation","toolname","lastIndexOf","_immutablesContext","_updateImmutablesState","uiData","widget","groupUi","uiElement","trackImmutables","toolsToBeUpdated","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","detach","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","twTool","_open","_activate","_toggle","_popup","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_exec","_valid","status","selectedRows","selectedColumns","tableSize","InsertRowCommand","cellCount","newRow","InsertColumnCommand","columnIndex","newCell","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool","lowerBound","upperBound","getScrollBarWidth","scrollHeight","clientHeight","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","WIDTH","column","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnWidth","columnLeftOffset","adjacentColumnWidth","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowPosition","tableBodyTopOffset","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","modifier","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","startImmutableParent","endImmutableParent","editableNodes","randomId","chars","charAt","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","cancelDeleting","closestSelectionLi","closestImmutableLi","nextImmutable","_removeImmutable","commonContainer","_nextNode","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","lastSelectedRow","rowIndex","cellsLength","newRowsCount","cellIndex","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","unit","TableWizardEditTool","numericTextBoxSettings","units","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","_destroyComponents"],"mappings":"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,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,SACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,WACLC,IAAK,QACLC,IAAK,MACLC,KAAM,OACNC,KAAM,SACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,SACNC,KAAM,QACNC,KAAM,OACNC,KAAM,QACNC,KAAM,UACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,QACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,SACNC,KAAM,OACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,OACNC,KAAM,QACNC,KAAM,KACNC,KAAM,OACNC,KAAM,MACNC,KAAM,QACNC,KAAM,SACNC,KAAM,QACNC,KAAM,OACNC,KAAM,QACNC,KAAM,MACNC,KAAM,MACNC,KAAM,KACNC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,KAAM,SACNC,KAAM,MACNC,KAAM,OACNC,KAAM,QACNC,KAAM,KACNC,KAAM,QACNC,KAAM,KACNC,KAAM,KACNC,KAAM,MACNC,KAAM,MACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,QACNC,KAAM,SACNC,KAAM,OACNC,KAAM,OACNC,KAAM,QACNC,KAAM,QACNC,KAAM,SACNC,KAAM,SACNC,KAAM,OACNC,KAAM,OACNC,KAAM,MACNC,KAAM,SACNC,KAAM,QACNC,KAAM,SACNC,KAAM,QACNC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,KAAM,OACNC,KAAM,OACNC,KAAM,SACNC,KAAM,OACNC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,QAEV1mB,GACAoW,MAAOA,EACPE,OAAQA,EACRqQ,cAAe,SAAUlQ,EAAMmQ,GAC3B,GAAIjvB,GAAI,CACR,KAAK8e,EACD,MAAO,EAEX,QAAa,CAET,GADAA,EAAOA,EAAKoQ,iBACPpQ,EACD,KAEEmQ,IAA6B,GAAjBnQ,EAAK3L,UACnBnT,IAGR,MAAOA,IAEXmvB,WAAY,SAAUrQ,GAClB,MAAOA,IAA2B,OAAnBA,EAAK1L,WAAoC,OAAd0L,EAAKsQ,MAEnDC,aAAc,SAAUtQ,EAAQD,GAC5B,IACI,OAAQzW,EAAI8mB,WAAWpQ,KAAYnhB,EAAE4X,SAASuJ,EAAQ1W,EAAI8mB,WAAWrQ,GAAQA,EAAKwQ,WAAaxQ,IAASA,EAAKwQ,YAAcvQ,GAC7H,MAAOrT,GACL,OAAO,IAGf6jB,iBAAkB,SAAUlT,EAAMyC,GAC9B,MAAOzW,GAAIgnB,aAAahT,EAAMyC,IAASzC,GAAQyC,GAEnD0Q,oBAAqB,SAAUnT,EAAMyC,GACjC,GAAIzW,EAAIgnB,aAAahT,EAAMyC,GACvB,KAAOA,GAAQA,EAAKwQ,YAAcjT,GAC9ByC,EAAOA,EAAKwQ,UAGpB,OAAOxQ,IAEX2Q,cAAe,SAAU3Q,GACrB,MAAOzW,GAAI8mB,WAAWrQ,GAAQA,EAAKzhB,OAASyhB,EAAK4Q,WAAWryB,QAEhEsyB,cAAe,SAAU7Q,EAAMvM,GAK3B,IALW,GAIPqd,GAHAC,EAAU/Q,EAAKgR,WAAU,GACzBC,EAAmB,GACnBC,EAAWlR,EAAKI,YAEb8Q,GAAiC,GAArBA,EAAS7c,UAAiB6c,EAAS5c,WAClD2c,GAAoBC,EAAS5c,UAC7Bwc,EAAOI,EACPA,EAAWA,EAAS9Q,YACpB7W,EAAI2E,OAAO4iB,EAEf9Q,GAAKmR,WAAW1d,EAAQuM,EAAKzhB,QAC7BwyB,EAAQI,WAAW,EAAG1d,GACtBsd,EAAQzc,WAAa2c,EACrB1nB,EAAI4D,YAAY4jB,EAAS/Q,IAE7BoR,WAAY,SAAUpR,EAAMqR,GAAhB,GACCxV,GACD/S,CADR,KAAS+S,IAAOwV,GAKZ,GAJIvoB,EAAQkX,EAAKnE,GACbA,GAAOsD,IACPrW,EAAQkX,EAAK9iB,EAAMwC,QAAQ4xB,SAAWlS,EAAWC,IAEjC,gBAATvW,IACP,IAAKS,EAAI6nB,WAAWtoB,EAAOuoB,EAAWxV,IAClC,OAAO,MAER,IAAI/S,GAASuoB,EAAWxV,GAC3B,OAAO,CAGf,QAAO,GAEX0V,kBAAmB,SAAUvR,GACzB,MAAOzW,GAAIioB,aAAaxR,EAAMN,IAAkBM,EAAKyR,cAAc/gB,MAEvEghB,aAAc,SAAUnV,GAAV,GACOrb,GAAGod,EAEZqB,EAFJgS,IACJ,KAAKzwB,EAAI,EAAGod,EAAM/B,EAAMhe,OAAY+f,EAAJpd,EAASA,IACjCye,EAAQpW,EAAIioB,aAAajV,EAAMrb,GAAIqI,EAAImW,eACvCC,GAAS7gB,EAAEqC,QAAQwe,EAAOgS,GAAU,GACpCA,EAAO9zB,KAAK8hB,EAGpB,OAAOgS,IAEXC,mBAAoB,SAAUxpB,GAC1B,MAAOA,GAASypB,aAAezpB,EAAS0pB,cAE5C/R,UAAWA,EACXL,cAAeA,EACfD,qBAAsBA,EACtBG,eAAgBA,EAChBJ,MAAOA,EACPM,UAAWA,EACXiS,MAAO,SAAUC,GACb,GAAIC,GAAUvT,EAAI7J,KAAKmd,EACvB,OAAKC,GAGE,IAAMjhB,EAAIihB,EAAQj0B,MAAM,GAAI,SAAUk0B,GAEzC,MADAA,GAAIznB,SAASynB,EAAG,IAAIC,SAAS,IACtBD,EAAE3zB,OAAS,EAAI2zB,EAAI,IAAMA,IACjChhB,KAAK,IALG8gB,GAOf1X,OAAQ,SAAUxR,EAAOvL,GACrB,GAAI60B,IAAkB70B,GAAWA,EAAQoa,SAAWqH,EAAWD,CAC/D,OAAOjW,GAAMiD,QAAQqmB,EAAgB,SAAUC,GAAV,GAC7BC,GAAWD,EAAEE,WAAW,GACxBC,EAASvT,EAAYqT,EACzB,OAAOE,GAAS,IAAMA,EAAS,IAAMH,KAG7CI,MAAO,SAAUzS,GACb,MAAOA,IAA0B,IAAlBA,EAAK3L,UAAkB,cAAcO,KAAKoL,EAAK1L,YAElEoe,SAAU,SAAU9Z,GAChB,OAAQA,GAAQ,IAAI7M,QAAQ4S,EAAK,KAErCgU,aAAc,SAAU3S,GAChBzW,EAAIkpB,MAAMzS,IACVA,EAAKwQ,WAAWoC,YAAY5S,IAGpC6S,cAAe,SAAU7S,GACrB,GAAIjW,GAAOiW,EAAKqR,UAChB,OAAyB,YAAlBrR,EAAK8S,WAA2BvpB,EAAIqN,GAAGoJ,EAAM,QAA4B,QAAlBA,EAAK8S,WAAuB/oB,EAAKgpB,YAAchpB,EAAKipB,yBAEtHC,UAAW,SAAUjT,GACjB,MAAOzW,GAAIqN,GAAGoJ,EAAM,OAASzW,EAAIqN,GAAGoJ,EAAM,OAE9CkT,iBAAkB,SAAU3W,GACxB,MAAOzd,GAAEq0B,KAAK5W,EAAO,SAAU6W,GAC3B,GAAIpyB,GAAOuI,EAAIvI,KAAKoyB,EACpB,OAAY,MAARpyB,GACO,EACAuI,EAAIspB,cAAcO,IAClB,EACA7pB,EAAI8pB,cAAcD,IAClB,EACkB,GAAlBA,EAAM/e,UAAkBmL,EAAMxe,KAASuI,EAAI+pB,UAAUF,MAMxEC,cAAe,SAAUrT,GACrB,MAAOA,IAAyB,GAAjBA,EAAK3L,UAAiBuK,EAAgBhK,KAAKoL,EAAK1L,YAEnEgf,UAAW,SAAUtT,GACjB,MAAwB,IAAjBA,EAAK3L,WAAkB9K,EAAI2pB,iBAAiBlT,EAAK4Q,YAAYryB,QAExEyC,KAAM,SAAUgf,GACZ,MAAOA,GAAKuT,SAAS7xB,eAEzB8xB,sBAAuB,SAAUxT,GAC7B,MAAOlhB,GAAEq0B,KAAKnT,EAAK4Q,WAAY,SAAUwC,GACrC,MAAyB,IAAlBA,EAAM/e,WAAkB9K,EAAIkqB,aAAaL,MAGxDM,aAAc,SAAU1T,GAAV,GAKDoT,GAJLO,EAAS,IACb,IAAqB,GAAjB3T,EAAK3L,SACL,MAAO2L,EAEX,KAASoT,EAAQpT,EAAK4T,UAAWR,EAAOA,EAAQA,EAAMhD,gBAElD,GADAuD,EAASpqB,EAAImqB,aAAaN,GAEtB,MAAOO,EAGf,OAAOA,IAEX/c,GAAI,SAAUoJ,EAAMuT,GAChB,MAAOvT,IAAQzW,EAAIvI,KAAKgf,IAASuT,GAErCM,SAAU,SAAU7T,GAChB,MAAOA,GAAK8S,WAAavT,GAE7BkU,aAAc,SAAUzT,GACpB,MAAOxB,GAAW5J,KAAKoL,EAAK1L,YAEhCwf,aAAc,SAAU9T,GACpB,MAAOvB,GAAW7J,KAAKoL,EAAK1L,YAEhCyf,gBAAiB,SAAU/T,GAAV,GAOTgU,GAQA/T,EACAE,EACAxM,EAQIsgB,EACAC,CAzBR,OAAM3qB,GAAI8mB,WAAWrQ,IAASzW,EAAIkqB,aAAazT,GAG3CvB,EAAW7J,KAAKoL,EAAK1L,YACd,GAEP0f,EAAU,SAAUG,EAAIzgB,GACxB,KAAOygB,EAAGzgB,IAEN,GADAygB,EAAKA,EAAGzgB,GACJnK,EAAI2pB,kBAAkBiB,IAAK51B,OAAS,EACpC,MAAO41B,IAIflU,EAASD,EAAKwQ,WACdrQ,EAAO6T,EAAQhU,EAAM,mBACrBrM,EAAOqgB,EAAQhU,EAAM,eACrBrB,EAAI/J,KAAKoL,EAAK1L,cACJ6L,IAAQxM,GAElB7U,EAAEmhB,GAAQrJ,GAAG,qCACN,MAEPrN,EAAI6qB,QAAQnU,IAAW1W,EAAIqN,GAAGqJ,EAAQ,WAClCgU,EAAc9T,GAAQ5W,EAAI6qB,QAAQjU,GAClC+T,EAAcvgB,GAAQpK,EAAI6qB,QAAQzgB,IACjCA,GAAQsgB,IAAgB9T,GAAQ+T,GAAeD,GAAeC,MAzB5D,GA+BfE,QAAS,SAAUpU,GACf,MAAOL,GAAMpW,EAAIvI,KAAKgf,KAE1BqU,QAAS,SAAUrU;AACf,MAAOR,GAAMjW,EAAIvI,KAAKgf,KAE1BsU,SAAU,SAAUtU,GAChB,MAAOH,GAAOtW,EAAIvI,KAAKgf,KAE3BuU,KAAM,SAAUvU,GACZ,GAAIhf,GAAOgf,EAAOzW,EAAIvI,KAAKgf,GAAQ,EACnC,OAAe,MAARhf,GAAwB,MAARA,GAAwB,MAARA,GAE3CwzB,gBAAiB,SAAU7kB,GACvB,GAAID,GAAMnG,EAAIqoB,mBAAmBjiB,GAAM6kB,GAAmB9kB,EAAIY,eAAiBZ,GAAKtH,UAAYsH,EAAI+hB,eAAiB/hB,CAMrH,OAJI8kB,GADAt3B,EAAMwC,QAAQE,QAAQ60B,QAAwC,cAA9BD,EAAgBE,WAC9BF,EAAgB9jB,KAEhB8jB,EAAgBnsB,iBAI1CssB,SAAU,SAAU3U,GAChB,GAAkJ4U,GAAYC,EAA1JhsB,EAAU/J,EAAEyK,EAAI8mB,WAAWrQ,GAAQA,EAAKwQ,WAAaxQ,GAAOtQ,EAAMnG,EAAIqoB,mBAAmB5R,EAAKyR,eAAgBqD,EAAeplB,EAAIqlB,YAAwCP,EAAkBjrB,EAAIirB,gBAAgBxU,EAAKyR,cACxNmD,GAAa/rB,EAAQ4K,SAASuhB,IAC9BH,EAAgBhsB,EAAQ,GAAGosB,aACtBJ,IACDA,EAAgBpqB,SAAS5B,EAAQyG,IAAI,eAAgB,KAAOtB,KAAKknB,KAAK,IAAMzqB,SAAS5B,EAAQyG,IAAI,aAAc,MAAQ,IAEvHulB,EAAgBD,EAAaJ,EAAgBta,UAAY4a,IACzDN,EAAgBta,UAAY2a,EAAgBD,EAAaE,IAGjEK,iBAAkB,SAAUxlB,GACxBkP,EAAqBtV,EAAIirB,gBAAgB7kB,GAAKuK,WAElDzG,OAAQ,SAAUsC,EAAQqf,GAMtB,IANI,GACAzB,IACAqB,IAAKjf,EAAOsf,UACZ9hB,KAAMwC,EAAOuf,YAEbrV,EAASlK,EAAOqf,aACbnV,KAAYmV,GAAgB7rB,EAAIgnB,aAAa6E,EAAcnV,KAC9D0T,EAAOqB,KAAO/U,EAAOoV,UACrB1B,EAAOpgB,MAAQ0M,EAAOqV,WACtBrV,EAASA,EAAOmV,YAEpB,OAAOzB,IAEX4B,iBAAkB,SAAU5lB,GACS,gBAAtBkP,KACPtV,EAAIirB,gBAAgB7kB,GAAKuK,UAAY2E,IAG7C2W,SAAU,SAAUvV,EAAQwV,EAAYC,GACpCzV,EAAO/V,aAAaurB,EAAYxV,EAAO2Q,WAAW8E,IAAa,OAEnExrB,aAAc,SAAUurB,EAAYE,GAChC,MAAIA,GAAiBnF,WACVmF,EAAiBnF,WAAWtmB,aAAaurB,EAAYE,GAErDA,GAGfxoB,YAAa,SAAUsoB,EAAYE,GAC/B,MAAOA,GAAiBnF,WAAWtmB,aAAaurB,EAAYE,EAAiBvV,cAEjFlS,OAAQ,SAAU8R,GACdA,EAAKwQ,WAAWoC,YAAY5S,IAEhC4V,mBAAoB,SAAU5V,GAE1B,IADA,GAAIwQ,GAAaxQ,EAAKwQ,WACfxQ,EAAKI,aAA4C,GAA7BJ,EAAKI,YAAY/L,UACxCmc,EAAWoC,YAAY5S,EAAKI,YAEhC,MAAOJ,EAAKoQ,iBAAoD,GAAjCpQ,EAAKoQ,gBAAgB/b,UAChDmc,EAAWoC,YAAY5S,EAAKoQ,kBAGpCvkB,KAAM,SAAUoU,GAAV,GACO/e,GACD8e,CADR,KAAS9e,EAAI+e,EAAO2Q,WAAWryB,OAAS,EAAG2C,GAAK,EAAGA,IAC3C8e,EAAOC,EAAO2Q,WAAW1vB,GACzBqI,EAAI8mB,WAAWrQ,IACVzW,EAAImpB,SAAS1S,EAAK1L,WAAW/V,QAC9BgL,EAAI2E,OAAO8R,GAEXzW,EAAIkqB,aAAazT,IACjBzW,EAAIW,aAAa8V,EAAMC,IAEpBD,EAAK8S,WAAavT,IACzBhW,EAAIsC,KAAKmU,GACJA,EAAK4Q,WAAWryB,QAAWgL,EAAI8qB,QAAQrU,IACxCzW,EAAI2E,OAAO8R,GAIvB,OAAOC,IAEXvW,QAAS,SAAUsW,EAAM6V,GACrB,KAAO7V,GAAQzW,EAAIvI,KAAKgf,IAAS6V,GAC7B7V,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAEX8V,UAAW,SAAU9V,EAAM+V,EAAWC,GAClC,KAAOhW,IAAS+V,EAAU/V,IAAO,CAC7B,GAAIgW,GAAiBA,EAAchW,GAC/B,MAAO,KAEXA,GAAOA,EAAKwQ,WAEhB,MAAOxQ,IAEXgU,QAAS,SAAUhU,EAAMtM,GACrB,EACIsM,GAAOA,EAAKtM,SACPsM,GAAyB,GAAjBA,EAAK3L,SACtB,OAAO2L,IAEXrM,KAAM,SAAUqM,GACZ,MAAOzW,GAAIyqB,QAAQhU,EAAM,gBAE7BG,KAAM,SAAUH,GACZ,MAAOzW,GAAIyqB,QAAQhU,EAAM,oBAE7BwR,aAAc,SAAUxR,EAAM5e,GAC1B,EACI4e,GAAOA,EAAKwQ,iBACPxQ,IAASzW,EAAI0sB,OAAOjW,EAAM5e,GACnC,OAAO4e,IAEXiW,OAAQ,SAAUjW,EAAM5e,GACpB,MAAOtC,GAAEqC,QAAQoI,EAAIvI,KAAKgf,GAAO5e,IAAS,GAE9C80B,UAAW,SAAUP,EAAkBQ,EAASC,GAC5C,GAAgHl1B,GAAGod,EAAKtd,EAAM8H,EAAOutB,EAAjIZ,EAAalsB,EAAI6E,OAAOunB,EAAiBlE,cAAe0E,GAAU9E,EAAasE,EAAiBtE,UACpG,KAAK+E,EACD,IAAKl1B,EAAI,EAAGod,EAAM+S,EAAW9yB,OAAY+f,EAAJpd,EAASA,IAC1Cm1B,EAAYhF,EAAWnwB,GACnBm1B,EAAUC,YACVt1B,EAAOq1B,EAAU9C,SACjBzqB,EAAQutB,EAAU/hB,UACdtT,GAAQse,EACRmW,EAAW3C,UAAYhqB,EAChB9H,GAAQke,EACfuW,EAAW5xB,MAAM0yB,QAAUZ,EAAiB9xB,MAAM0yB,QAElDd,EAAWe,aAAax1B,EAAM8H,GAK9C,MAAO6sB,EAAiBzV,YACpBuV,EAAWgB,YAAYd,EAAiBzV,WAI5C,OAFA3W,GAAIW,aAAaurB,EAAYE,GAC7BpsB,EAAI2E,OAAOynB,GACJF,GAEXiB,eAAgB,SAAU1W,GACtB,KAAOA,IAA0B,GAAjBA,EAAK3L,UAA0C,SAAzB2L,EAAK1X,kBACvC0X,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAEX2W,KAAM,SAAU3W,EAAMnW,GAGlB,MAFAN,GAAIW,aAAaL,EAASmW,GAC1BnW,EAAQ4sB,YAAYzW,GACbnW,GAEX+sB,OAAQ,SAAU5W,GAEd,IADA,GAAIC,GAASD,EAAKwQ,WACXxQ,EAAKE,YACRD,EAAO/V,aAAa8V,EAAKE,WAAYF,EAEzCC,GAAO2S,YAAY5S,IAEvBnW,QAAS,SAAUmW,GACf,GAAInW,GAAUN,EAAIusB,UAAU9V,EAAM,SAAUmU,GACxC,MAAOA,GAAG3D,YAAcjnB,EAAI2pB,iBAAiBiB,EAAG3D,WAAWI,YAAYryB,OAAS,GAEpF,OAAOO,GAAE+K,GAAS+M,GAAG,kBAAoB7X,OAAY8K,GAEzDuE,OAAQ,SAAUhG,EAAU+tB,EAAS9E,GACjC,MAAO9nB,GAAIQ,KAAK3B,EAASyuB,cAAcV,GAAU9E,IAErDtnB,KAAM,SAAUlB,EAASwoB,GACrBA,EAAah0B,KAAWg0B,GACpBA,GAAcnS,IAASmS,KACvB9nB,EAAI1F,MAAMgF,EAASwoB,EAAWxtB,aACvBwtB,GAAWxtB,MAEtB,KAAK,GAAIkG,KAAQsnB,GACY,OAArBA,EAAWtnB,IACXlB,EAAQiuB,gBAAgB/sB,SACjBsnB,GAAWtnB,IACH,aAARA,IACPlB,EAAQkB,GAAQsnB,EAAWtnB,GAGnC,OAAO1M,GAAOwL,EAASwoB,IAE3BxtB,MAAO,SAAUmc,EAAMlX,GACnBhK,EAAEkhB,GAAM1Q,IAAIxG,QAEhBiuB,QAAS,SAAU/W,EAAMlX,GACrB,IAAK,GAAI+S,KAAO/S,GACR+S,GAAOsD,IACPtD,EAAM3e,EAAMwC,QAAQ4xB,SAAWlS,EAAWC,GAE9CW,EAAKnc,MAAMgY,GAAO,EAEK,MAAvBmE,EAAKnc,MAAM0yB,SACXvW,EAAK8W,gBAAgB5X,IAG7B8X,YAAa,SAAUtmB,EAAM1P,EAAMqwB,GAC/B,GAAgExtB,GAA5DwU,EAAOvZ,EAAEyK,EAAI6E,OAAOsC,EAAK+gB,cAAezwB,EAAMqwB,GAUlD,OATA3gB,GAAK+lB,YAAYpe,EAAK,IACtBxU,EAAQmN,EAAI8N,EAAe,SAAUhW,GACjC,MAAIlJ,GAAQkR,MAAiB,eAAThI,GAA6C,OAAnBuP,EAAK/I,IAAIxG,GAC5C,kBAEAA,EAAQ,IAAMuP,EAAK/I,IAAIxG,KAEnCoI,KAAK,KACRmH,EAAKnK,SACErK,GAEXozB,uBAAwB,SAAUpuB,GAC9B,GAAIquB,GAAkBruB,EAAQyG,IAAI,mBAClC,OAAI4nB,GAAgBvsB,QAAQ,mBAAqB,GAAyB,gBAApBusB,EAC3CA,EACqC,SAArCruB,EAAQ,GAAGstB,QAAQz0B,cACnB,SAEA6H,EAAI0tB,uBAAuBpuB,EAAQoX,WAGlDkX,UAAW,SAAUnX,GACjB,GAAIpH,GAAOoH,EAAKhU,SAGhB,OAFA4M,GAAOA,EAAK7M,QAAQ,oBAAqB,IACzC6M,EAAOA,EAAK7M,QAAQ,mBAAoB,KAG5C+K,YAAa,SAAUkJ,EAAMoX,GACzB,GAA6El2B,GAAGod,EAA5EwU,EAAY,IAAM9S,EAAK8S,UAAY,IAAKuE,EAAUD,EAAW5kB,MAAM,IACvE,KAAKtR,EAAI,EAAGod,EAAM+Y,EAAQ94B,OAAY+f,EAAJpd,EAASA,IACvC4xB,EAAYA,EAAU/mB,QAAQ,IAAMsrB,EAAQn2B,GAAK,IAAK,IAE1D4xB,GAAYh0B,EAAE+M,KAAKinB,GACfA,EAAUv0B,OACVyhB,EAAK8S,UAAYA,EAEjB9S,EAAK8W,gBAAgBxX,IAG7BgY,eAAgB,WACZ,GAAmFp2B,GAAGq2B,EAAWvX,EAAMwX,EAAOC,EAA1GC,EAAQC,UAAUp5B,OAAQq5B,KAAYC,EAAgB9pB,EAAAA,EAAU+pB,EAAS,IAC7E,KAAKJ,EACD,MAAO,KAEX,IAAa,GAATA,EACA,MAAOC,WAAU,EAErB,KAAKz2B,EAAI,EAAOw2B,EAAJx2B,EAAWA,IAAK,CAGxB,IAFAq2B,KACAvX,EAAO2X,UAAUz2B,GACV8e,GACHuX,EAAU15B,KAAKmiB,GACfA,EAAOA,EAAKwQ,UAEhBoH,GAAM/5B,KAAK05B,EAAUQ,WACrBF,EAAgB7pB,KAAKH,IAAIgqB,EAAeN,EAAUh5B,QAEtD,GAAa,GAATm5B,EACA,MAAOE,GAAM,GAAG,EAEpB,KAAK12B,EAAI,EAAO22B,EAAJ32B,EAAmBA,IAAK,CAEhC,IADAs2B,EAAQI,EAAM,GAAG12B,GACZu2B,EAAI,EAAOC,EAAJD,EAAWA,IACnB,GAAID,GAASI,EAAMH,GAAGv2B,GAClB,MAAO42B,EAGfA,GAASN,EAEb,MAAOM,IAEXE,wBAAyB,SAAUzb,GAAV,GACjBoX,GAkBAsE,EACAC,CAIJ,OArBIvE,GADgB,GAAhBpX,EAAMhe,OACGgL,EAAIioB,aAAajV,EAAM,IAC5B,KACA,OAGKhT,EAAI+tB,eAAea,MAAM,KAAM5b,GAEvCoX,IACDA,EAASpqB,EAAIioB,aAAajV,EAAM,IAC5B,IACA,QACEA,EAAM,GAAGkV,cAAc/gB,MAE7BnH,EAAI+qB,SAASX,KACbA,EAASpqB,EAAIgoB,kBAAkBoC,IAE/BsE,EAAkBjnB,EAAIuL,EAAOhT,EAAImtB,gBACjCwB,EAAmB3uB,EAAI+tB,eAAeW,GAAiB,GACvDn5B,EAAE4X,SAASid,EAAQuE,KACnBvE,EAASuE,GAENvE,GAEXyE,gBAAiB,SAAUpY,EAAMqY,GAAhB,GACT3uB,GACA4uB,EAAW/uB,EAAImtB,eAAe1W,EAWlC,OATItW,GADAH,EAAI0sB,OAAOjW,EAAMqY,GACPrY,EAEAzW,EAAIioB,aAAaxR,EAAMqY,GAEjC3uB,GAAW4uB,GAAYx5B,EAAE4X,SAAShN,EAAS4uB,GAC3C5uB,EAAU4uB,GACF5uB,GAAW4uB,IACnB5uB,EAAU4uB,GAEP5uB,GAEX6uB,sBAAuB,SAAUvY,EAAMqY,GACnC,GAAIC,GAAW/uB,EAAI6uB,gBAAgBpY,EAAMqY,EACzC,OAAIC,IAAY/uB,EAAI0sB,OAAOqC,EAAUD,GAC1BC,EADX,QAIJE,OAAQ,SAAUrC,EAAS5Z,EAAOkc,GAC9B,GAAIC,GAAW,SAAU1Y,GACrB,MAAOzW,GAAIvI,KAAKgf,IAASmW,EAE7B,OAAO5sB,GAAIovB,SAASpc,EAAOmc,EAAUD,IAEzCE,SAAU,SAAUpc,EAAOwZ,EAAW0C,GAKlC,IALM,GAIFG,GAHA13B,EAAI,EACJod,EAAM/B,EAAMhe,OACZo1B,KAEOrV,EAAJpd,EAASA,IACZ03B,EAAQ7C,EAAUxZ,EAAMrb,KACpB03B,IAAUH,IAAWG,GAASH,IAC9B9E,EAAO91B,KAAK0e,EAAMrb,GAG1B,OAAOyyB,IAEXkF,qBAAsB,SAAU7Y,GAAV,GACd8Y,GAAWh6B,EAAEkhB,GAAMlW,KAAK,WACxBvL,EAASu6B,EAASv6B,OAClB2C,EAAI,CACR,IAAI3C,EACA,KAAWA,EAAJ2C,EAAYA,IACfqI,EAAIwvB,oBAAoBD,EAAS53B,QAGrCqI,GAAIwvB,oBAAoB/Y,IAGhCgZ,oBAAqB,SAAUhZ,GAC3BlhB,EAAEkhB,GAAMlW,KAAK,uBAAuBoE,UAExC6qB,oBAAqB,SAAU/Y,GAAV,GAEb4T,GACA5yB,EACAi4B,CAHJ1vB,GAAIyvB,oBAAoBhZ,GACpB4T,EAAY5T,EAAK4T,UACjB5yB,EAAO4yB,GAAarqB,EAAIvI,KAAK4yB,KAE5B5yB,GAAgB,MAARA,GAAwB,OAARA,GAAyB,MAARA,GAAuC,QAAvB4yB,EAAUd,aACpEmG,EAAKjZ,EAAKyR,cAAcoF,cAAc,MACtCoC,EAAGnG,UAAY,OACf9S,EAAKyW,YAAYwC,MAI7B/7B,EAAMsC,GAAG6J,OAAOE,IAAMA,GACxBlK,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,cAAeD,IAC9C,YACG,SAAU8B,EAAGC,GAAb,GAiBOm6B,GAEAC,EACAC,EACAzf,EApBAzc,EAAQmC,OAAOnC,MACfyE,EAASzE,EAAMsC,GAAG6J,OAClBC,EAAM3H,EAAO4H,IACblM,EAASyB,EAAEzB,OACXg8B,EAAmB,uDAAuD7mB,MAAM,KAChF8mB,EAAU,KACVC,EAAO,aACPC,EAAU,sBACVC,EAAW,uBACXC,EAAiB,qGACjBC,EAAa,eACbC,EAAa,cACbC,EAAY,gDACZZ,EAAK,oBACLa,EAAM1xB,SAASyuB,cAAc,MACjCiD,GAAI9tB,UAAY,QACZktB,EAAwD,IAA5BY,EAAI5Z,WAAW7L,SAC/CylB,EAAM,KACFX,EAAar6B,EAAEq6B,WACfC,EAAK,KACLzf,GACAogB,eAAgB,SAAUtgB,GACtB,OAAQA,GAAQ,IAAI1N,QAAQ,yBAA0B,sBAAsBA,QAAQ,yBAA0B,kBAAkBA,QAAQ,iBAAkB,SAAU6sB,GAChK,MAAOA,GAAM7sB,QAAQ8tB,EAAW,MACjC9tB,QAAQ,kCAAmC,MAAMA,QAAQ,wBAAyBktB,EAAK,OAAOltB,QAAQ,yBAA0B,MAAMA,QAAQ,2BAA4B,QAAUktB,IAE3Le,sBAAuB,SAAUtpB,GAE7B,IADA,GAAIupB,GAAYt4B,EAAOqV,WAAWijB,UAAW5G,EAAgB/pB,EAAI+pB,cAAemE,EAAQ9mB,EAAKwP,WAAYga,EAAOxpB,EAAKkjB,UAC9GP,EAAcmE,IACjBA,EAAQA,EAAMpX,WAElB,MAAOiT,EAAc6G,IACjBA,EAAOA,EAAK9J,eAEZoH,IAASyC,EAAUzC,IACnB14B,EAAEm6B,GAAIkB,UAAUzpB,GAEhBwpB,GAAQD,EAAUC,IAClBp7B,EAAEm6B,GAAI5pB,SAASqB,IAGvB0pB,mBAAoB,SAAU1pB,GAC1B5R,EAAE4R,GAAM5G,KAAK,QAAQuwB,KAAK,WAAA,GAGdra,GAFJsa,EAAIx7B,EAAEpB,KACV,IAAI,SAASkX,KAAK0lB,EAAE1hB,UAAY0hB,EAAExwB,KAAK,aAAavL,OAAQ,CAExD,IADIyhB,EAAOtiB,KACJsiB,EAAKE,YAA0C,GAA5BF,EAAKE,WAAW7L,UACtC2L,EAAOA,EAAKE,UAEK,IAAjBF,EAAK3L,UAAkB/K,EAAIkW,MAAMlW,EAAItI,KAAKgf,MAEtCA,EAAKhU,UADL1C,EAAIsN,GAAGoJ,EAAM,MACI9iB,EAAMsC,GAAG6J,OAAOjK,sBAEhBlC,EAAMsC,GAAG6J,OAAOlK,yBAMrDo7B,sBAAuB,SAAU7pB,GAC7B5R,EAAE,qBAAsB4R,GAAMxC,UAElCssB,mBAAoB,SAAUjd,GAC1B,GAA2Crc,GAAGu5B,EAAIC,EAA9CC,EAAMpd,EAAKqd,qBAAqB,KACpC,KAAK15B,EAAI,EAAOy5B,EAAIp8B,OAAR2C,EAAgBA,IACxBu5B,EAAKE,EAAIz5B,GACTw5B,EAAgBD,EAAGzmB,aAAa,SAChCymB,EAAGjE,aAAa,QAAS,GACrBkE,EACAD,EAAGjE,aAAa,QAASkE,GAEzBD,EAAG3D,gBAAgB4D,IAI/BG,wBAAyB,SAAUtd,GAC/Bze,EAAEye,GAAMzT,KAAK,KAAKuwB,KAAK,WAAA,GAEfhE,GAAWn1B,EAAG45B,EAAG95B,EADjBqwB,EAAa3zB,KAAK2zB,UAEtB,KAAKnwB,EAAI,EAAG45B,EAAIzJ,EAAW9yB,OAAYu8B,EAAJ55B,EAAOA,IACtCm1B,EAAYhF,EAAWnwB,GACvBF,EAAOq1B,EAAU9C,SACb8C,EAAUC,WAAa,OAAO1hB,KAAK5T,KACnCtD,KAAK84B,aAAa,YAAcx1B,EAAMq1B,EAAUvtB,OAChDpL,KAAKo5B,gBAAgB91B,OAKrC6Y,UAAW,SAAUJ,EAAM8D,EAAMhgB,GAAtB,GACHqC,GAAU1C,EAAMwC,QAAQE,QACxBkR,EAAOlR,EAAQkR,KACfiqB,EAAWjqB,GAA0B,EAAlBlR,EAAQ6c,QAC3Bue,EAAc,cACdC,EAAe,eACf9jB,EAAI5Z,MACJwZ,EAAaI,EAAEJ,UAoCnB,OAnCA0C,GAAOE,EAAWogB,eAAetgB,GAC7BshB,IACAthB,EAAO,QAAUA,EACjBA,EAAOA,EAAK1N,QAAQ,yCAA0CkvB,EAAe,SAC7ExhB,EAAOA,EAAK1N,QAAQ,wCAAyCivB,EAAc,UAE3E7B,EAAWhiB,EAAEM,UACbgC,EAAOtC,EAAEM,OAAOgC,IAASA,GAE7B8D,EAAKvR,UAAYyN,EACb1C,GACAA,EAAWmkB,YAAY3d,GAEvBwd,GACAzxB,EAAI4E,OAAOqP,EAAK2C,YAChBphB,EAAEye,GAAMzT,KAAK,gCAAgCuwB,KAAK,WAC9C,GAAIra,GAAOtiB,IACPsiB,GAAKib,KACLjb,EAAKwW,aAAa,OAAQxW,EAAKib,IAC/Bjb,EAAK8W,gBAAgBmE,IAErBjb,EAAKgb,KACLhb,EAAKwW,aAAa,MAAOxW,EAAKgb,IAC9Bhb,EAAK8W,gBAAgBkE,OAGtBlqB,IACPxH,EAAIyW,UAAUxC,GACd5D,EAAW6gB,mBAAmBjd,IAElC5D,EAAWkhB,wBAAwBtd,GACnC5D,EAAWygB,mBAAmB7c,GAC9B5D,EAAW4gB,sBAAsBhd,GACjC5D,EAAWqgB,sBAAsBzc,GACjCze,EAAE,QAASye,GAAMvT,SAAS,WACnBuT,GAEX3D,WAAY,SAAU2D,EAAMhgB,GAGxB,QAAS49B,GAAe9J,GACpB,MAAOvyB,GAAEq0B,KAAK9B,EAAY,SAAUtnB,GAChC,MAAoB,SAAbA,EAAK/I,OAkJpB,QAASo6B,GAAc7E,GAAvB,GAGQqC,GACAyC,EAAUvyB,EAHV+C,EAAO/M,EAAE+M,KACTyD,EAAMzD,EAAK0qB,GAGX+E,IAEJ,KADA5B,EAAe6B,UAAY,IACd,CAET,GADA3C,EAAQc,EAAe7kB,KAAKvF,IACvBspB,EACD,KAEJyC,GAAWxvB,EAAK+sB,EAAM,GAAGl3B,eACzBoH,EAAQ+C,EAAK+sB,EAAM,IACH,oBAAZyC,GAA8C,gBAAZA,IAGlCA,EAAS1wB,QAAQ,UAAY,EAC7B7B,EAAQQ,EAAIyoB,MAAMjpB,GACXuyB,EAAS1wB,QAAQ,SAAW,EACnC7B,EAAQA,EAAMiD,QAAQutB,EAAS,KACxB,WAAW1kB,KAAK9L,KACvBA,EAAQA,EAAMiD,QAAQutB,EAAS,KAEnCgC,EAAWz9B,MACPw9B,SAAUA,EACVvyB,MAAOA,KAGf,MAAOwyB,GAEX,QAASE,GAAUjF,GAAnB,GAEQr1B,GADAo6B,EAAaF,EAAc7E,EAE/B,KAAKr1B,EAAI,EAAOo6B,EAAW/8B,OAAf2C,EAAuBA,IAC/ByyB,EAAO91B,KAAKy9B,EAAWp6B,GAAGm6B,UAC1B1H,EAAO91B,KAAK,KACZ81B,EAAO91B,KAAKy9B,EAAWp6B,GAAG4H,OAC1B6qB,EAAO91B,KAAK,KAGpB,QAAS49B,GAAoBzb,GAA7B,GAGQqW,GAAWn1B,EAAG45B,EACd95B,EAAM8H,EAAOwtB,EAHb3C,KACAtC,EAAarR,EAAKqR,UAGtB,KAAKnwB,EAAI,EAAG45B,EAAIzJ,EAAW9yB,OAAYu8B,EAAJ55B,EAAOA,IACtCm1B,EAAYhF,EAAWnwB,GACvBF,EAAOq1B,EAAU9C,SACjBzqB,EAAQutB,EAAUvtB,MAClBwtB,EAAYD,EAAUC,UACV,SAARt1B,GAAmB,SAAWgf,IAAQA,EAAKlX,MAC3CwtB,GAAY,EACG,QAARt1B,GAA2B,QAAT8H,EACzBwtB,GAAY,EACG,SAARt1B,GAAoB8H,EAEpB6wB,EAAW/kB,KAAK5T,GACvBs1B,GAAY,EACG,YAARt1B,EACPs1B,GAAY,EACG,WAARt1B,EACPs1B,GAAY,EACG,SAARt1B,GAAmBsI,EAAIsN,GAAGoJ,EAAM,MACvCsW,GAAY,EACG,SAARt1B,GAAmBsI,EAAIsN,GAAGoJ,EAAM,OAAkB,KAATlX,EAChDwtB,GAAY,EACLt1B,EAAK2J,QAAQ,SAAW,EAC/B2rB,GAAY,EACLsD,EAAWhlB,KAAK5T,KACvBs1B,IAAc/4B,EAAQsa,SAdtBye,GAAY,EAgBZA,GACA3C,EAAO91B,KAAKw4B,EAGpB,OAAO1C,GAEX,QAAS5pB,GAAKiW,EAAMqR,GAApB,GACQnwB,GAAG45B,EAAGzE,EAAWr1B,EAAM8H,EAGnB1C,EAA0BC,EAA4Bq1B,CAU9D,IAZArK,EAAaA,GAAcoK,EAAoBzb,GAC3C1W,EAAIsN,GAAGoJ,EAAM,SACT5Z,EAAQ4Z,EAAKnc,MAAMuC,MAAOC,EAAS2Z,EAAKnc,MAAMwC,OAAQq1B,EAAQ58B,EAAEkhB,GAChE5Z,GAASozB,EAAQ5kB,KAAKxO,KACtBs1B,EAAM3xB,KAAK,QAASU,SAASrE,EAAO,KACpCkD,EAAIytB,QAAQ/W,GAAQ5Z,MAAOrH,KAE3BsH,GAAUmzB,EAAQ5kB,KAAKvO,KACvBq1B,EAAM3xB,KAAK,SAAUU,SAASpE,EAAQ,KACtCiD,EAAIytB,QAAQ/W,GAAQ3Z,OAAQtH,MAG/BsyB,EAAW9yB,OAMhB,IAHA8yB,EAAWsK,KAAK,SAAUC,EAAGC,GACzB,MAAOD,GAAErI,SAAWsI,EAAEtI,SAAW,EAAiBsI,EAAEtI,SAAfqI,EAAErI,SAAwB,GAAK,IAEnEryB,EAAI,EAAG45B,EAAIzJ,EAAW9yB,OAAYu8B,EAAJ55B,EAAOA,IACtCm1B,EAAYhF,EAAWnwB,GACvBF,EAAOq1B,EAAU9C,SACjBzqB,EAAQutB,EAAUvtB,MACN,SAAR9H,GAA4B,WAAT8H,IAGvB9H,EAAOA,EAAK+K,QAAQ6tB,EAAY,IAChCjG,EAAO91B,KAAK,KACZ81B,EAAO91B,KAAKmD,GACZ2yB,EAAO91B,KAAK,MACA,SAARmD,EACAw6B,EAAU1yB,GAASkX,EAAKnc,MAAM0yB,SAE9B5C,EAAO91B,KADQ,OAARmD,GAAyB,QAARA,EACZ9D,EAAM4+B,WAAW9b,EAAKhM,aAAahT,EAAM,IAEzCsI,EAAIwW,UAAU9e,GAAQA,EAAO8H,GAE7C6qB,EAAO91B,KAAK,MAGpB,QAASqe,GAAS8D,EAAM+b,EAAMC,GAC1B,IAAK,GAAIC,GAAYjc,EAAKE,WAAY+b,EAAWA,EAAYA,EAAU7b,YACnEgT,EAAM6I,EAAWF,EAAMC,GAG/B,QAASpjB,GAAKoH,GACV,MAAOA,GAAK1L,UAAUvI,QAAQ,UAAW,IAE7C,QAASmwB,GAAelc,GACpB,GAAuB,WAAnBA,EAAK1L,UAAwB,CAC7B,EAAG,CAEC,GADA0L,EAAOA,EAAKwQ,WACRlnB,EAAIsN,GAAGoJ,EAAMoZ,IAAkC,IAA3BpZ,EAAK4Q,WAAWryB,OACpC,OAAO,CAEX,IAA+B,IAA3ByhB,EAAK4Q,WAAWryB,OAChB,OAAO,SAEL+K,EAAI8qB,QAAQpU,GACtB,QAAO,EAEX,OAAO,EAEX,QAASoT,GAAMpT,EAAM+b,EAAMC,GACvB,GAA8B7F,GAASgG,EAAQlc,EAAQnX,EAAOszB,EAA1D/nB,EAAW2L,EAAK3L,QACpB,MAAIvV,EAAEkhB,GAAMqc,SAAS,0BAA4Bv9B,EAAEkhB,GAAMqc,SAAS,2BAA6Bv9B,EAAEkhB,GAAMqc,SAAS,wBAGhH,GAAItlB,GAAcpV,EAAOqV,WAAWijB,UAAUja,GAC1C2T,EAAO91B,KAAKkZ,EAAWulB,UAAUtc,QAC9B,IAAgB,GAAZ3L,EAAe,CAEtB,GADA8hB,EAAU7sB,EAAItI,KAAKgf,IACdmW,GAAW7sB,EAAIupB,cAAc7S,GAC9B,MAEJ,KAAKziB,EAAQsa,UAAuB,UAAXse,GAAkC,YAAXA,GAC5C,MAGJ,IADAgG,EAASI,EAAOpG,GACZgG,IAC8B,IAAnBA,EAAOvkB,UAA2Bra,EAAQqa,SAAWukB,EAAOvkB,UAInE,MAHAukB,GAAO9uB,MAAM2S,GACb9D,EAAS8D,GAAM,EAAOmc,EAAOH,cAC7BG,EAAOK,IAAIxc,GACX,CAGR2T,GAAO91B,KAAK,KACZ81B,EAAO91B,KAAKs4B,GACZpsB,EAAKiW,GACD1W,EAAIkW,MAAM2W,GACVxC,EAAO91B,KAAK,QAEZ81B,EAAO91B,KAAK,KACZqe,EAAS8D,EAAM+b,GAAQzyB,EAAIsN,GAAGoJ,EAAM,QACpC2T,EAAO91B,KAAK,MACZ81B,EAAO91B,KAAKs4B,GACZxC,EAAO91B,KAAK,UAEb,IAAgB,GAAZwW,EAAe,CACtB,GAAI6nB,EAAelc,GAEf,MADA2T,GAAO91B,KAAK,UACZ,CAEJiL,GAAQ8P,EAAKoH,IACR+b,GAAQ7C,IACTjZ,EAASD,EAAKwQ,WACd4L,EAAWpc,EAAKoQ,gBACXgM,IACDA,GAAY9yB,EAAIgrB,SAASrU,GAAUA,EAASD,GAAMoQ,iBAEjDgM,GAAmC,KAAvBA,EAASpwB,YAAoB1C,EAAI8qB,QAAQgI,KACtDtzB,EAAQA,EAAMiD,QAAQ,kBAAmB,KAE7CjD,EAAQA,EAAMiD,QAAQ,KAAM,MAEhC4nB,EAAO91B,KAAKm+B,EAAelzB,EAAQQ,EAAIgR,OAAOxR,EAAOvL,QAClC,IAAZ8W,GACPsf,EAAO91B,KAAK,aACZ81B,EAAO91B,KAAKmiB,EAAKsQ,MACjBqD,EAAO91B,KAAK,QACO,GAAZwW,IACH2L,EAAKsQ,KAAK3lB,QAAQ,WAAa,GAC/BgpB,EAAO91B,KAAK,QACZ81B,EAAO91B,KAAKmiB,EAAKsQ,MACjBqD,EAAO91B,KAAK,SAEZ81B,EAAO91B,KAAK,MACZ81B,EAAO91B,KAAKmiB,EAAKsQ,MACjBqD,EAAO91B,KAAK,OAIxB,QAAS4+B,GAASlf,GAAlB,GACQmf,GAAgBnf,EAAKqT,WAAWryB,OAChCo+B,EAAYD,GAA6C,GAA5Bnf,EAAK2C,WAAW7L,QACjD,OAAOsoB,KAA+B,GAAjBD,GAAuC,GAAjBA,GAAsBpzB,EAAIupB,cAActV,EAAKqW,YAE5F,QAASgJ,KACD99B,EAAEq6B,WAAW57B,EAAQka,UACrBkc,EAASp2B,EAAQka,OAAOkc,IAAWA,GAlXnC,GACJA,MACA5c,EAAaxZ,GAAWA,EAAQwZ,WAMhCwlB,GACA9sB,QACIpC,MAAO,SAAU2S,GACb2T,EAAO91B,KAAK,WACZkM,EAAKiW,GACL2T,EAAO91B,KAAK,MAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,eAGpBg/B,YACIxvB,MAAO,SAAU2S,GACb2T,EAAO91B,KAAK,WACZkM,EAAKiW,GACL2T,EAAO91B,KAAK,MAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,cAEhBm+B,cAAc,GAElB3jB,MACIT,UAAU,EACVvK,MAAO,SAAU2S,GAAV,GAYC8c,GAQIC,EAnBJl5B,EAAQmc,EAAKnc,MACbwtB,EAAaoK,EAAoBzb,GACjCgd,EAAqB7B,EAAe9J,EACpC2L,GAAmBz+B,SACnBo1B,EAAO91B,KAAK,SACZkM,EAAKiW,EAAMgd,GACXrJ,EAAO91B,KAAK,MAEY,aAAxBgG,EAAMo5B,gBACNtJ,EAAO91B,KAAK,OAEZi/B,KACAj5B,EAAMmuB,OACN8K,EAAKj/B,KAAK,UAAYyL,EAAIyoB,MAAMluB,EAAMmuB,OAAS,KAE/CnuB,EAAMq5B,YACNJ,EAAKj/B,KAAK,SAAWgG,EAAMq5B,WAAa,KAExCr5B,EAAMN,WACFw5B,EAAOj+B,EAAEqC,QAAQ0C,EAAMN,SAAU81B,GACrCyD,EAAKj/B,KAAK,SAAWk/B,EAAO,MAE5BD,EAAKv+B,QACLo1B,EAAO91B,KAAK,SAAWi/B,EAAK5rB,KAAK,KAAO,MAGhDsrB,IAAK,SAAUxc,GACX,GAAInc,GAAQmc,EAAKnc,OACbA,EAAMmuB,OAASnuB,EAAMq5B,YAAcr5B,EAAMN,WACzCowB,EAAO91B,KAAK,WAEY,aAAxBgG,EAAMo5B,gBACNtJ,EAAO91B,KAAK,QAEZs9B,EAAeM,EAAoBzb,IAAOzhB,QAC1Co1B,EAAO91B,KAAK,aAIxBs/B,QACIvlB,UAAU,EACVvK,MAAO,WACHsmB,EAAO91B,KAAK,QAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,UAGpBu/B,IACIxlB,UAAU,EACVvK,MAAO,WACHsmB,EAAO91B,KAAK,QAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,UAGpBg+B,GACIjkB,UAAU,EACVvK,MAAO,WACHsmB,EAAO91B,KAAK,aAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,eAGpBqD,GACI0W,UAAU,EACVvK,MAAO,WACHsmB,EAAO91B,KAAK,SAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,WAGpBw/B,GACIzlB,UAAU,EACVvK,MAAO,WACHsmB,EAAO91B,KAAK,8CAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,aAGpBi/B,MACIllB,UAAU,EACVvK,MAAO,SAAU2S,GAAV,GAECgS,GACA+K,EACAO,CAHJ3J,GAAO91B,KAAK,iBACRm0B,EAAQhS,EAAKhM,aAAa,SAC1B+oB,EAAO1D,EAAiBrZ,EAAKhM,aAAa,SAC1CspB,EAAOtd,EAAKhM,aAAa,QACzBge,IACA2B,EAAO91B,KAAK,UACZ81B,EAAO91B,KAAKyL,EAAIyoB,MAAMC,IACtB2B,EAAO91B,KAAK,MAEZy/B,IACA3J,EAAO91B,KAAK,gBACZ81B,EAAO91B,KAAKy/B,GACZ3J,EAAO91B,KAAK,MAEZk/B,IACApJ,EAAO91B,KAAK,cACZ81B,EAAO91B,KAAKk/B,GACZpJ,EAAO91B,KAAK,MAEhB81B,EAAO91B,KAAK,OAEhB2+B,IAAK,WACD7I,EAAO91B,KAAK,aAuOxB,OAnOA0+B,GAAOgB,OAAShB,EAAO,YACvBh/B,EAAUA,MACqB,IAApBA,EAAQqa,WACfra,EAAQqa,UAAW,GAgOnB6kB,EAASlf,IACToW,EAASrqB,EAAIgR,OAAO1B,EAAK2E,EAAK2C,YAAYnU,QAAQ,iBAAkB,KAAMxO,GAC1Eq/B,IACOjJ,IAEXzX,EAASqB,GACToW,EAASA,EAAOziB,KAAK,IACrB0rB,IACuD,KAAnDjJ,EAAO5nB,QAAQwtB,EAAM,IAAIxtB,QAAQ0tB,EAAU,IACpC,GAEJ9F,KAGft2B,EAAOsE,GAAUgY,WAAYA,KAC/Bta,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBAAiB,qBAAsBD,IAChD,YACG,SAAU8B,GAgKP,QAAS0+B,GAAkBnwB,EAAOmvB,EAAKxhB,EAAaC,GAApD,GAIQzH,GAcA+J,EACAkgB,EAOAC,CAzBJ,IAAIrwB,GAASmvB,EACT,MAAOvhB,GAAYD,CAGvB,KADIxH,EAAYgpB,EACThpB,GAAaA,EAAUgd,YAAcnjB,GACxCmG,EAAYA,EAAUgd,UAE1B,IAAIhd,EACA,MAAO0c,GAAc1c,GAAawH,CAGtC,KADAxH,EAAYnG,EACLmG,GAAaA,EAAUgd,YAAcgM,GACxChpB,EAAYA,EAAUgd,UAE1B,IAAIhd,EACA,MAAOyH,GAAYiV,EAAc1c,GAAa,CAIlD,KAFI+J,EAAOjU,EAAIguB,eAAejqB,EAAOmvB,GACjCiB,EAAgBpwB,EACbowB,GAAiBA,EAAcjN,YAAcjT,GAChDkgB,EAAgBA,EAAcjN,UAMlC,KAJKiN,IACDA,EAAgBlgB,GAEhBmgB,EAAclB,EACXkB,GAAeA,EAAYlN,YAAcjT,GAC5CmgB,EAAcA,EAAYlN,UAK9B,OAHKkN,KACDA,EAAcngB,GAEdkgB,GAAiBC,EACV,EAEJxN,EAAcwN,GAAexN,EAAcuN,GAEtD,QAASE,GAAerqB,EAAOsqB,GAC3B,QAASC,GAAevqB,GACpB,IACI,MAAOkqB,GAAkBlqB,EAAMgG,eAAgBhG,EAAMyH,aAAczH,EAAM0H,YAAa1H,EAAM2H,WAAa,EAC3G,MAAO6iB,GACL,OAAO,GAGXD,EAAevqB,KACXsqB,GACAtqB,EAAM0G,wBAA0B1G,EAAMyH,aAAezH,EAAMgG,eAC3DhG,EAAM2H,UAAY3H,EAAM0H,cAExB1H,EAAM0G,wBAA0B1G,EAAMgG,eAAiBhG,EAAMyH,aAC7DzH,EAAM0H,YAAc1H,EAAM2H,WAE9B3H,EAAM+F,WAAY,GAG1B,QAAS0kB,GAAsBzqB,GAC3BA,EAAM+F,UAAY/F,EAAMgG,gBAAkBhG,EAAMyH,cAAgBzH,EAAM0H,aAAe1H,EAAM2H,SAE3F,KADA,GAAI+E,GAAO1M,EAAMgG,eACV0G,GAAQA,GAAQ1M,EAAMyH,eAAiBzR,EAAIinB,aAAavQ,EAAM1M,EAAMyH,eACvEiF,EAAOA,EAAKwQ,UAEhBld,GAAM0G,wBAA0BgG,EAiKpC,QAASge,GAAmBC,GACxB,GAAI1qB,GAAO0qB,EAAUC,YAAaC,EAAQF,EAAUC,WAGpD,OAFA3qB,GAAKiB,UAAS,GACd2pB,EAAM3pB,UAAS,GACRlL,EAAIguB,eAAe2G,EAAUG,gBAAiB7qB,EAAK6qB,gBAAiBD,EAAMC,iBAErF,QAASC,GAAeJ,EAAW3qB,EAAOjG,GACtC,GAAyWixB,GAArW9qB,EAAYF,EAAMjG,EAAQ,iBAAmB,gBAAiBoG,EAASH,EAAMjG,EAAQ,cAAgB,aAAckxB,EAAa,EAAGC,EAASnO,EAAW7c,GAAYirB,EAAaD,EAAShrB,EAAYA,EAAUod,WAAWnd,IAAW,KAAMirB,EAAeF,EAAShrB,EAAUgd,WAAahd,EAAW7D,EAAM2D,EAAMme,cAAekN,EAAShvB,EAAIe,KAAKkuB,iBAC5T,IAAtBprB,EAAUa,UAAuC,GAAtBb,EAAUa,WACrCkqB,EAAa9qB,GAEZirB,IACDA,EAAe/uB,EAAIe,MAEoB,OAAvCguB,EAAanL,SAAS7xB,eACtBi9B,EAAOE,kBAAkBH,GACzBC,EAAOnqB,UAAS,GAChBypB,EAAUa,YAAYzxB,EAAQ,eAAiB,aAAcsxB,KAE7DL,EAAaI,EAAax0B,aAAaZ,EAAI8E,OAAOuB,EAAK,KAAM8uB,GAC7DE,EAAOE,kBAAkBP,GACzBh1B,EAAI4E,OAAOowB,GACXK,EAAOtxB,EAAQ,YAAc,WAAW,YAAakxB,GACrDI,EAAOnqB,UAAS,GAChBypB,EAAUa,YAAYzxB,EAAQ,eAAiB,aAAcsxB,IAGrE,QAASI,GAAcd,EAAW3qB,EAAOgkB,EAAgBjqB,GACrD,GAA2IsmB,GAAQ1T,EAAQlK,EAAQqmB,EAAUzoB,EAAM0J,EAAM2hB,EAArLV,EAAah1B,EAAI8E,OAAOkF,EAAMme,cAAe,KAAMkN,EAASV,EAAUC,YAAae,EAAa5xB,EAAQ,eAAiB,aAAmE6xB,GAAW,CAC3MZ,GAAWtyB,UAAY,SACvB2yB,EAAOnqB,SAASnH,GAChB4S,EAAS0e,EAAOP,gBACX90B,EAAImnB,iBAAiB6G,EAAgBrX,KACtCA,EAASqX,EAEb,GACQ4H,GACAjf,EAAO/V,aAAao0B,EAAYA,EAAWlO,kBAE3CnQ,EAAOwW,YAAY6H,GACnBY,GAAW,GAEfP,EAAOE,kBAAkBP,UACnB3K,EAASgL,EAAOQ,iBAAiBF,EAAYhB,IAAc,GAAKK,EAAWlO,gBACrFra,GAASuoB,EAAWle,YACN,IAAVuT,GAAgBtD,EAAWta,IAC3B4oB,EAAOG,YAAYzxB,EAAQ,aAAe,WAAY4wB,GACtD30B,EAAI4E,OAAOowB,GACXjhB,GACItH,EACA4oB,EAAO/lB,KAAKra,UAGhB69B,GAAY/uB,GAASixB,EAAWlO,gBAChCzc,EAAOtG,GAASixB,EAAWle,YACvBiQ,EAAW1c,GACX0J,GACI1J,EACA,GAEG0c,EAAW+L,GAClB/e,GACI+e,EACAA,EAAS79B,SAGbygC,EAAQ9O,EAAcoO,GAElBjhB,EADA4C,EAAOG,aAAe4e,GAAS/e,EAAO2Q,WAAWryB,OAAS,GAEtD0hB,EAAOG,YACP,IAIAH,EACA+e,IAIZ11B,EAAI4E,OAAOowB,IAEfhrB,EAAMjG,EAAQ,WAAa,UAAU8qB,MAAM7kB,EAAO+J,GAjdzD,GAiOO+hB,GAgGAC,EAkJAC,EAoBAC,EASAC,EAuBA1tB,EAmFA2tB,EAoKAC,EACAtmB,EA9vBAlc,EAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQsE,EAASzE,EAAMsC,GAAG6J,OAAQzJ,EAAU1C,EAAMwC,QAAQE,QAAS0J,EAAM3H,EAAO4H,IAAK2mB,EAAgB5mB,EAAI4mB,cAAeG,EAAa/mB,EAAI+mB,WAAYK,EAAsBpnB,EAAIonB,oBAAqBC,EAAgBrnB,EAAIqnB,cAAe5Q,EAAYzW,EAAIyW,UAC7SvF,GACAmlB,oBAAqB,SAAUtgC,GAC3B,MAAM,gBAAkBA,GAGjBA,EAAOkb,eAFH,GAAI8kB,GAAahgC,EAAO+I,WAIvCw3B,mBAAoB,SAAUtsB,GAC1B,GAAIusB,GAAgBzmB,EAAW0mB,kBAAkBxsB,EACjD,OAAOkH,GAAeC,sBAAsBolB,IAEhDplB,sBAAuB,SAAUrS,GAC7B,MAAOoS,GAAemlB,oBAAoBr2B,EAAIsoB,mBAAmBxpB,MAGrE23B,EAAWzgC,EAAMjC,QACjBC,KAAM,SAAUqS,GACZ7Q,EAAEzB,OAAOK,MACL+zB,cAAe9hB,EACf2J,eAAgB3J,EAChBoL,aAAcpL,EACdqK,wBAAyBrK,EACzBqL,YAAa,EACbC,UAAW,EACX5B,WAAW,KAGnB9E,SAAU,SAAUyL,EAAMvM,GACtB/V,KAAK4b,eAAiB0G,EACtBtiB,KAAKsd,YAAcvH,EACnBsqB,EAAsBrgC,MACtBigC,EAAejgC,MAAM,IAEzBsiC,OAAQ,SAAUhgB,EAAMvM,GACpB/V,KAAKqd,aAAeiF,EACpBtiB,KAAKud,UAAYxH,EACjBsqB,EAAsBrgC,MACtBigC,EAAejgC,MAAM,IAEzBuiC,eAAgB,SAAUjgB,GACtBtiB,KAAK6W,SAASyL,EAAKwQ,WAAYN,EAAclQ,KAEjDkgB,cAAe,SAAUlgB,GACrBtiB,KAAK6W,SAASyL,EAAKwQ,WAAYN,EAAclQ,GAAQ,IAEzDmgB,aAAc,SAAUngB,GACpBtiB,KAAKsiC,OAAOhgB,EAAKwQ,WAAYN,EAAclQ,KAE/CogB,YAAa,SAAUpgB,GACnBtiB,KAAKsiC,OAAOhgB,EAAKwQ,WAAYN,EAAclQ,GAAQ,IAEvD/J,WAAY,SAAU+J,GAClBtiB,KAAKuiC,eAAejgB,GACpBtiB,KAAK0iC,YAAYpgB,IAErBqgB,mBAAoB,SAAUrgB,GAC1BtiB,KAAK6W,SAASyL,EAAM,GACpBtiB,KAAKsiC,OAAOhgB,EAAMA,EAAuB,IAAlBA,EAAK3L,SAAiB,aAAe,aAAa9V,SAE7EiW,SAAU,SAAUopB,GAChB,GAAIz0B,GAAOzL,IACPkgC,GACAz0B,EAAK62B,OAAO72B,EAAKmQ,eAAgBnQ,EAAK6R,aAEtC7R,EAAKoL,SAASpL,EAAK4R,aAAc5R,EAAK8R,YAG9CqlB,eAAgB,WACZ,GAAIn3B,GAAOzL,KAAM4V,EAAQnK,EAAKo3B,YAC1Bp3B,GAAKmQ,gBAAkBnQ,EAAK6Q,yBAC5B7Q,EAAK+2B,cAAcxP,EAAoBvnB,EAAK6Q,wBAAyB7Q,EAAKmQ,iBAE9EnQ,EAAKqL,UAAS,GACb,QAASgsB,GAActP,GACpB,KAAOA,EAASvd,QACRud,EAASuP,oBACTD,EAActP,EAASwP,sBAEvBxP,EAAShjB,UAGnB,GAAIkxB,GAAc9rB,KAExB6H,cAAe,WACX,GAAI/S,GAAWgR,EAAW0mB,kBAAkBpiC,KAC5C,OAAO,SAASijC,GAAazP,GAEzB,IADA,GAAIlR,GAAM4gB,EAAOx4B,EAASy4B,yBACnB7gB,EAAOkR,EAASvd,QACnBqM,EAAOA,EAAKgR,WAAWE,EAASuP,qBAC5BvP,EAASuP,qBACTzgB,EAAKyW,YAAYkK,EAAazP,EAASwP,uBAE3CE,EAAKnK,YAAYzW,EAErB,OAAO4gB,IACT,GAAIxB,GAAc1hC,QAExBojC,gBAAiB,WAAA,GAMT14B,GALAe,EAAOzL,KAAM4V,EAAQnK,EAAKo3B,YAM9B,OALIp3B,GAAKmQ,gBAAkBnQ,EAAK6Q,yBAC5B7Q,EAAK+2B,cAAcxP,EAAoBvnB,EAAK6Q,wBAAyB7Q,EAAKmQ,iBAE9EnQ,EAAKqL,UAAS,GACVpM,EAAWgR,EAAW0mB,kBAAkB32B,GACrC,QAAS43B,GAAe7P,GAE3B,IADA,GAAIlR,GAAM4gB,EAAOx4B,EAASy4B,yBACnB7gB,EAAOkR,EAASvd,QACfud,EAASuP,qBACTzgB,EAAOA,EAAKgR,WAAU,GACtBhR,EAAKyW,YAAYsK,EAAe7P,EAASwP,wBAEzCxP,EAAShjB,OAAO/E,EAAK63B,eAEzBJ,EAAKnK,YAAYzW,EAErB,OAAO4gB,IACT,GAAIxB,GAAc9rB,KAExB2tB,WAAY,SAAUjhB,GAClB,GAAI7W,GAAOzL,IACP2yB,GAAWlnB,EAAKmQ,iBACZnQ,EAAK6R,aAAe7R,EAAKmQ,eAAehF,UAAU/V,QAClD+K,EAAIunB,cAAc1nB,EAAKmQ,eAAgBnQ,EAAK6R,aAEhD1R,EAAI6D,YAAY6S,EAAM7W,EAAKmQ,iBAE3BhQ,EAAIksB,SAASrsB,EAAKmQ,eAAgB0G,EAAM7W,EAAK6R,aAEjD7R,EAAKoL,SAASpL,EAAKmQ,eAAgBnQ,EAAK6R,cAE5CulB,WAAY,WACR,MAAOzhC,GAAEzB,OAAO,GAAI0iC,GAASriC,KAAK+zB,gBAC9BnY,eAAgB5b,KAAK4b,eACrByB,aAAcrd,KAAKqd,aACnBf,wBAAyBtc,KAAKsc,wBAC9BgB,YAAatd,KAAKsd,YAClBC,UAAWvd,KAAKud,UAChB5B,UAAW3b,KAAK2b,UAChB2nB,cAAetjC,QAGvBy0B,SAAU,WACN,GAAI+O,GAAgBxjC,KAAK4b,eAAeia,SAAU4N,EAAczjC,KAAKqd,aAAawY,QAClF,QACqB,SAAjB2N,EAA2BxjC,KAAK4b,eAAehF,UAAY4sB,GAC3D,IACAxjC,KAAKsd,YACL,QACe,SAAfmmB,EAAyBzjC,KAAKqd,aAAazG,UAAY6sB,GACvD,IACAzjC,KAAKud,UACL,MAIZ8kB,GAASqB,SAAW,SAAUphB,GAC1B,MAAO,IAAI+f,GAAS/f,EAAKyR,gBAmEzB2N,EAAgB9/B,EAAMjC,QACtBC,KAAM,SAAUgW,GAOZ,GANAxU,EAAEzB,OAAOK,MACL4V,MAAOA,EACP+tB,SAAU,KACVC,MAAO,KACPC,KAAM,QAENjuB,EAAM+F,UAAV,CAGA,GAAIkE,GAAOjK,EAAM0G,uBACjBtc,MAAK4jC,MAAQhuB,EAAMgG,gBAAkBiE,GAAS8S,EAAW/c,EAAMgG,gBAAuEoX,EAAoBnT,EAAMjK,EAAMgG,gBAArFhG,EAAMgG,eAAesX,WAAWtd,EAAM0H,aACvHtd,KAAK6jC,KAAOjuB,EAAMyH,cAAgBwC,GAAS8S,EAAW/c,EAAMyH,cAAiE2V,EAAoBnT,EAAMjK,EAAMyH,cAAcqF,YAA/F9M,EAAMyH,aAAa6V,WAAWtd,EAAM2H,aAEpHumB,QAAS,WACL,QAAS9jC,KAAK4jC,OAElB3tB,KAAM,WACF,GAAIxK,GAAOzL,KAAM+jC,EAAUt4B,EAAKk4B,SAAWl4B,EAAKm4B,KAYhD,OAXAn4B,GAAKm4B,MAAQn4B,EAAKk4B,UAAYl4B,EAAKk4B,SAASjhB,aAAejX,EAAKo4B,KAAOp4B,EAAKk4B,SAASjhB,YAAc,KAC/FiQ,EAAWlnB,EAAKk4B,YACZl4B,EAAKmK,MAAMyH,cAAgB5R,EAAKk4B,WAChCI,EAAUA,EAAQzQ,WAAU,GAC5ByQ,EAAQtQ,WAAWhoB,EAAKmK,MAAM2H,UAAWwmB,EAAQljC,OAAS4K,EAAKmK,MAAM2H,YAErE9R,EAAKmK,MAAMgG,gBAAkBnQ,EAAKk4B,WAClCI,EAAUA,EAAQzQ,WAAU,GAC5ByQ,EAAQtQ,WAAW,EAAGhoB,EAAKmK,MAAM0H,eAGlCymB,GAEXC,SAAU,SAAUC,GAEhB,QAAShuB,KAGL,MAFAxK,GAAKk4B,SAAWl4B,EAAKm4B,MACrBn4B,EAAKm4B,MAAQn4B,EAAKk4B,UAAYl4B,EAAKk4B,SAASjhB,aAAejX,EAAKo4B,KAAOp4B,EAAKk4B,SAASjhB,YAAc,KAC5FjX,EAAKk4B,SAEhB,IANA,GAAiBI,GAAbt4B,EAAOzL,KAMJ+jC,EAAU9tB,KACTxK,EAAKs3B,oBACLt3B,EAAKu3B,qBAAqBgB,SAASC,GAEnCA,EAASF,EAGjB,OAAOA,IAEXvzB,OAAQ,SAAU8yB,GAAV,GACuI3zB,GAAOmvB,EAAK/uB,EAe/IwS,EAEI2hB,EAjBRz4B,EAAOzL,KAAMmkC,EAAmB14B,EAAKmK,MAAMgG,gBAAkBnQ,EAAKk4B,SAAUS,EAAiB34B,EAAKmK,MAAMyH,cAAgB5R,EAAKk4B,QAC7HhR,GAAWlnB,EAAKk4B,YAAcQ,GAAoBC,IAClDz0B,EAAQw0B,EAAmB14B,EAAKmK,MAAM0H,YAAc,EACpDwhB,EAAMsF,EAAiB34B,EAAKmK,MAAM2H,UAAY9R,EAAKk4B,SAAS9iC,OAC5DkP,EAAQ+uB,EAAMnvB,EACV2zB,IAAkBa,GAAoBC,KAClC34B,EAAKk4B,UAAYL,EAAc1nB,gBAA2B0nB,EAAchmB,aAAvB3N,IACjD2zB,EAAchmB,aAAevN,GAE7BtE,EAAKk4B,UAAYL,EAAcjmB,cAAuBimB,EAAc/lB,WAArBuhB,IAC/CwE,EAAc/lB,WAAaxN,IAGnCtE,EAAKk4B,SAASlQ,WAAW9jB,EAAOI,KAE5BwS,EAAS9W,EAAKk4B,SAAS7Q,YACvBwQ,GAAkB73B,EAAKmK,MAAMgG,gBAAkB2G,GAAU9W,EAAKmK,MAAMyH,cAAgBkF,IAChF2hB,EAAY1R,EAAc/mB,EAAKk4B,UAC/BphB,GAAU+gB,EAAc1nB,gBAA+B0nB,EAAchmB,aAA3B4mB,IAC1CZ,EAAchmB,aAAe,GAE7BiF,GAAU+gB,EAAcjmB,cAA4BimB,EAAc/lB,UAA1B2mB,IACxCZ,EAAc/lB,WAAa,IAGnC3R,EAAI4E,OAAO/E,EAAKk4B,YAGxBZ,kBAAmB,WACf,OAAQpQ,EAAW3yB,KAAK2jC,YAAc/3B,EAAImnB,iBAAiB/yB,KAAK2jC,SAAU3jC,KAAK4V,MAAMgG,iBAAmBhQ,EAAImnB,iBAAiB/yB,KAAK2jC,SAAU3jC,KAAK4V,MAAMyH,gBAE3J2lB,mBAAoB,WAChB,MAAO,IAAItB,GAAc1hC,KAAKqkC,gBAElCA,YAAa,WACT,GAAI54B,GAAOzL,KAAMskC,EAAW74B,EAAKmK,MAAMitB,YAQvC,OAPAyB,GAAS3B,mBAAmBl3B,EAAKk4B,UAC7B/3B,EAAImnB,iBAAiBtnB,EAAKk4B,SAAUl4B,EAAKmK,MAAMgG,iBAC/C0oB,EAASztB,SAASpL,EAAKmK,MAAMgG,eAAgBnQ,EAAKmK,MAAM0H,aAExD1R,EAAImnB,iBAAiBtnB,EAAKk4B,SAAUl4B,EAAKmK,MAAMyH,eAC/CinB,EAAShC,OAAO72B,EAAKmK,MAAMyH,aAAc5R,EAAKmK,MAAM2H,WAEjD+mB,KAGX3C,EAAe//B,EAAMjC,QACrBC,KAAM,SAAUqS,GACZjS,KAAK+zB,cAAgB9hB,EACrBjS,KAAKmd,WAAa,GAEtBD,SAAU,SAAUtH,GAChB,GAAI2qB,GAAYvgC,KAAK+zB,cAAc/gB,KAAKkuB,iBACxCP,GAAeJ,EAAW3qB,GAAO,GACjC+qB,EAAeJ,EAAW3qB,GAAO,GACjC2qB,EAAUgE,UAEdtnB,gBAAiB,WACb,GAAID,GAAYhd,KAAK+zB,cAAc/W,SACb,SAAlBA,EAAUzR,MACVyR,EAAU8E,SAGlB1E,WAAY,WAAA,GACJmjB,GAA+Fp1B,EAASyuB,EAyBpGhe,EAAuCyB,EAAmCrK,EAEtEwxB,EAAoBC,EA3BjB7uB,EAAQ,GAAIysB,GAASriC,KAAK+zB,eAAgB/W,EAAYhd,KAAK+zB,cAAc/W,SACxF,KAGI,GAFAujB,EAAYvjB,EAAU1E,cACtBnN,EAAUo1B,EAAUmE,KAAOnE,EAAUmE,KAAK,GAAKnE,EAAUG,gBACrDv1B,EAAQ4oB,eAAiB/zB,KAAK+zB,cAC9B,MAAOne,GAEb,MAAOwqB,GACL,MAAOxqB,GAEX,GAAsB,WAAlBoH,EAAUzR,KACVqK,EAAM2C,WAAWgoB,EAAUmE,KAAK,QAehC,IAbA9K,EAAiB0G,EAAmBC,GACpCc,EAAcd,EAAW3qB,EAAOgkB,GAAgB,GAChDyH,EAAcd,EAAW3qB,EAAOgkB,GAAgB,GACX,GAAjChkB,EAAMgG,eAAejF,UACrBf,EAAMiB,SAASjB,EAAMyH,aAAczH,EAAM0H,aAEV,GAA/B1H,EAAMyH,aAAa1G,UACnBf,EAAM0sB,OAAO1sB,EAAMgG,eAAgBhG,EAAM2H,WAEe,IAAxDgjB,EAAUkB,iBAAiB,aAAclB,IACzC3qB,EAAMkB,UAAS,GAEf8E,EAAiBhG,EAAMgG,eAAgByB,EAAezH,EAAMyH,aAAcrK,EAAOhT,KAAK+zB,cAAc/gB,OACnG4C,EAAM+F,WAAmC,IAAtB/F,EAAM0H,aAAqB1H,EAAM2H,WAAa0V,EAAcrd,EAAMyH,eAAmBzB,GAAkByB,GAAgBsV,EAAW/W,IAAmBA,EAAekX,YAAc9f,GAAO,CAE7M,IADIwxB,GAAa,EAAOC,GAAW,EACM,IAAlCjS,EAAc5W,IAAyBA,GAAkBA,EAAekX,WAAWtQ,YAAc5G,GAAkB5I,GACtH4I,EAAiBA,EAAekX,WAChC0R,GAAa,CAEjB,MAAOhS,EAAcnV,IAAiB4V,EAAc5V,EAAayV,YAAc,GAAKzV,GAAgBA,EAAayV,WAAWoD,WAAa7Y,GAAgBrK,GACrJqK,EAAeA,EAAayV,WAC5B2R,GAAW,CAEX7oB,IAAkB5I,GAAQqK,GAAgBrK,GAAQwxB,GAAcC,IAChE7uB,EAAMiB,SAAS+E,EAAgB,GAC/BhG,EAAM0sB,OAAOjlB,EAAc4V,EAAcjgB,KAIrD,MAAO4C,MAsFXgsB,EAAkBhgC,EAAMjC,QACxBC,KAAM,SAAUgW,GACZ5V,KAAK2kC,UAAY,WAEb,QAASC,GAAMtiB,GACX,GAAI1W,EAAIsN,GAAGoJ,EAAM,QAA2B,GAAjBA,EAAK3L,YAAmB/K,EAAIwqB,aAAa9T,IAA2B,UAAlBA,EAAK1L,WAC9EiI,EAAM1e,KAAKmiB,OAGX,KADAA,EAAOA,EAAKE,WACLF,GACHsiB,EAAMtiB,GACNA,EAAOA,EAAKI,YARxB,GAAI7D,KAaJ,OADA,IAAI6iB,GAAc9rB,GAAOouB,SAASY,GAC3B/lB,MAIfgjB,EAA0BH,EAAc/hC,QACxCojC,kBAAmB,WACf,GAAIxG,GAAYt4B,EAAOqV,YAAcrV,EAAOqV,WAAWijB,SACvD,OAAOA,KAAcA,EAAUv8B,KAAK2jC,WAAajC,EAAc5hC,GAAGijC,kBAAkBhjC,KAAKC,OAE7FgjC,mBAAoB,WAChB,MAAO,IAAInB,GAAwB7hC,KAAKqkC,kBAG5CvC,EAA4BlgC,EAAMjC,QAClCC,KAAM,SAAUgW,GACZ5V,KAAK2kC,UAAY,WAGb,QAASC,GAAMtiB,GACX,GAAIia,IAAcA,EAAUja,GACxB,GAAI1W,EAAIsN,GAAGoJ,EAAM,QAA2B,GAAjBA,EAAK3L,YAAmB/K,EAAIwqB,aAAa9T,IAA2B,UAAlBA,EAAK1L,WAC9EiI,EAAM1e,KAAKmiB,OAGX,KADAA,EAAOA,EAAKE,WACLF,GACHsiB,EAAMtiB,GACNA,EAAOA,EAAKI,YAXf,GACT7D,MACA0d,EAAYt4B,EAAOqV,YAAcrV,EAAOqV,WAAWijB,SAevD,OADA,IAAIsF,GAAwBjsB,GAAOouB,SAASY,GACrC/lB,MAIfzK,EAAexS,EAAMjC,QACrBC,KAAM,SAAUgW,EAAO5C,EAAMnT,GACzB,GAAI4L,GAAOzL,IACXyL,GAAKmK,MAAQA,EACbnK,EAAKo5B,SAAWnpB,EAAW0mB,kBAAkBxsB,GAC7CnK,EAAKuH,KAAOA,GAAQvH,EAAKq5B,YAAYlvB,GACV,QAAvBhK,EAAItI,KAAKmI,EAAKuH,QACdvH,EAAKo5B,SAAWp5B,EAAKuH,MAEzBvH,EAAKmQ,eAAiBnQ,EAAKs5B,WAAWnvB,EAAMgG,gBAC5CnQ,EAAK4R,aAAe5R,EAAKs5B,WAAWnvB,EAAMyH,cAC1C5R,EAAK6R,YAAc7R,EAAKsK,OAAOH,EAAMgG,eAAgBhG,EAAM0H,aAC3D7R,EAAK8R,UAAY9R,EAAKsK,OAAOH,EAAMyH,aAAczH,EAAM2H,WACvD9R,EAAK4N,WAAaxZ,GAAWA,EAAQwZ,WACjC5N,EAAK4N,aACL5N,EAAKu5B,qBAAuB/gC,EAAOqV,WAAW2rB,iBAAiBx5B,EAAKuH,OAExEvH,EAAKsQ,KAAOtQ,EAAKuH,KAAK1E,UAClB7C,EAAK4N,aAAe5N,EAAKu5B,qBAAqBljB,OAC9C7d,EAAOqV,WAAW4rB,kBAAkBz5B,EAAKuH,KAAMvH,EAAKu5B,uBAG5D1D,MAAO,SAAUhf,GAEb,IAFG,GAGK3L,GAFJsf,EAAS,EAAGkP,EAAW7iB,EAAK3L,SACzB2L,EAAOA,EAAKoQ,iBACX/b,EAAW2L,EAAK3L,SACJ,GAAZA,GAAiBwuB,GAAYxuB,GAC7Bsf,IAEJkP,EAAWxuB,CAEf,OAAOsf,IAEX6O,YAAa,SAAUlvB,GAEnB,IADA,GAAIiK,GAAOjK,EAAM0G,wBACVuD,IAA0B,GAAjBA,EAAKlJ,UAAiBkJ,EAAK8T,cAAgB9T,EAAK8T,WAAW/oB,iBAA8E,SAA3DiV,EAAK8T,WAAW/oB,gBAAgBgM,UAAU5S,iBACpI6b,EAAOA,EAAKiT,UAEhB,OAAOjT,IAEXulB,YAAa,WACT,GAAI35B,GAAOzL,IACXyL,GAAKuH,KAAK1E,UAAY7C,EAAKsQ,KACvBtQ,EAAK4N,aAAe5N,EAAKu5B,qBAAqBljB,OAC9C7d,EAAOqV,WAAW4rB,kBAAkBz5B,EAAKuH,KAAMvH,EAAKu5B,uBAG5DjvB,OAAQ,SAAUuM,EAAMlX,GACpB,GAAqB,GAAjBkX,EAAK3L,SACL,MAAQ2L,EAAOA,EAAKoQ,kBAAqC,GAAjBpQ,EAAK3L,UACzCvL,GAASkX,EAAK1L,UAAU/V,MAGhC,OAAOuK,IAEX25B,WAAY,SAAUziB,GAElB,IADA,GAAI+iB,MACG/iB,GAAQtiB,KAAK6kC,UAChBQ,EAAKllC,KAAKH,KAAKshC,MAAMhf,IACrBA,EAAOA,EAAKwQ,UAEhB,OAAOuS,IAEXC,aAAc,SAAU1vB,EAAOjG,EAAO01B,EAAME,GAExC,IADA,GAAIjjB,GAAOtiB,KAAK6kC,SAAUhkC,EAASwkC,EAAKxkC,OAAQkV,EAASwvB,EAClD1kC,KACHyhB,EAAOA,EAAK4Q,WAAWmS,EAAKxkC,GAEhC,MAAOyhB,GAAyB,GAAjBA,EAAK3L,UAAyCZ,EAAxBuM,EAAK1L,UAAU/V,QAChDkV,GAAUuM,EAAK1L,UAAU/V,OACzByhB,EAAOA,EAAKI,WAEZJ,IAAQvM,GAAU,GAClBH,EAAMjG,EAAQ,WAAa,UAAU2S,EAAMvM,IAGnD4G,QAAS,WACL,GAAIlR,GAAOzL,KAAMi2B,EAASxqB,EAAKmK,MAAMitB,YAGrC,OAFAp3B,GAAK65B,aAAarP,GAAQ,EAAMxqB,EAAKmQ,eAAgBnQ,EAAK6R,aAC1D7R,EAAK65B,aAAarP,GAAQ,EAAOxqB,EAAK4R,aAAc5R,EAAK8R,WAClD0Y,KAGX8L,EAASngC,EAAMjC,QACfC,KAAM,WACFI,KAAKwlC,MAAQ,MAEjBC,SAAU,SAAU7vB,GAAV,GACFnK,GAAOzL,KACPwlC,EAAQ/5B,EAAK+5B,MAAQ55B,EAAI8E,OAAOgL,EAAW0mB,kBAAkBxsB,GAAQ,QAAUwf,UAAW,YAK9F,OAJAxf,GAAM2tB,WAAWiC,GACjB55B,EAAIqpB,aAAauQ,EAAM9S,iBACvB9mB,EAAIqpB,aAAauQ,EAAM9iB,aACvB9M,EAAM2C,WAAWitB,GACVA,GAEXE,YAAa,SAAU9vB,GAAV,GAKLE,GACA6vB,EAGArjB,EAIIsjB,EAZJn6B,EAAOzL,KAAM0+B,EAAWjzB,EAAK+5B,MAAM9S,gBAAiBpV,EAAc,CAClEohB,KACAphB,EAAcqV,EAAW+L,GAAYA,EAAS9nB,UAAU/V,OAAS2xB,EAAckM,IAE/E5oB,EAAYrK,EAAK+5B,MAAM1S,WACvB6S,EAAiBjH,EAAWlM,EAAckM,GAAY,EAC1D9yB,EAAI4E,OAAO/E,EAAK+5B,OAChBnjB,EAAUvM,GACNwM,EAAOxM,EAAUod,WAAWyS,GAC5BhT,EAAWrQ,GACX1M,EAAMiB,SAASyL,EAAMhF,GACdgF,GACHsjB,EAAWh6B,EAAIoqB,aAAa1T,GAC5BsjB,EACAhwB,EAAMiB,SAAS+uB,EAAUA,EAAShvB,UAAU/V,QAE5C+U,EAAM8oB,EAAW,gBAAkB,kBAAkBpc,KAGpDpgB,EAAQkR,MAAS0C,EAAUxH,YAC5BwH,EAAUxH,UAAY,wBAE1BsH,EAAM+sB,mBAAmB7sB,IAE7BF,EAAMkB,UAAS,IAEnB+uB,IAAK,SAAUjwB,EAAOkwB,GAAjB,GAQGC,GAUI9kB,EAjBJxV,EAAOzL,KACP2b,EAAY/F,EAAM+F,YAAcD,EAAWsqB,aAAapwB,GACxD3D,EAAMyJ,EAAW0mB,kBAAkBxsB,EAsBvC,OArBIkwB,IAAUlwB,EAAM+F,YAChBlQ,EAAKg6B,SAAS7vB,GACdA,EAAQ8F,EAAWoqB,OAAOlwB,IAE1BmwB,EAAgBnwB,EAAMitB,aAC1BkD,EAAcjvB,UAAS,GACvBrL,EAAKqzB,IAAMlzB,EAAI8E,OAAOuB,EAAK,QAAUmjB,UAAW,aAChD2Q,EAAcxC,WAAW93B,EAAKqzB,KAC9BiH,EAAgBnwB,EAAMitB,aACtBkD,EAAcjvB,UAAS,GACvBrL,EAAKkE,MAAQlE,EAAKqzB,IAAIxL,WAAU,GAChCyS,EAAcxC,WAAW93B,EAAKkE,OAC9BlE,EAAKw6B,mBAAmBx6B,EAAKkE,MAAOlE,EAAKqzB,KACrCnjB,IACIsF,EAAMhP,EAAIi0B,eAAe,UAC7Bt6B,EAAI6D,YAAYwR,EAAIqS,YAAa7nB,EAAKkE,OACtC/D,EAAIY,aAAayU,EAAKxV,EAAKqzB,MAE/Bzc,EAAUzM,EAAM0G,yBAChB1G,EAAM2sB,eAAe92B,EAAKkE,OAC1BiG,EAAM8sB,YAAYj3B,EAAKqzB,KAChBlpB,GAEXqwB,mBAAoB,SAAUt2B,EAAOmvB,GAC7BnvB,EAAM+iB,iBAAsD,UAAnC/iB,EAAM+iB,gBAAgB9b,WAC/ChL,EAAI4E,OAAOb,EAAM+iB,iBAEjBoM,EAAIpc,aAA4C,UAA7Boc,EAAIpc,YAAY9L,WACnChL,EAAI4E,OAAOsuB,EAAIpc,cAGvByjB,iBAAkB,SAAU7jB,GAGxB,IAHc,GACVgf,GAAQ9O,EAAclQ,GACtB8jB,EAAU9jB,EACP8jB,EAAQ1T,iBACa,GAApB0T,EAAQzvB,UAAqD,GAApCyvB,EAAQ1T,gBAAgB/b,UACjD2qB,IAEJ8E,EAAUA,EAAQ1T,eAEtB,OAAO4O,IAEX9wB,OAAQ,SAAUoF,GAAV,GACiDywB,GAAsBC,EAAoBC,EAa3F5qB,EACA6qB,EAaAlpB,EACAC,EAaAkpB,EACAC,EACAC,EACAC,EA5CAn7B,EAAOzL,KAAM2P,EAAQlE,EAAKkE,MAAOmvB,EAAMrzB,EAAKqzB,GAEhD,KADAzc,EAAUzM,EAAM0G,0BACR3M,EAAM+S,aAAe/S,EAAMmjB,YAC/BnjB,EAAQA,EAAMmjB,UAElB,OAAQgM,EAAIpM,iBAAmBoM,EAAIhM,YAC/BgM,EAAMA,EAAIhM,UAgBd,IAdAuT,EAAuB12B,EAAM+iB,iBAAqD,GAAlC/iB,EAAM+iB,gBAAgB/b,UAAkBhH,EAAM+S,aAA6C,GAA9B/S,EAAM+S,YAAY/L,SAC/H2vB,EAAqBxH,EAAIpM,iBAAmD,GAAhCoM,EAAIpM,gBAAgB/b,UAAkBmoB,EAAIpc,aAA2C,GAA5Boc,EAAIpc,YAAY/L,SACrH4vB,EAAkBF,GAAwBC,EAC1C32B,EAAQA,EAAM+S,YACdoc,EAAMA,EAAIpM,gBACN/W,GAAY,EACZ6qB,GAAmB,EACnB72B,GAASlE,EAAKqzB,MACd0H,IAAqB/6B,EAAKkE,MAAM+iB,gBAChC/iB,EAAQmvB,EAAMrzB,EAAKkE,MAAM+iB,iBAAmBjnB,EAAKqzB,IAAIpc,YACrD/G,GAAY,GAEhB/P,EAAI4E,OAAO/E,EAAKkE,OAChB/D,EAAI4E,OAAO/E,EAAKqzB,MACXnvB,IAAUmvB,EAGX,MAFAlpB,GAAM+sB,mBAAmB/sB,EAAM0G,6BAC/B1G,GAAMkB,UAAS,EAKnB,IAFIwG,EAAc3B,EAAYgX,EAAWhjB,GAASA,EAAMiH,UAAU/V,OAAS8O,EAAMujB,WAAWryB,OAAS,EACjG0c,EAAYoV,EAAWmM,GAAOA,EAAIloB,UAAU/V,OAASi+B,EAAI5L,WAAWryB,OAClD,GAAlB8O,EAAMgH,SACN,KAAOhH,EAAM+iB,iBAAqD,GAAlC/iB,EAAM+iB,gBAAgB/b,UAClDhH,EAAQA,EAAM+iB,gBACdpV,GAAe3N,EAAMiH,UAAU/V,MAGvC,IAAoB,GAAhBi+B,EAAInoB,SACJ,KAAOmoB,EAAIpM,iBAAmD,GAAhCoM,EAAIpM,gBAAgB/b,UAC9CmoB,EAAMA,EAAIpM,gBACVnV,GAAauhB,EAAIloB,UAAU/V,MAG/B4lC,GAAc92B,EAAMmjB,WACpB4T,EAAY5H,EAAIhM,WAChB6T,EAAa3mC,KAAKmmC,iBAAiBx2B,GACnCi3B,EAAW5mC,KAAKmmC,iBAAiBrH,GACrCzc,EAAUokB,GACY,GAAlB92B,EAAMgH,WACNhH,EAAQ82B,EAAYvT,WAAWyT,IAEnCtkB,EAAUqkB,GACU,GAAhB5H,EAAInoB,WACJmoB,EAAM4H,EAAUxT,WAAW0T,IAE3BjrB,GACsB,GAAlBhM,EAAMgH,SACNf,EAAMiB,SAASlH,EAAO2N,GAEtB1H,EAAM4wB,EAAmB,gBAAkB,kBAAkB72B,GAEjEiG,EAAMkB,UAAS,KAEO,GAAlBnH,EAAMgH,SACNf,EAAMiB,SAASlH,EAAO2N,GAEtB1H,EAAM2sB,eAAe5yB,GAEL,GAAhBmvB,EAAInoB,SACJf,EAAM0sB,OAAOxD,EAAKvhB,GAElB3H,EAAM8sB,YAAY5D,IAGtBrzB,EAAK+5B,OACL/5B,EAAKi6B,YAAY9vB,MAIzBosB,EAAW,2DACXtmB,GACAmD,MAAO,SAAUjJ,GACb,GAAIiJ,GAAQnD,EAAWF,UAAU5F,EAQjC,OAPKiJ,GAAMhe,SACP+U,EAAM+sB,mBAAmB/sB,EAAM0G,yBAC/BuC,EAAQnD,EAAWF,UAAU5F,GACxBiJ,EAAMhe,SACPge,EAAQjT,EAAIkqB,sBAAsBlgB,EAAM0G,2BAGzCuC,GAEXrD,UAAW,SAAU5F,GACjB,MAAO,IAAIgsB,GAAgBhsB,GAAO+uB,aAEtCkC,kBAAmB,SAAUjxB,GACzB,GAAIiJ,MAAYioB,EAAkB7iC,EAAOqV,YAAcrV,EAAOqV,WAAWwtB,eAIzE,OAHIA,KAAoBA,EAAgBlxB,EAAM0G,2BAC1CuC,EAAQ,GAAIijB,GAA0BlsB,GAAO+uB,aAE1C9lB,GAEXujB,kBAAmB,SAAUxsB,GACzB,GAAIgG,GAAiBhG,EAAMgG,cAC3B,OAAkC,IAA3BA,EAAejF,SAAgBiF,EAAiBA,EAAemY,eAE1Ezb,YAAa,SAAU5N,GACnB,MAAIxI,GAAQkR,MAA0B,EAAlBlR,EAAQ6c,QACjB,GAAIsjB,GAAS33B,GAEjBA,EAAS4N,eAEpBvB,YAAa,SAAUnB,GAAV,GAMLoH,GALA+pB,EAAQrrB,EAAWqrB,MAAMnxB,EACzBmxB,KACAnxB,EAAM4sB,cAAcuE,GACpBnxB,EAAM8sB,YAAYqE,IAElB/pB,EAAYF,EAAeolB,mBAAmBtsB,GAClDoH,EAAUC,kBACVD,EAAUE,SAAStH,IAEvBoxB,UAAW,SAAUpxB,GACjB,MAAOpW,GAAM+D,OAAO,oBAAqBqI,EAAItI,KAAKsS,EAAMgG,gBAAiBhG,EAAM0H,YAAa1R,EAAItI,KAAKsS,EAAMyH,cAAezH,EAAM2H,YAEpIzI,MAAO,SAAUc,EAAO0M,EAAMnU,GAC1B,QAAS84B,GAAUt3B,GAAnB,GAIQu3B,GAHAC,EAAiBvxB,EAAMitB,YAC3BsE,GAAerwB,SAASnH,GACxBw3B,EAAex3B,EAAQ,iBAAmB,eAAe2S,GACrD4kB,EAAWC,EAAe/D,kBAC1Bj1B,IACA+4B,EAAWt7B,EAAIuC,KAAK+4B,IAExBt7B,EAAI+D,EAAQ,eAAiB,eAAeu3B,EAAU5kB,GAE1D2kB,GAAU,GACVA,GAAU,IAEdG,OAAQ,SAAUxxB,EAAOtC,GACrB,GAAIuL,KAOJ,OANA,IAAI6iB,GAAc9rB,GAAOouB,SAAS,SAAU1hB,GACxC,GAAI+kB,GAAS/zB,EAAIgP,EACb+kB,IAAUjmC,EAAEqC,QAAQ4jC,EAAQxoB,GAAS,GACrCA,EAAM1e,KAAKknC,KAGZxoB,GAEXyoB,OAAQ,SAAU1xB,EAAO2xB,GACrB,GAAIC,GAAWD,CAMf,OALwB,gBAAbA,KACPA,EAAY,SAAUjlB,GAClB,MAAO1W,GAAIsN,GAAGoJ,EAAMklB,KAGrB9rB,EAAW0rB,OAAOxxB,EAAO,SAAU0M,GACtC,MAAIilB,GAAUjlB,GACHA,EADX,UAKRmlB,WAAY,SAAU7xB,GAClB,MAAO8F,GAAW4rB,OAAO1xB,EAAO,SAAU0M,GACtC,MAAyB,YAAlBA,EAAK8S,aAGpB2R,MAAO,SAAUnxB,GACb,GAAIiJ,GAAQnD,EAAW4rB,OAAO1xB,EAAO,MACrC,OAAoB,IAAhBiJ,EAAMhe,OACCge,EAAM,GADjB,QAIJ6oB,UAAW,SAAUpE,EAAehhB,GAAzB,GAIH1M,GAEI0rB,EACA/e,CANR,IAAkC,IAA9B+gB,EAAchmB,YACd,OAAO,CAGX,KADI1H,EAAQ0tB,EAAcT,aACG,IAAtBjtB,EAAM0H,aAAqB1H,EAAMgG,gBAAkB0G,GAAM,CAG5D,IAFIgf,EAAQ11B,EAAI4mB,cAAc5c,EAAMgG,gBAChC2G,EAAS3M,EAAMgG,eAAekX,WAC3BwO,EAAQ,GAAK/e,EAAO+e,EAAQ,IAAM11B,EAAIupB,cAAc5S,EAAO+e,EAAQ,KACtEA,GAEJ1rB,GAAMiB,SAAS0L,EAAQ+e,GAE3B,MAA6B,KAAtB1rB,EAAM0H,aAAqB1H,EAAMgG,gBAAkB0G,GAE9DqlB,QAAS,SAAUrE,EAAehhB,GAU9B,QAASsiB,GAAMtiB,GACN1W,EAAIupB,cAAc7S,IACnBzD,EAAM1e,KAAKmiB,GAZd,GAGD3S,GAMAkP,EARAjJ,EAAQ0tB,EAAcT,YAe1B,OAdAjtB,GAAMkB,UAAS,GACXnH,EAAQiG,EAAMgG,eACdhQ,EAAI+mB,WAAWhjB,IAAUiG,EAAM0H,aAAe1R,EAAIqnB,cAActjB,KAChEiG,EAAMiB,SAASlH,EAAMmjB,WAAYlnB,EAAI4mB,cAAc7iB,GAAS,GAC5DiG,EAAMkB,UAAS,IAEnBlB,EAAM0sB,OAAOhgB,EAAM1W,EAAIqnB,cAAc3Q,IACjCzD,KAMJ,GAAI6iB,GAAc9rB,GAAOouB,SAASY,IAC1B/lB,EAAMhe,QAElB+mC,qBAAsB,SAAUhyB,GAM5B,QAASiyB,GAAM9xB,EAAQD,GAAvB,GAKatS,GAJL3C,EAAS+K,EAAIqnB,cAAcnd,EAC/B,IAAIC,GAAUlV,EACV,OAAO,CAEX,KAAS2C,EAAIuS,EAAYlV,EAAJ2C,EAAYA,IAC7B,IAAKoI,EAAIupB,cAAcrf,EAAUod,WAAW1vB,IACxC,OAAO,CAGf,QAAO,EAbX,IAHkB,GACdskC,GAAgBl8B,EAAIotB,eAAepjB,EAAMgG,gBACzCmsB,EAAcn8B,EAAIotB,eAAepjB,EAAMyH,cACd,IAAtBzH,EAAM0H,aAAqB1H,EAAMgG,gBAAkBksB,GACtDlyB,EAAMiB,SAASjB,EAAMgG,eAAekX,WAAYlnB,EAAI4mB,cAAc5c,EAAMgG,gBAc5E,MAAOisB,EAAMjyB,EAAM2H,UAAW3H,EAAMyH,eAAiBzH,EAAMyH,cAAgB0qB,GACvEnyB,EAAM0sB,OAAO1sB,EAAMyH,aAAayV,WAAYlnB,EAAI4mB,cAAc5c,EAAMyH,cAAgB,EAExF,OAAOzH,IAEXkwB,OAAQ,SAAUlwB,GAAV,GAOAoyB,GACAC,EAIA3qB,EACAC,EAZA0Y,EAASrgB,EAAMitB,aACfjnB,EAAiBqa,EAAOra,eAAesX,WAAkC,IAAvB+C,EAAO3Y,YAAoB,EAAI2Y,EAAO3Y,YAAc,GACtGD,EAAe4Y,EAAO5Y,aAAa6V,WAAW+C,EAAO1Y,UACzD,OAAKoV,GAAW/W,IAAoB+W,EAAWtV,IAG3C2qB,EAAcpsB,EAAehF,UAC7BqxB,EAAa5qB,EAAazG,UACzBoxB,GAAgBC,GAGjB3qB,EAAc0qB,EAAYlzB,MAAM,IAAIulB,UAAU7mB,KAAK,IAAI00B,OAAOlG,GAC9DzkB,EAAY0qB,EAAWC,OAAOlG,GAC7B1kB,GAAgBC,GAGrBA,EAAyB,IAAbA,EAAkB0qB,EAAWpnC,OAAS0c,EAClDD,EAA6B,IAAfA,EAAoB,EAAI0qB,EAAYnnC,OAASyc,EAC3D2Y,EAAOpf,SAAS+E,EAAgB0B,GAChC2Y,EAAOqM,OAAOjlB,EAAcE,GACrB0Y,GANIA,GALAA,GALAA,GAkBf+P,aAAc,SAAUpwB,GAAV,GAMNqgB,GACA7qB,EAIA48B,EACAC,EACA3qB,EAAiBC,EAZjB+E,EAAO1M,EAAMgG,eACbumB,EAAgBzmB,EAAW0mB,kBAAkBxsB,EACjD,OAAI0M,IAAQ6f,GAAiB7f,GAAQ6f,EAAcnvB,MACxC,GAEPijB,EAASrgB,EAAMitB,cACfz3B,EAAQkX,EAAK1L,YAIboxB,EAAc58B,EAAM+8B,UAAU,EAAGlS,EAAO3Y,aACxC2qB,EAAa78B,EAAM+8B,UAAUlS,EAAO3Y,aACpCA,EAAc,EAAGC,EAAY,EAC7ByqB,IACA1qB,EAAc0qB,EAAYlzB,MAAM,IAAIulB,UAAU7mB,KAAK,IAAI00B,OAAOlG,IAE9DiG,IACA1qB,EAAY0qB,EAAWC,OAAOlG,IAE3B1kB,GAAeC,IAXX,KAcnB5d,EAAOsE,GACH6Y,eAAgBA,EAChBulB,SAAUA,EACVX,cAAeA,EACfC,aAAcA,EACdC,gBAAiBA,EACjBxtB,aAAcA,EACd2tB,OAAQA,EACRrmB,WAAYA,KAElB/Z,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,gBAAiBD,IAC5C,YACG,SAAU8B,GAEP,QAASgnC,GAAaz8B,EAAQ08B,GAA9B,GACQC,GAAkB38B,EAAOyQ,sBAAwB,GAAIhI,GAAazI,EAAO0I,WAAY1I,EAAOqH,MAC5F5S,EAAU,GAAImoC,GAAeF,EAAmBC,EAGpD,OAFAloC,GAAQuL,OAASA,EACjBA,EAAOqC,cAAc7N,KAAKC,GACnBkoC,EAEX,QAASE,GAASlmB,EAAM1M,GACpB,MAAOA,GAAMgG,iBAAmB0G,GAAQ1M,EAAMyH,eAAiBiF,GAA8B,IAAtB1M,EAAM0H,aAAqB1H,EAAM2H,WAAa+E,EAAK4Q,WAAWryB,OAV5I,GACOrB,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAO8J,EAAWlM,EAAMsC,GAAG6J,OAAQ9I,EAAc6I,EAAS7I,YAAa6Y,EAAahQ,EAASgQ,WAAY/X,EAAed,EAAYc,aAAciI,EAAMF,EAASG,IAAKvK,EAAOoK,EAASpK,KAAMmB,EAAeiJ,EAASjJ,aAAc2R,EAAe1I,EAAS0I,aAAc2tB,EAASr2B,EAASq2B,OAAQ7/B,EAAU1C,EAAMwC,QAAQE,QAASq5B,EAAK,oBAAqB57B,EAASyB,EAAEzB,OAW5Y8oC,EAAU7mC,EAAMjC,QAChBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACfG,KAAK0oC,aAAe,GAAIt0B,GAAavU,EAAQ+V,MAAO/V,EAAQmT,MAAQqG,WAAYxZ,EAAQwZ,aACxFrZ,KAAK2oC,OAAS,GAAI5G,GAClB/hC,KAAK4e,UAAY/e,EAAQ+e,WAE7BvK,SAAU,WACN,MAAOrU,MAAK0oC,aAAa/rB,WAE7BisB,UAAW,SAAU9C,GACjB,MAAO9lC,MAAK2oC,OAAO9C,IAAI7lC,KAAKqU,WAAYyxB,IAE5C+C,aAAc,SAAUjzB;AACpB5V,KAAK2oC,OAAOn4B,OAAOoF,GACnB5V,KAAK2L,OAAOoL,YAAYnB,IAE5BpV,KAAM,WACF,GAAIsoC,GAAQ9oC,KAAK0oC,YACjBI,GAAM1D,cACNplC,KAAK2L,OAAOoL,YAAY+xB,EAAMnsB,YAElChc,KAAM,WACFX,KAAKmX,QAET4xB,aAAc,SAAUv5B,EAAS3P,GAC7B,GAAI8L,GAAS3L,KAAK2L,MAClB,OAAOvK,GAAEoO,GAASmC,SAASjH,SAASsI,MAAMg2B,YAAYrpC,KAAWgM,EAAO9L,QAAQ+a,cAAe/a,IAAUmM,QAAQ,aAAa8S,YAAY,QAAStf,EAAMwC,QAAQmR,MAAMxH,EAAOQ,UAAU2yB,OAE5L3nB,KAAM,WACF,GAAIvB,GAAQ5V,KAAK4oC,WAAU,EAC3B5oC,MAAK4e,UAAUjT,OAAS3L,KAAK2L,OAC7B3L,KAAK4e,UAAUqqB,OAAOrzB,GACtB5V,KAAK6oC,aAAajzB,IAEtByD,WAAY,WACR,MAAOrZ,MAAK2L,QAAU3L,KAAK2L,OAAO9L,QAAQwZ,YAE9C6vB,mBAAoB,SAAUtzB,GACtB5V,KAAKqZ,eACL7Z,EAAMsC,GAAG6J,OAAO2N,WAAW4vB,mBAAmBtzB,GAC9C5V,KAAK0oC,aAAe,GAAIt0B,GAAawB,EAAO5V,KAAK2L,OAAOqH,UAIhEu1B,EAAiB3mC,EAAMjC,QACvBC,KAAM,SAAUyoC,EAAmBC,GAC/BtoC,KAAKgT,KAAOq1B,EAAkBr1B,KAC9BhT,KAAKqoC,kBAAoBA,EACzBroC,KAAKsoC,gBAAkBA,GAE3B3nC,KAAM,WACFX,KAAKgT,KAAK1E,UAAYtO,KAAKsoC,gBAAgBvsB,KAC3C/b,KAAK2L,OAAOoL,YAAY/W,KAAKsoC,gBAAgB3rB,YAEjDnc,KAAM,WACFR,KAAKgT,KAAK1E,UAAYtO,KAAKqoC,kBAAkBtsB,KAC7C/b,KAAK2L,OAAOoL,YAAY/W,KAAKqoC,kBAAkB1rB,cAGnDgB,EAAoB8qB,EAAQ9oC,QAC5BC,KAAM,SAAUC,GACZ4oC,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAKge,iBAAkB,GAE3B7G,KAAM,WAAA,GAYEgyB,GAXAx9B,EAAS3L,KAAK2L,OACd9L,EAAUG,KAAKH,QACf+V,EAAQ/V,EAAQ+V,MAChB5C,EAAOrH,EAAOqH,KACdq1B,EAAoB,GAAIj0B,GAAawB,EAAO5C,GAC5C+I,EAAOlc,EAAQkc,MAAQlc,EAAQuL,OAAS,EAC5CO,GAAOoL,YAAYnB,GACnBjK,EAAOmC,UAAU4P,MAAM3B,EAAMlc,GACzBA,EAAQupC,aACRvpC,EAAQupC,YAAYz9B,EAAQA,EAAO0I,YAEnC80B,EAAiB,GAAIZ,GAAeF,EAAmB,GAAIj0B,GAAazI,EAAO0I,WAAYrB,IAC/Fm2B,EAAex9B,OAASA,EACxBA,EAAOqC,cAAc7N,KAAKgpC,GAC1Bx9B,EAAOgK,WAGX0zB,EAAiB/nC,EAAK3B,QACtB2e,WAAY,SAAUxc,EAAIwnC,GACtB,GAAI39B,GAAS29B,EAAY39B,OAAQ9L,EAAUG,KAAKH,QAAS0pC,EAAa1pC,EAAQ8gB,MAAQ9gB,EAAQ8gB,MAAQhV,EAAO9L,QAAQ4F,UACrHzF,MAAKwpC,WAAa,GAAI99B,GAAS+9B,UAAU3nC,GACrCynC,WAAYA,EACZG,cAAe,OACfC,eAAgB,QAChBzrB,OAAQ,WACJ5c,EAAK6V,KAAKxL,EAAQ,aAAc3L,KAAKoL,UAEzCqH,MAAO9G,EAAO9L,QAAQyE,SAASmB,WAC/BmkC,gBAAgB,KAGxBxpC,QAAS,SAAUqe,GACf,MAAO,IAAId,GAAkBc,IAEjCxS,OAAQ,SAAUnK,GACd,GAAI+nC,GAAY/nC,EAAG8wB,KAAK,mBAAqB9wB,EAAGsK,KAAK,UAAUwmB,KAAK,iBACpEiX,GAAUp2B,QACVo2B,EAAUz+B,MAAMy+B,EAAUhqC,QAAQ4S,UAGtCq3B,EAAa,gBACbC,EAAqB,6BACrBC,EAAgBD,EAAqB,IAAMD,EAC3CG,EAAU,SAAUr0B,GACpB,OAAQA,EAAM+F,WAAava,EAAEwU,EAAM0G,yBAAyBpD,GAAG6wB,IAE/DG,EAAqBtoC,EAAMjC,QAC3B6Q,OAAQ,SAAUoF,GAAV,GAIAiJ,GAGA5M,EACAtC,EACAmvB,EACAqL,EACAC,EACAC,EAXA5+B,EAAOzL,KACP2oC,EAAS,GAAI5G,EACjB4G,GAAO9C,IAAIjwB,GAAO,GACdiJ,EAAQnD,EAAW4rB,OAAO1xB,EAAO,SAAU0M,GAC3C,MAAOlhB,GAAEkhB,GAAMpJ,GAAG8wB,KAElB/3B,EAAMyJ,EAAW0mB,kBAAkBxsB,GACnCjG,EAAQg5B,EAAOh5B,MACfmvB,EAAM6J,EAAO7J,IACbqL,EAAaL,EAAWh1B,MAAM,KAC9Bs1B,EAAYx+B,EAAIkoB,aAAankB,EAAOw6B,GACpCE,EAAUz+B,EAAIkoB,aAAagL,EAAKqL,GACpC1+B,EAAK6+B,eAAe36B,EAAOy6B,GAAW,GACtC3+B,EAAK6+B,eAAexL,EAAKuL,GAAS,GAClCjpC,EAAEyd,GAAO8d,KAAK,SAAUn5B,EAAG8e,GACvBA,EAAOlhB,EAAEkhB,IACRA,EAAKpJ,GAAG4wB,GAAcxnB,EAAOA,EAAKlW,KAAK09B,IAAanN,KAAK,SAAU5C,EAAGwQ,GACnEA,EAAKj8B,UAAY,eAGrB87B,IAAcz6B,EAAM+iB,iBACpB9mB,EAAIY,aAAayF,EAAIi0B,eAAe,UAAWv2B,GAE/C06B,IAAYvL,EAAIpc,aAChB9W,EAAI6D,YAAYwC,EAAIi0B,eAAe,UAAWpH,GAE9CsL,EACAx0B,EAAM2sB,eAAe5yB,GACdkP,EAAM,KACburB,EAAYhpC,EAAEyd,EAAM,IACpBurB,EAAYA,EAAUlxB,GAAG4wB,GAAcM,EAAYA,EAAUh+B,KAAK09B,GAAYhQ,QAC1EsQ,EAAUvpC,QACV+U,EAAMiB,SAASuzB,EAAUrxB,IAAI,GAAI,IAGzCnD,EAAMkB,UAAS,GACflL,EAAI4E,OAAOb,GACX/D,EAAI4E,OAAOsuB,IAEfwL,eAAgB,SAAU36B,EAAO2nB,EAAKkT,GAClC,GAAIlT,EAAK,CACL,GAA4DrhB,GAAxDqgB,EAAUkU,EAAW,cAAgB,kBAAyBC,EAAU,SAAUnoB,GAC9E,KAAOA,IAASA,EAAKgU,IACjBhU,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAAQlhB,EAAE4X,SAASse,EAAKhV,GAAQA,EAAKgU,GAAW,KAG/D,KADA3mB,EAAQ86B,EAAQ96B,GACTA,GACHsG,EAAOw0B,EAAQ96B,GACf/D,EAAI4E,OAAOb,GACXA,EAAQsG,MAKpBtI,EAAgB/L,EAAMjC,QACtBC,KAAM,SAAU+L,GACZ3L,KAAK2L,OAASA,GAElB8J,QAAS,SAAUvG,GAAV,GAQG0G,GACA5C,EAGI03B,EAQAC,EAnBRl/B,EAAOzL,KAAM2L,EAASF,EAAKE,OAAQ6B,EAAW7B,EAAO6B,SAAUo9B,EAAcp9B,EAASo9B,YAAY17B,GAAI27B,EAAMlrC,EAAOyB,EAAE0pC,QAAS57B,EAElI,OADAzD,GAAKE,OAAOjL,QAAQ,UAAWmqC,GAC3BA,EAAIE,sBACJ77B,EAAEsH,kBACK,GAENq0B,EAAIE,uBAAwBH,GAAgBp9B,EAASuB,sBAqBnD,GApBC6G,EAAQjK,EAAO0I,WACfrB,EAAOrH,EAAOqH,KAClBvH,EAAK48B,kBAAoB,GAAIj0B,GAAawB,EAAO5C,GAC7Ci3B,EAAQr0B,KACJ80B,EAAqB,GAAIR,GAAmBv+B,GAChD++B,EAAmBl6B,OAAOoF,GAC1BjK,EAAOoL,YAAYnB,IAEnB1T,EAAQ60B,SAAWnhB,EAAM+F,WAAa6sB,EAASx1B,EAAM4C,KACrD5C,EAAK1E,UAAY,IAEjB3C,EAAO0N,YAAc3N,EAAS4N,WAAW0xB,kBAAkBp1B,KACvD+0B,EAAmB,GAAIj/B,GAASgC,iBAAiB/B,GACrDg/B,EAAiBM,gBAAgBr1B,IAErCpI,EAAS09B,YAAY,WACjBz/B,EAAK68B,gBAAkBF,EAAaz8B,EAAQF,EAAK48B,sBAE9C,IAIf9wB,MAAO,SAAUrI,GACb,GAAI1B,GAAWxN,KAAK2L,OAAO6B,QAE3B,OADAxN,MAAK2L,OAAOjL,QAAQ,QAASwO,GACzB1B,EAASuB,sBACTvB,EAASwB,aACF,IAEJ,KAGXtB,EAAmB9L,EAAMjC,QACzBC,KAAM,SAAU+L,GACZ3L,KAAK2L,OAASA,GAElBw/B,UAAW,SAAUr1B,GACjB,GAAI0vB,GAAQ55B,EAAI8E,OAAO1Q,KAAK2L,OAAOjB,SAAU,IAI7C,OAHAkB,GAAIksB,SAAShiB,EAAW0vB,EAAO,GAC/B55B,EAAIqpB,aAAauQ,EAAM9S,iBACvB9mB,EAAIqpB,aAAauQ,EAAM9iB,aAChB8iB,GAEX4F,cAAe,SAAU5F,GACrB,GAAI5vB,GAAQ5V,KAAK2L,OAAO2M,aACxB1C,GAAM4sB,cAAcgD,GACpB5vB,EAAMkB,UAAS,GACf9W,KAAK2L,OAAOoL,YAAYnB,GACxBhK,EAAI4E,OAAOg1B,IAEf6F,cAAe,SAAUz1B,GAAV,GAIHK,GAIAuvB,EAPJljB,EAAO1M,EAAMyH,aACb4E,EAAQrW,EAAIivB,sBAAsBvY,EAAM1W,EAAIoW,cAChD,OAAIC,IAASvW,EAASgQ,WAAWisB,QAAQ/xB,EAAOqM,IACxChM,EAAOrK,EAAIqK,KAAKgM,GACfhM,GAA0B,KAAlBrK,EAAItI,KAAK2S,IAGlBuvB,EAAQxlC,KAAKmrC,UAAUl1B,GAC3BjW,KAAKsrC,OAAOrpB,EAAOhM,GACnBjW,KAAKorC,cAAc5F,IACZ,IALI,IAOR,GAEX+F,gBAAiB,SAAU31B,GAKvB,IALa,GACTG,GAASH,EAAM0H,YACfgF,EAAO1M,EAAMgG,eACbV,EAAOoH,EAAK1L,UACZojB,EAAQ,EACLjkB,EAASikB,GAAS,GAAiC,UAA5B9e,EAAKnF,EAASikB,EAAQ,IAChDA,GAEAA,GAAQ,IACR1X,EAAKmR,WAAW1d,EAASikB,EAAOA,GAChCpkB,EAAMiB,SAASyL,EAAMhS,KAAKF,IAAI,EAAG2F,EAASikB,IAC1CpkB,EAAMkB,UAAS,GACf9W,KAAK2L,OAAOoL,YAAYnB,KAGhC41B,iBAAkB,SAAU51B,GAAV,GAQN6M,GACA+iB,EAMA9P,EAKA9W,EAnBJ0D,EAAO1M,EAAMgG,eACb6vB,EAAK7/B,EAAIivB,sBAAsBvY,GAAO,OACtCL,EAAQrW,EAAIivB,sBAAsBvY,EAAM,sBAAsBxN,MAAM,KAIxE,OAHIlJ,GAAI+mB,WAAWrQ,IACftiB,KAAKurC,gBAAgB31B,GAErBqM,GAASA,EAAMyQ,iBAAmBhnB,EAASgQ,WAAWgsB,UAAU9xB,EAAOqM,IACnEQ,EAAOR,EAAMyQ,gBACb8S,EAAQxlC,KAAKmrC,UAAUlpB,GAC3BjiB,KAAKsrC,OAAO7oB,EAAMR,GAClBjiB,KAAKorC,cAAc5F,IACZ,GAEPiG,GAAM//B,EAASgQ,WAAWgsB,UAAU9xB,EAAO61B,IACvC/V,EAAQ+V,EAAGjpB,WACVkT,IACD+V,EAAGn9B,UAAY5C,EAASjK,oBACxBi0B,EAAQ+V,EAAGjpB,YAEX5D,EAAY,GAAIlT,GAASggC,cAAc9/B,EAAItI,KAAKmoC,EAAG3Y,YAAa,KACpEld,EAAM+sB,mBAAmB8I,GACzB7sB,EAAUqqB,OAAOrzB,GACbhK,EAAIupB,cAAcO,GAClB9f,EAAM2sB,eAAe7M,GAErB9f,EAAMiB,SAAS6e,EAAO,GAE1B11B,KAAK2L,OAAOoL,YAAYnB,IACjB,IAEJ,GAEX+1B,iBAAkB,SAAU/1B,GAAV,GAQV+yB,GAOAh5B,EACAmvB,EAfA8M,EAAWh2B,EAAM0G,wBACjBuvB,EAAQjgC,EAAII,QAAQ4/B,EAAU,SAC9BE,EAAwBpgC,EAASjK,oBACjCkK,EAAS3L,KAAK2L,MAiClB,OAhCI,gBAAgBuL,KAAKtL,EAAItI,KAAKsoC,KAC9Bh2B,EAAM2C,WAAWszB,GAEjBlD,EAAS,GAAI5G,GACjB4G,EAAO9C,IAAIjwB,GAAO,GACdjK,EAAO0N,YACPrZ,KAAK+rC,kBAAkBpD,GAE3B/yB,EAAM4sB,cAAcmG,EAAOh5B,OAC3BiG,EAAM6sB,aAAakG,EAAO7J,KACtBnvB,EAAQiG,EAAMgG,eACdkjB,EAAMlpB,EAAMyH,aAChBzH,EAAMgtB,iBACFiJ,GAA6B,KAApBzqC,EAAEyqC,GAAO3wB,SAClBtF,EAAM2C,WAAWszB,GACjBj2B,EAAMgtB,kBAEVgJ,EAAWh2B,EAAM0G,wBACU,MAAvB1Q,EAAItI,KAAKsoC,IAA4C,KAAvBA,EAASt9B,YACvCs9B,EAASt9B,UAAYw9B,EACrBl2B,EAAMiB,SAAS+0B,EAAU,IAE7B5rC,KAAKgsC,MAAMr8B,EAAOmvB,GAClBlzB,EAAI6D,YAAY9D,EAAOjB,SAASw7B,eAAe,UAAWyC,EAAOh5B,OACjEg5B,EAAOn4B,OAAOoF,GACdjG,EAAQiG,EAAMgG,eACS,MAAnBhQ,EAAItI,KAAKqM,KACTA,EAAQA,EAAMujB,WAAW5iB,KAAKF,IAAI,EAAGwF,EAAM0H,YAAc,IACzD1H,EAAMiB,SAASlH,EAAO/D,EAAIqnB,cAActjB,KAE5CiG,EAAMkB,UAAS,GACfnL,EAAOoL,YAAYnB,IACZ,GAEXm2B,kBAAmB,SAAUpD,GAAV,GACX7B,GAAkBp7B,EAAS4N,WAAWwtB,gBACtCmF,EAAiBnF,EAAgB6B,EAAOh5B,OACxCu8B,EAAepF,EAAgB6B,EAAOh5B,MACtCs8B,IACArgC,EAAIY,aAAam8B,EAAOh5B,MAAOs8B,GAE/BC,GACAtgC,EAAI6D,YAAYk5B,EAAO7J,IAAKoN,GAE5BD,GACArgC,EAAI4E,OAAOy7B,GAEXC,GAAgBA,EAAapZ,YAC7BlnB,EAAI4E,OAAO07B,IAGnBC,MAAO,SAAU7pB,GACb,KAAOA,GAAQA,EAAKwQ,YAA2C,QAA7BlnB,EAAItI,KAAKgf,EAAKwQ,aAC5CxQ,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAEX0pB,MAAO,SAAUr8B,EAAOmvB,GACpBnvB,EAAQ3P,KAAKmsC,MAAMx8B,GACnBmvB,EAAM9+B,KAAKmsC,MAAMrN,GACbnvB,GAASmvB,GAAOlzB,EAAIsN,GAAG4lB,EAAK,MAC5B9+B,KAAKsrC,OAAO37B,EAAOmvB,IAG3BwM,OAAQ,SAAUc,EAAM/5B,GAEpB,IADAzG,EAAI0vB,oBAAoB8Q,GACjB/5B,EAAImQ,YACc,GAAjB4pB,EAAKz1B,UACLy1B,EAAOxgC,EAAIirB,KAAKuV,GAAQA,EAAK5tB,SAAS4tB,EAAK5tB,SAAS3d,OAAS,GAAKurC,EAClEA,EAAKrT,YAAY1mB,EAAImQ,aAErB4pB,EAAKtZ,WAAWiG,YAAY1mB,EAAImQ,WAGxC5W,GAAI4E,OAAO6B,IAEfoD,QAAS,SAAUvG,GAAV,GACDm9B,GAAQhE,EACR18B,EAAS3L,KAAK2L,OACdiK,EAAQjK,EAAO0I,WACf8B,EAAUjH,EAAEiH,QACZ/T,EAAO5C,EAAM4C,KACbkqC,EAAYn2B,IAAY/T,EAAKgU,UAC7Bm2B,EAAMp2B,GAAW/T,EAAKiU,MACtB1K,GAAO0N,YAAc1N,EAAO0N,WAAW5D,QAAQvG,EAAG0G,MAGjD02B,IAAaC,GAAS32B,EAAM+F,UAEtB2wB,EACPD,EAAS,mBACFE,IACPF,EAAS,iBAJTA,EAAS,mBAMRA,IAGLhE,EAAoB,GAAIj0B,GAAawB,EAAOjK,EAAOqH,MAC/ChT,KAAKqsC,GAAQz2B,KACb1G,EAAEsH,iBACF4xB,EAAaz8B,EAAQ08B,OAG7B4C,gBAAiB,SAAUr1B,GACvB5V,KAAK2rC,iBAAiB/1B,IAE1B2B,MAAOnW,EAAEsd,OAET9Q,EAAgBhM,EAAMjC,QACtBC,KAAM,SAAU+L,GACZ3L,KAAK2L,OAASA,EACd3L,KAAKwsC,2BAA4B,GAErCC,kBAAmB,WACfzsC,KAAKqoC,kBAAoBroC,KAAKsoC,gBAAkBF,EAAapoC,KAAK2L,OAAQ3L,KAAKqoC,oBAEnFqE,QAAS,WACL,MAAI1sC,MAAKqoC,kBACEroC,KAAKqoC,kBAAkBtsB,MAAQ/b,KAAK2L,OAAOqH,KAAK1E,WAEpD,GAEXmH,QAAS,SAAUvG,GACf,GAAIzD,GAAOzL,KAAM2L,EAASF,EAAKE,OAAQ6B,EAAW7B,EAAO6B,QACzD,OAAIA,GAASm/B,cAAcz9B,IACnB1B,EAASuB,sBACTvB,EAASwB,WAAU,GAEvBvD,EAAK48B,kBAAoB,GAAIj0B,GAAazI,EAAO0I,WAAY1I,EAAOqH,OAC7D,GAEPxF,EAASo/B,SAAS19B,IAClBzD,EAAK+gC,2BAA4B,EAC7B/gC,EAAKihC,YACLjhC,EAAK+gC,2BAA4B,EACjC/gC,EAAKghC,sBAEF,IAEJ,GAEXl1B,MAAO,WACH,GAAI9L,GAAOzL,IACX,OAAIyL,GAAK+gC,2BAA6B/gC,EAAKihC,WACvCjhC,EAAK+gC,2BAA4B,EACjC/gC,EAAKghC,qBACE,IAEJ,KAGX5+B,EAAmBjM,EAAMjC,QACzBC,KAAM,SAAU+L,GACZ3L,KAAK2L,OAASA,GAElB8J,QAAS,SAAUvG,IACVhN,EAAQ60B,QAAU7nB,EAAE67B,uBAA0B77B,EAAE+I,SAAwB,IAAb/I,EAAEiH,SAAkBjH,EAAEgJ,QAAWhJ,EAAEiJ,WAG/FnY,KAAK2L,OAAO9L,QAAQwZ,YACpBrZ,KAAK6sC,0BAET7sC,KAAK8sC,sBAETA,kBAAmB,WAAA,GACXnhC,GAAS3L,KAAK2L,OACdiK,EAAQjK,EAAO0I,UACnBuB,GAAM+sB,mBAAmBh3B,EAAOqH,MAChCrH,EAAOoL,YAAYnB,IAEvBi3B,wBAAyB,WAErB,IADA,GAAIlhC,GAAS3L,KAAK2L,OAAQqH,EAAOrH,EAAOqH,KAAMupB,EAAY7wB,EAAS4N,WAAWijB,UAAW5G,EAAgB/pB,EAAI+pB,cAAemE,EAAQ9mB,EAAKwP,WAAYga,EAAOxpB,EAAKkjB,UAC1JP,EAAcmE,IACjBA,EAAQA,EAAMpX,WAElB,MAAOiT,EAAc6G,IACjBA,EAAOA,EAAK9J,eAEZoH,IAASyC,EAAUzC,IACnB14B,EAAEm6B,GAAIkB,UAAUzpB,GAEhBwpB,GAAQD,EAAUC,IAClBp7B,EAAEm6B,GAAI5pB,SAASqB,IAGvBuE,MAAOnW,EAAEsd,OAETjR,EAAW7L,EAAMjC,QACjBC,KAAM,SAAUqV,GACZjV,KAAKiV,SAAWA,EAChBjV,KAAK+sC,kBAAmB,GAE5BC,YAAa,SAAU72B,GACnB,MAAOA,IAAW,IAAiB,IAAXA,GAAiBA,GAAW,IAAiB,KAAXA,GAAkBA,GAAW,KAAkB,KAAXA,GAAkBA,GAAW,KAAkB,KAAXA,GAA6B,KAAXA,GAExJa,iBAAkB,SAAUlL,EAAOoD,GAC/B,GAA0CtL,GAAUE,EAAhDqa,EAAM8uB,OAAOC,aAAah+B,EAAEiH,QAChC,KAAKvS,IAAYkI,GAMb,GALAhI,EAAc1C,EAAEzB,QACZye,MAAM,EACN+uB,KAAK,EACLC,OAAO,GACRthC,EAAMlI,GAAU/D,UACdiE,EAAYqa,KAAOA,GAAOra,EAAYqa,KAAOjP,EAAEiH,UAAYrS,EAAYsa,MAAQlP,EAAE+I,SAAWnU,EAAYqpC,KAAOj+B,EAAEgJ,QAAUpU,EAAYspC,OAASl+B,EAAEiJ,SACnJ,MAAOvU,IAInB+V,kBAAmB,SAAU7N,EAAOoD,GAAjB,GAC2BtL,GAAU6V,EAAG4zB,EAAnDlvB,EAAM8uB,OAAOC,aAAah+B,EAAEiH,SAAmCm3B,KAC/DC,EAAW,SAAUC,GACrB,MAAOA,IAAWrvB,GAAOqvB,GAAWt+B,EAAEiH,QAE1C,KAAKvS,IAAYkI,GACb2N,EAAIrY,EAAEzB,QACFye,MAAM,EACN+uB,KAAK,EACLC,OAAO,GACRthC,EAAMlI,GAAU/D,SACnBwtC,EAAajsC,EAAEqsC,QAAQh0B,EAAE0E,KAAO/c,EAAEq0B,KAAKhc,EAAE0E,IAAKovB,GAAU1sC,OAAS,EAAI0sC,EAAS9zB,EAAE0E,KAC5EkvB,GAAc5zB,EAAE2E,MAAQlP,EAAE+I,SAAWwB,EAAE0zB,KAAOj+B,EAAEgJ,QAAUuB,EAAE2zB,OAASl+B,EAAEiJ,UACvEm1B,EAAMntC,KAAK2L,EAAMlI,GAGzB,OAAO0pC,IAEX1C,YAAa,SAAU17B,GACnB,GAAIiH,GAAUjH,EAAEiH,OAChB,OAAOnW,MAAKgtC,YAAY72B,KAAajH,EAAE+I,UAAY/I,EAAEgJ,QAAqB,IAAX/B,GAA4B,IAAXA,GAA4B,GAAXA,GAA2B,IAAXA,IAAkBjH,EAAEiJ,WAAajJ,EAAE+I,UAAY/I,EAAEgJ,QAEtKy0B,cAAe,SAAUz9B,GACrB,GAAIiH,GAAUjH,EAAEiH,OAChB,OAAkB,KAAXA,IAAkBjH,EAAEiJ,WAAajJ,EAAEgJ,QAAqB,IAAX/B,IAAkBjH,EAAE+I,UAAY/I,EAAEgJ,QAAqB,IAAX/B,IAAkBjH,EAAE+I,UAAY/I,EAAEiJ,UAEtIy0B,SAAU,SAAU19B,GAChB,MAAoB,KAAbA,EAAEiH,SAAiBjH,EAAE+I,UAAY/I,EAAEgJ,SAAWhJ,EAAEiJ,UAE3D+yB,YAAa,SAAUjH,GACnBjkC,KAAK0tC,YAAczJ,EACnBjkC,KAAK+sC,kBAAmB,GAE5BY,WAAY,WACJ3tC,KAAK+sC,kBAAoB/sC,KAAK0tC,aAC9B1tC,KAAK0tC,cAET1tC,KAAK+sC,kBAAmB,GAE5B/9B,UAAW,SAAU4+B,GACjB,GAAIniC,GAAOzL,IACXyL,GAAK4L,eACDu2B,EACAniC,EAAKkiC,aAELliC,EAAKoiC,QAAUlsC,OAAOiL,WAAWxL,EAAEe,MAAMsJ,EAAKkiC,WAAYliC,GAAO,MAGzEsD,mBAAoB,WAChB,MAAO/O,MAAK+sC,kBAEhB11B,aAAc,WACV1V,OAAO0V,aAAarX,KAAK6tC,UAE7Bh/B,OAAQ,SAAUK,EAAG4+B,GACjB,GAAItqC,GAAGyR,EAAWjV,KAAKiV,QACvB,KAAKzR,EAAI,EAAOyR,EAASpU,OAAb2C,IACJyR,EAASzR,GAAGsqC,GAAM5+B,GADO1L,OAMrCiS,QAAS,SAAUvG,GACflP,KAAK6O,OAAOK,EAAG,YAEnBqI,MAAO,SAAUrI,GACblP,KAAK6O,OAAOK,EAAG,YAGnBnB,EAAYnM,EAAMjC,QAClBC,KAAM,SAAU+L,GACZ3L,KAAK2L,OAASA,CACd,IAAIyO,GAAezO,EAAO9L,QAAQua,YAClCpa,MAAK+tC,UACD,GAAIC,GAAc5zB,GAClB,GAAI6zB,GAAW7zB,GACf,GAAI8zB,GAAoB9zB,GACxB,GAAI+zB,GAAoB/zB,GACxB,GAAIg0B,GAAgBh0B,GACpB,GAAIi0B,GAAgBj0B,GACpB,GAAIk0B,GAAmBl0B,GACvB,GAAIm0B,GAAcn0B,KAG1Bo0B,eAAgB,SAAUzyB,GACtB,GAAIpQ,GAAS3L,KAAK2L,OAAQsG,EAAMtG,EAAOjB,SAAUoL,EAAYlK,EAAI8E,OAAOuB,EAAK,OAAQw8B,EAAWx8B,EAAIkxB,wBAEpG,KADArtB,EAAUxH,UAAYyN,EACfjG,EAAU0M,YACbisB,EAAS1V,YAAYjjB,EAAU0M,WAEnC,OAAOisB,IAEX/X,QAAS,SAAU3a,GACf,MAAO,+BAA+B7E,KAAK6E,IAE/C2yB,mBAAoB,WAAA,GACZ94B,GACA8yB,EACA/8B,EAAS3L,KAAK2L,MAClB,KAAI3L,KAAK2uC,YAOT,MAJA3uC,MAAK2uC,aAAc,EACnB/4B,EAAQjK,EAAO0I,WACfq0B,EAAe,GAAIt0B,GAAawB,EAAOjK,EAAOqH,MAC9CpH,EAAI6rB,iBAAiB9rB,EAAOjB,WAExBkL,MAAOA,EACP8yB,aAAcA,IAGtBkG,iBAAkB,SAAUC,GACxBzG,EAAapoC,KAAK2L,OAAQkjC,EAAiBnG,cAC3C1oC,KAAK2L,OAAOwD,mBACZnP,KAAK2uC,aAAc,GAEvBG,qBAAsB,SAAUC,EAAQC,GAAlB,GACdvjC,GAAOzL,KACP2L,EAASF,EAAKE,OACdkjC,EAAmBpjC,EAAKijC,oBACvBG,KAGLE,EAAOhvC,KAAK0L,EAAME,EAAQkjC,EAAiBj5B,OAC3ChJ,WAAW,WACPoiC,EAAMjvC,KAAK0L,EAAME,EAAQkjC,EAAiBj5B,OAC1CnK,EAAKmjC,iBAAiBC,OAG9BI,gBAAiB,SAAUr5B,GAAV,GAEJpS,GADLqb,EAAQnT,EAASgQ,WAAWF,UAAU5F,EAC1C,KAASpS,EAAI,EAAOqb,EAAMhe,OAAV2C,EAAkBA,IAC9Bqb,EAAMrb,GAAGoT,UAAYhL,EAAIopB,SAASnW,EAAMrb,GAAGoT,YAGnDs4B,cAAe,SAAUt5B,GACrB,GAAI+yB,GAAS,GAAI5G,EACjB4G,GAAO9C,IAAIjwB,GACX5V,KAAKivC,gBAAgBr5B,GACrB+yB,EAAOn4B,OAAOoF,GACd5V,KAAK2L,OAAOoL,YAAYnB,IAE5Bu5B,OAAQ,WACJnvC,KAAKkvC,cAAclvC,KAAK2L,OAAO0I,aAEnC+6B,MAAO,WACHpvC,KAAKkvC,cAAclvC,KAAK2L,OAAO0I,YAC/BrU,KAAK8uC,qBAAqB1tC,EAAEsd,KAAMtd,EAAEsd,OAExC2wB,eAAgB,SAAUC,GAAV,GACRC,GAAWnuC,EAAEqe,WACb+vB,EAAS,GAAIC,WAMjB,OALMH,aAAgB3tC,QAAO+tC,OAASJ,EAAKK,YACvCL,EAAOA,EAAKK,aAEhBH,EAAOI,OAASxuC,EAAEe,MAAMotC,EAASlvB,QAASkvB,GAC1CC,EAAOK,cAAcP,GACdC,EAAS7vB,WAEpBowB,cAAe,SAAU/zB,EAAMlc,GAC3B,GAAI8f,IAAS5D,KAAMA,GAAQ,GAC3B4D,GAAK5D,KAAO4D,EAAK5D,KAAK1N,QAAQ,UAAW,IACzCrO,KAAK2L,OAAOjL,QAAQ,QAASif,GAC7B3f,KAAK0d,MAAMiC,EAAK5D,KAAMlc,QAE1BkwC,kBAAmB,SAAU7gC,GAAV,GAIX8gC,GACArvB,EAIAsvB,EAGAl0B,EAMA8yB,CAjBJ,IAAM,cAAgBltC,WAAWO,EAAQkR,MAAQlR,EAAQ6c,QAAU,MAG/DixB,EAAgB9gC,EAAE8gC,eAAiB9gC,EAAEghC,cAAcF,eAAiBruC,OAAOquC,kBAC3ErvB,EAAQqvB,EAAcrvB,OAASqvB,EAAcG,MAC5CxvB,IAGDsvB,EAAS7uC,EAAEq0B,KAAK9U,EAAO,SAAU+jB,GACjC,MAAO,YAAYxtB,KAAKwtB,EAAKn5B,QAE7BwQ,EAAO3a,EAAEq0B,KAAK9U,EAAO,SAAU+jB,GAC/B,MAAO,eAAextB,KAAKwtB,EAAKn5B,SAEhCwQ,EAAKlb,QAAWovC,EAAOpvC,SAGvBguC,EAAmB7uC,KAAK0uC,wBAY5B,MARAttC,GAAEgvC,KAAK3V,MAAMr5B,EAAGA,EAAEkS,IAAI28B,EAAQjwC,KAAKqvC,iBAAiBtvB,KAAK3e,EAAEe,MAAM,WAAA,GACzDkuC,GAAUC,MAAMpxB,UAAU5e,MAAMP,KAAKk6B,WACrCle,EAAO3a,EAAEkS,IAAI+8B,EAAS,SAAUnhC,GAChC,MAAO,aAAeA,EAAEmJ,OAAO4d,OAAS,SACzCziB,KAAK,GACRxT,MAAK8vC,cAAc/zB,GACnB/b,KAAK4uC,iBAAiBC,IACvB7uC,QACI,GAEXuwC,QAAS,SAAUrhC,GACf,MAAIlP,MAAK+vC,kBAAkB7gC,OACvBA,GAAEsH,kBAGNxW,KAAKkpC,yBACLlpC,MAAK8uC,qBAAqB,SAAqBnjC,EAAQiK,GAA7B,GAcd46B,GAGAjQ,EAMAkQ,EAtBJC,EAAgB9kC,EAAI8E,OAAO/E,EAAOjB,SAAU,OAC5C0qB,UAAW,oBACX9mB,UAAW,WAEXpM,EAAU1C,EAAMwC,QAAQE,QACxB8Q,EAAOrH,EAAOqH,IAClBhT,MAAK2wC,wBAAwBD,EAAe19B,GAC5CA,EAAK+lB,YAAY2X,GACbxuC,EAAQ60B,QACR/2B,KAAK4wC,qBAAqBF,EAAe96B,GAEzC1T,EAAQkR,MAA0B,GAAlBlR,EAAQ6c,SACxB7P,EAAEsH,iBACEg6B,EAAI7kC,EAAO2M,cACfk4B,EAAE7N,mBAAmB+N,GACrB/kC,EAAOoL,YAAYy5B,GACfjQ,EAAY50B,EAAOjB,SAASsI,KAAKkuB,kBACrCX,EAAUY,kBAAkBuP,GAC5BtvC,EAAE4R,GAAM69B,OAAO,SACftQ,EAAUjrB,YAAY,SACtBlU,EAAE4R,GAAMrC,KAAK,QAASvP,EAAEe,MAAMnC,KAAKuwC,QAASvwC,SAExCywC,EAAiB9kC,EAAO2M,cAC5Bm4B,EAAe9N,mBAAmB+N,GAClC/kC,EAAOoL,YAAY05B,IAEvB76B,EAAMgtB,kBACP,SAAoBj3B,EAAQiK,GAC3B,GAAek7B,GAAX/0B,EAAO,EACXpQ,GAAOoL,YAAYnB,GACnBk7B,EAAa1vC,EAAEuK,EAAOqH,MAAMwL,SAAS,sBACrCsyB,EAAWnU,KAAK,WACZ,GAAIzG,GAAYl2B,KAAKk2B,SACjBA,IAAatqB,EAAIsN,GAAGgd,EAAW,OAC/BtqB,EAAI4E,OAAO0lB,GAEfna,GAAQ/b,KAAKsO,YAEjBwiC,EAAWtgC,SACXxQ,KAAK8vC,cAAc/zB,GAAQg1B,OAAO,QAG1CJ,wBAAyB,SAAUruB,EAAMtP,GAAhB,GAcbrI,GAQA2pB,EAIAkL,EAIA35B,GA7BH3D,EAAQkR,MAASlR,EAAQ60B,UAG9BzU,EAAOlhB,EAAEkhB,GACTA,EAAK1Q,KACDo/B,YAAa,MACbtoC,MAAO,MACPC,OAAQ,MACRsoC,SAAU,SACVC,OAAQ,IACRC,QAAS,MAETjvC,EAAQkR,OACJzI,EAAkBvJ,EAAE4R,EAAK+gB,cAAcppB,iBAC3C2X,EAAK1Q,KACDw/B,YAAa,SACbC,WAAY,SACZC,YAAa,SACbC,WAAY,SACZhS,eAAgB,SAEhBjL,EAAQ3pB,EAAgBiH,IAAI,SAC5B0iB,GACAhS,EAAK1Q,IAAI,QAAS0iB,GAElBkL,EAAa70B,EAAgBiH,IAAI,cACjC4tB,GACAld,EAAK1Q,IAAI,aAAc4tB,GAEvB35B,EAAW8E,EAAgBiH,IAAI,YAC/B/L,GACAyc,EAAK1Q,IAAI,WAAY/L,MAIjC+qC,qBAAsB,SAAUtuB,EAAM1M,GAAhB,GACdnK,GAAOzL,KACPgT,EAAOvH,EAAKE,OAAOqH,KACnBw+B,EAAa5lC,EAAImK,OAAOuM,EAAMtP,GAC9By+B,EAAchmC,EAAKimC,aAAa97B,EAAO5C,GACvC2+B,EAAaF,EAAY57B,KAAO27B,EAAW37B,KAC3C+7B,EAAaH,EAAYna,IAAMka,EAAWla,IAC1Cua,EAAY,aAAeF,EAAa,MAAQC,EAAa,KACjExwC,GAAEkhB,GAAM1Q,KACJkgC,oBAAqBD,EACrBE,UAAaF,KAGrBH,aAAc,SAAU97B,EAAO5C,GAAjB,GAINg/B,GAEIC,EAaJl8B,EACA0M,EACAxM,EAGIi8B,EAvBJvmC,EAAS3L,KAAK2L,OACd65B,EAAQ55B,EAAI8E,OAAO/E,EAAOjB,SAAU,QAAU4D,UAAW,WACzDsN,EAAiBhG,EAAMgG,cA4B3B,OA1BIhG,GAAM+F,WACFs2B,EAAkBrmC,EAAI+mB,WAAW/W,GACjCq2B,IAAoBrmC,EAAImpB,MAAMnZ,IAAyC,IAAtBhG,EAAM0H,aACvD1R,EAAIY,aAAag5B,EAAO5pB,GACjBq2B,GAAmBr8B,EAAM0H,cAAgB1B,EAAe/a,OAC/D+K,EAAI6D,YAAY+1B,EAAO5pB,IAEvBhG,EAAM2tB,WAAWiC,GACjBwM,GAAe,KAGnBp2B,EAAiBA,IAAmB5I,EAAO4I,EAAesX,WAAWtd,EAAM0H,aAAe1B,EAC1FhQ,EAAIY,aAAag5B,EAAO5pB,IAExB7F,EAASnK,EAAImK,OAAOyvB,EAAOxyB,GAC3ByP,EAAO+iB,EAAM9S,gBACbzc,EAAOuvB,EAAM9iB,YACjB9W,EAAI4E,OAAOg1B,GACPwM,GAAgBpmC,EAAI+mB,WAAWlQ,IAAS7W,EAAI+mB,WAAW1c,KAAUrK,EAAImpB,MAAMtS,KAAU7W,EAAImpB,MAAM9e,KAC3Fi8B,EAAazvB,EAAK5hB,OACtBoV,EAAK2c,KAAOnQ,EAAKmQ,KAAO3c,EAAK2c,KAC7Bhd,EAAMiB,SAASZ,EAAMi8B,GACrBtmC,EAAI4E,OAAOiS,GACX7M,EAAMkB,UAAS,GACfnL,EAAOoL,YAAYnB,IAEhBG,GAEXmzB,mBAAoB,SAAUtzB,GAAV,GAGR5C,GAIIf,EACAkgC,EAPRxmC,EAAS3L,KAAK2L,MACdA,IAAUA,EAAO9L,QAAQwZ,aACrBrG,EAAOrH,EAAOqH,KAClB4C,EAAQA,GAASjK,EAAO0I,WACxB7U,EAAMsC,GAAG6J,OAAO2N,WAAW4vB,mBAAmBtzB,GAC1CA,EAAMgG,iBAAmB5I,GAA8B,IAAtB4C,EAAM0H,cACnCrL,EAAMe,EAAK+gB,cACXoe,EAAUlgC,EAAIi0B,eAAe,UACjClzB,EAAKxG,aAAa2lC,EAASn/B,EAAKkgB,WAAW,IAC3Ctd,EAAM2sB,eAAe4P,IAEzBxmC,EAAOoL,YAAYnB,KAG3Bw8B,iBAAkB,SAAUnwB,EAAOK,GAC/B,GAAIwQ,GAAY9f,CAChB,IAAIiP,EACA,MAAOrW,GAAIivB,sBAAsBvY,GAC7B,IACA,KACA,QACEA,EAAKwQ,UAIf,IAFAA,EAAaxQ,EAAKwQ,WAClB9f,EAAOsP,EAAKyR,cAAc/gB,KACtBpH,EAAIgrB,SAAS9D,GACb,KAAOA,EAAWA,YAAc9f,IAASpH,EAAI8qB,QAAQ5D,EAAWA,aAC5DA,EAAaA,EAAWA,UAGhC,OAAOA,IAEXpV,MAAO,SAAU3B,EAAMlc,GAAhB,GACuB2D,GAAG45B,EAkBzBnb,EAEArM,EAKA+yB,EACAnD,EACAjjB,EACA2W,EACAmZ,EAMA5D,EAEI6D,EAoBJC,EAzDA5mC,EAAS3L,KAAK2L,MAMlB,IALA3L,KAAKkpC,qBACLrpC,EAAUF,GACNoxC,OAAO,EACPj8B,OAAO,GACRjV,IACEA,EAAQ2yC,aACT,IAAKhvC,EAAI,EAAG45B,EAAIp9B,KAAK+tC,SAASltC,OAAYu8B,EAAJ55B,EAAOA,IACrCxD,KAAK+tC,SAASvqC,GAAGivC,WAAW12B,KAC5BA,EAAO/b,KAAK+tC,SAASvqC,GAAGutC,MAAMh1B,GA2B1C,IAvBIlc,EAAQkxC,QACRh1B,EAAOA,EAAK1N,QAAQ,8CAA+C,MACnE0N,EAAOA,EAAK1N,QAAQ,0BAA2B,KAEnD0N,EAAOA,EAAK1N,QAAQ,QAAS,WAAWA,QAAQ,QAAS,YACrD4T,EAAQjiB,KAAK02B,QAAQ3a,GACzBpQ,EAAOgK,QACHC,EAAQjK,EAAO0I,WACnBuB,EAAMgtB,iBACFhtB,EAAMgG,gBAAkBjQ,EAAOjB,UAC/BkL,EAAM+sB,mBAAmBh3B,EAAOqH,MAEhC21B,EAAS,GAAI5G,GACbyD,EAAQmD,EAAOlD,SAAS7vB,GACxB2M,EAASviB,KAAKoyC,iBAAiBnwB,EAAOujB,GACtCtM,GAAS,EACTmZ,EAAa9vB,GAAU5W,EAAOqH,OAASpH,EAAIsN,GAAGqJ,EAAQ,MACtD1iB,EAAQiV,OAASu9B,IAAepwB,GAASrW,EAAIgrB,SAASrU,MACtD3M,EAAM2C,WAAWitB,GACjB95B,EAASgQ,WAAW5G,MAAMc,EAAO2M,GAAQ,GACzC2W,GAAS,GAETuV,EAAWzuC,KAAKwuC,eAAezyB,GAC/B0yB,EAASjsB,YAAgD,sBAAlCisB,EAASjsB,WAAW4S,UAAmC,CAE9E,IADIkd,KACC9uC,EAAI,EAAG45B,EAAIqR,EAASvb,WAAWryB,OAAYu8B,EAAJ55B,EAAOA,IAC/C8uC,EAAcnyC,KAAKsuC,EAASvb,WAAW1vB,GAAG8K,UAE9CmgC,GAAWzuC,KAAKwuC,eAAe8D,EAAc9+B,KAAK,WAKtD,GAHApS,EAAEqtC,EAASvb,YAAY4H,OAAO,SAASxuB,SAAS,WAAWwyB,MAAM1yB,KAAK,SAASE,SAAS,WACxFsJ,EAAM2tB,WAAWkL,GACjBlsB,EAASviB,KAAKoyC,iBAAiBnwB,EAAOujB,GAClCtM,EAAQ,CACR,KAAOsM,EAAM1S,YAAcvQ,GACvB3W,EAAIstB,OAAOsM,EAAM1S,WAErBlnB,GAAIstB,OAAOsM,EAAM1S,YAErBlnB,EAAIyW,UAAUzM,EAAM0G,yBACpBkpB,EAAMr/B,MAAMusC,QAAU,SACtB9mC,EAAIisB,iBAAiBlsB,EAAOjB,UAC5BkB,EAAIqrB,SAASuO,GACbmD,EAAOjD,YAAY9vB,GACf28B,EAAW38B,EAAM0G,wBAAwBwW,WACzCld,EAAM+F,WAAmC,SAAtB/P,EAAItI,KAAKivC,KAC5B38B,EAAM4sB,cAAcphC,EAAEmxC,GAAUvmC,QAAQ,SAAS,IACjD4J,EAAMkB,UAAS,IAEnBnL,EAAOoL,YAAYnB,MAGvB+8B,EAAU/wC,EAAMjC,QAChBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,MACfG,KAAK4yC,iBAET7B,MAAO,SAAUh1B,EAAM82B,GACnB,GAAyErvC,GAAG45B,EAAxE3xB,EAAOzL,KAAM4yC,EAAeC,GAAsBpnC,EAAKmnC,YAC3D,KAAKpvC,EAAI,EAAG45B,EAAIwV,EAAa/xC,OAAYu8B,EAAJ55B,EAAOA,GAAK,EAC7CuY,EAAOA,EAAK1N,QAAQukC,EAAapvC,GAAIovC,EAAapvC,EAAI,GAE1D,OAAOuY,MAGXiyB,EAAgB2E,EAAQhzC,QACxBC,KAAM,SAAUC,GACZ8yC,EAAQ7yC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK4yC,cACD,wBACA,yBAGRH,WAAY,SAAU12B,GAClB,OAAQ/b,KAAKH,QAAQ6a,MAAQ,iBAAiBxD,KAAK6E,MAGvDkyB,EAAa0E,EAAQhzC,QACrBC,KAAM,SAAUC,GACZ8yC,EAAQ7yC,GAAGF,KAAKG,KAAKC,KAAMH,EAC3B,IAAIizC,GAAc,GAClB9yC,MAAK4yC,cACD,oDACAE,EACA,OACAA,EACA,wBACAA,IAGRL,WAAY,SAAU12B,GAClB,MAAO,8CAA8C7E,KAAK6E,MAG9DmyB,EAAsByE,EAAQhzC,QAC9BC,KAAM,SAAUC,GACZ8yC,EAAQ7yC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK+yC,kBACD,iBACA,GACA,mBACA,GACA,UACA,IACA,uBACA,SACA,yFACA,GACA,SACA,IAEJ/yC,KAAK4yC,aAAe5yC,KAAK+yC,iBAAiB53B,QACtC,+LACA,KACA,YACA,WACA,cACA,IACA,iCACA,cACA,gCACA,GACA,sCACA,GACA,sCACA,GACA,YACA,OACA,kBACA,GACA,4BACA,GACA,iBACA,GACA,uBACA,eACA,0BACAnb,KAAKgzC,iBACL,uBACA,WACA,sBACA,GACA,kBACA,SAAUC,EAAIC,GACV,MAAOA,GAAKD,EAAK,QAI7BD,iBAAkB,SAAU9X,EAAOiY,EAASxzB,GAA1B,GACVyzB,GAAS,yBACTxT,EAAOwT,EAAOj8B,KAAKwI,GACnB0zB,EAAS1zB,GAAQigB,GAAQA,EAAK,EAClC,OAAIuT,GACO,UACAE,EACA,4BAA8BA,EAAS,KAEvC,UAGfZ,WAAY,SAAU12B,GAClB,MAAO,eAAe7E,KAAK6E,IAAS,oBAAoB7E,KAAK6E,IAAS,mCAAmC7E,KAAK6E,IAElHu3B,kBAAmB,SAAUv3B,GACzB,MAAOA,GAAK1N,QAAQ,uBAAwB,SAAU6vB,EAAGvK,GACrD,OAAKA,GAAcA,EAAW1mB,QAAQ,QAAU,EACrC,GAEJixB,KAGfqV,SAAU,SAAU3W,EAAG4W,GAAb,GAGFC,GAFA13B,EAAO6gB,EAAEtuB,UACT4M,EAAOtP,EAAI6tB,UAAUmD,GAErB8W,EAAc33B,EAAKmf,MAAM,+EACzByY,EAASD,GAAeA,EAAY,GACpCE,EAAW,YAAY18B,KAAKy8B,GAC5BE,EAAgB,SAAU34B,GAC1B,MAAOA,GAAK7M,QAAQ,8BAA+B,IAMvD,OAJIqlC,KACAD,GAAiB,GAErB13B,EAAOA,EAAK1N,QAAQ,iBAAkB,IAAIA,QAAQ,UAAW,MACxDolC,GAAkB,sCAAsCv8B,KAAK6E,IAAS03B,GAAkB,YAAYv8B,KAAK6E,IAAS43B,IAAWC,GAAYJ,GAEtIrb,IAAK,KACLhyB,MAAOnG,KAAK8zC,yBAAyBD,EAAc34B,KAGvD,6BAA6BhE,KAAK6E,IAE9Boc,IAAK,KACLhyB,MAAOnG,KAAK+zC,uBAAuBF,EAAc34B,KAHzD,QAOJ84B,aAAc,SAAUpX,GACpB,GAAIptB,EAgBJ,OAf2B,IAAvBotB,EAAE1J,WAAWryB,OACb2O,EAAUotB,EAAEpa,WAAWlU,UAAUD,QAAQ,uBAAwB,KAEjEzC,EAAI4E,OAAOosB,EAAEpa,YACgB,GAAzBoa,EAAEpa,WAAW7L,UACT,kBAAkBO,KAAK0lB,EAAEpa,WAAW5L,YACpChL,EAAI4E,OAAOosB,EAAEpa,YAGjB,kBAAkBtL,KAAK0lB,EAAEpa,WAAWlU,YACpC1C,EAAI4E,OAAOosB,EAAEpa,YAEjBhT,EAAUotB,EAAEtuB,WAEhB1C,EAAI4E,OAAOosB,GACJhxB,EAAI8E,OAAOhG,SAAU,MAAQ4D,UAAWkB,KAEnDskC,yBAA0B,SAAUH,GAChC,MAAI,sCAAsCz8B,KAAKy8B,GACpC,KACA,KAAKz8B,KAAKy8B,GACV,SAEA,UAGfI,uBAAwB,SAAUJ,GAC9B,GAAIJ,GAAW,IAIf,OAHK,MAAMr8B,KAAKy8B,KACZJ,GAAY,SAASr8B,KAAKy8B,GAAU,SAAW,WAAa,cAAcz8B,KAAKy8B,GAAU,QAAU,UAEhGJ,GAEXU,kBAAmB,SAAUl4B,GACzB,GAAIm4B,GAAgB,uEAIpB,OAHAn4B,GAAOA,EAAK1N,QAAQ6lC,EAAe,SAAUhZ,EAAOrE,EAAMsd,GACtD,MAAO30C,GAAM+D,OAAO,uCAAwCszB,EAAMsd,EAAOjZ,MAIjFnwB,MAAO,SAAUqpC,GAAV,GACoF9wC,GAAqC+wC,EAAYC,EAAe9wC,EAAGo5B,EAAGrxB,EAAM2lC,EAAQra,EAAM2c,EAIzKe,EAKAhB,EAeAiB,EAxBJC,EAAgBrzC,EAAEgzC,GAAahoC,KAAKR,EAAIoW,cAAcxO,KAAK,MAAOkhC,EAAa,GAAUC,KAAalJ,EAAK2I,CAC/G,KAAK5wC,EAAI,EAAOixC,EAAc5zC,OAAlB2C,EAA0BA,IAClCo5B,EAAI6X,EAAcjxC,GAClBgwC,EAAWpyC,EAAEw7B,GAAGhK,OACZ2hB,EAAYf,EAAS3c,KACzBvzB,EAAOsI,EAAItI,KAAKs5B,GACJ,MAARt5B,IAGAiwC,EAAWvzC,KAAKuzC,SAAS3W,EAAG4W,GAChCjoC,EAAOgoC,GAAYA,EAASpb,IACvB5sB,GAAgB,KAARjI,GASb4tC,EAAS0D,WAAWhY,EAAEz2B,MAAM0uC,YAAc,GACvBxzC,SAAfgzC,IACAA,EAAanD,GAEbsD,EAAYjpC,EAAOgpC,EAClBI,EAAOzD,KACRyD,EAAOzD,OAEXra,EAAO8d,EAAOzD,GAAQsD,IAClBtD,EAASwD,IAAe7d,KACxBA,EAAOjrB,EAAI8E,OAAOhG,SAAUa,GAAQpF,OAAS2uC,cAAevB,EAASptC,SACjEslC,GAAM2I,GAAyBM,GAAVxD,GACjBoD,GAAiBD,IAAenD,EAChCoD,EAAcvb,YAAYlC,GAE1BjrB,EAAIY,aAAaqqB,EAAM+F,GAE3B+X,EAAOzD,QAEPoD,EAAgB7I,EAChBA,EAAG1S,YAAYlC,IAEnB8d,EAAOzD,GAAQsD,GAAa3d,GAEhC4U,EAAKzrC,KAAKg0C,aAAapX,GACvB/F,EAAKkC,YAAY0S,GACjBiJ,EAAaxD,GAlCJtU,EAAEtuB,WAGHomC,EAAa,GACbjJ,EAAK2I,GAHLxoC,EAAI4E,OAAOosB,KAoC3BmY,iBAAkB,SAAU5pC,GAExB,IADA,GAAIwoB,GAAaxoB,EAAQwoB,WAAYnwB,EAAImwB,EAAW9yB,OAC7C2C,KAC4B,WAA3BoI,EAAItI,KAAKqwB,EAAWnwB,KACpB2H,EAAQ6pC,oBAAoBrhB,EAAWnwB,KAInDyxC,eAAgB,SAAUC,GAAV,GACRC,GAAQD,EAAIC,MACZtJ,EAAQzqC,EAAE8zC,GAAKlpC,QAAQ,SACvBopC,EAAWvJ,EAAMrtB,SAAS,WACX,GAAf22B,EAAMt0C,SAECu0C,EAASv0C,SAChBs0C,EAAQC,EAAS52B,WACjB42B,EAAS,GAAGtiB,WAAWoC,YAAYkgB,EAAS,KAEhDA,EAAWh0C,EAAEA,EAAEkS,IAAI6hC,EAAO,SAAU5K,GAChC,GAAI7hC,GAAQ6hC,EAAK7hC,KACjB,OAAIA,IAAiC,IAAxBqE,SAASrE,EAAO,IAClBlJ,EAAM+D,OAAO,8BAA+BmF,GAEhD,YACR8K,KAAK,KACH4hC,EAASl8B,GAAG,cACbk8B,EAAWh0C,EAAE,eAAe0O,OAAOslC,IAEvCA,EAAS3Y,UAAUoP,KAEvBwJ,eAAgB,SAAUH,GACtB,GAAuB1xC,GAAnB2xC,EAAQD,EAAIC,MAAUG,EAAcl0C,EAAEkS,IAAI6hC,EAAO,SAAU5K,GACvD,GAAI7U,GAAQt0B,EAAEmpC,GAAM/rB,SAAS,KAAKA,SAAS,UAAU,EACrD,OAAIkX,IAA4B,UAAnB9pB,EAAItI,KAAKoyB,GACXA,EADX,QAIR,IAAI4f,EAAYz0C,QAAUs0C,EAAMt0C,OAAQ,CACpC,IAAK2C,EAAI,EAAO8xC,EAAYz0C,OAAhB2C,EAAwBA,IAChCoI,EAAIstB,OAAOoc,EAAY9xC,GAG3B,KADApC,EAAE8zC,GAAKlpC,QAAQ,SAASI,KAAK,YAAY4iC,MAAM,mBAAmBlQ,MAAM1yB,KAAK,SAAS0D,OAAOolC,GACxF1xC,EAAI,EAAO2xC,EAAMt0C,OAAV2C,EAAkBA,IAC1BoI,EAAI4sB,UAAU2c,EAAM3xC,GAAI,QAIpC+xC,iBAAkB,SAAUJ,GACxB,GAAI3xC,GAAGu2B,EAAGnZ,EAAK2pB,EAAMiL,CACrB,KAAKhyC,EAAI,EAAO2xC,EAAMt0C,OAAV2C,EAAkBA,IAI1B,IAHAxD,KAAK+0C,iBAAiBI,EAAM3xC,IAC5B+mC,EAAOnpC,EAAE+zC,EAAM3xC,IACfgyC,EAAajL,EAAK/rB,SAAS,KACtBub,EAAI,EAAGnZ,EAAM40B,EAAW30C,OAAY+f,EAAJmZ,EAASA,IAClCnZ,EAAM,EAAVmZ,GACAnuB,EAAI6D,YAAY7D,EAAI8E,OAAOhG,SAAU,MAAO8qC,EAAWzb,IAE3DnuB,EAAIstB,OAAOsc,EAAWzb,KAIlC0b,oBAAqB,SAAUC,GAC3B,IAAK,GAAIlyC,GAAI,EAAOkyC,EAAM70C,OAAV2C,EAAkBA,IAC1B,yBAAyB0T,KAAKw+B,EAAMlyC,GAAG2C,MAAM0yB,UAC7CjtB,EAAIstB,OAAOwc,EAAMlyC,KAI7B0H,OAAQ,SAAUkpC,GACd,GAAwD/pC,GAAMsrC,EAAUC,EAAYpyC,EAAGu2B,EAAnF7uB,EAAS9J,EAAEgzC,GAAahoC,KAAK,SAAUX,EAAOzL,IAClD,KAAKwD,EAAI,EAAO0H,EAAOrK,OAAX2C,EAAmBA,IAAK,CAGhC,IAFA6G,EAAOa,EAAO1H,GAAG6G,KACjBurC,EAAaD,EAAWtrC,EAAK,GACxB0vB,EAAI,EAAO1vB,EAAKxJ,OAATk5B,EAAiBA,IACrB1vB,EAAK0vB,GAAGob,MAAMt0C,OAAS+0C,EAAWT,MAAMt0C,SACxC+0C,EAAavrC,EAAK0vB,GAG1BtuB,GAAKwpC,eAAeW,GACpBnqC,EAAK4pC,eAAeM,GACpBlqC,EAAKspC,iBAAiB7pC,EAAO1H,IAC7BiI,EAAK8pC,iBAAiBrqC,EAAO2qC,GAAGryC,GAAG4I,KAAK,UACxCX,EAAKgqC,oBAAoBvqC,EAAO2qC,GAAGryC,GAAG4I,KAAK,WAGnD0pC,QAAS,SAAU1B,GAAV,GAEI5wC,GADLuyC,EAAS30C,EAAEgzC,GAAahoC,KAAK,aACjC,KAAS5I,EAAI,EAAOuyC,EAAOl1C,OAAX2C,EAAmBA,IAC/BoI,EAAI4sB,UAAUud,EAAOvyC,GAAI,OAGjCwyC,iBAAkB,SAAU5B,GACxBhzC,EAAEgzC,GAAahoC,KAAK,KAAKuwB,KAAK,WAC1Bv7B,EAAEpB,MAAM4R,KACJ/L,SAAU,GACV25B,WAAY,KAEXx/B,KAAKsW,aAAa,UAAatW,KAAKmG,MAAM0yB,SAC3C74B,KAAKo5B,gBAAgB,YAIjC2X,MAAO,SAAUh1B,GAAV,GACcq4B,GAAb3oC,EAAOzL,KACPi2C,EAAUj2C,KAAKH,OAmBnB,OAlBIo2C,GAAQv7B,MACRqB,EAAO42B,EAAQ7yC,GAAGixC,MAAMhxC,KAAK0L,EAAMsQ,EAAM/b,KAAK+yC,kBAC9Ch3B,EAAOtQ,EAAK6nC,kBAAkBv3B,KAE9BA,EAAO/b,KAAKi0C,kBAAkBl4B,GAC9BA,EAAO42B,EAAQ7yC,GAAGixC,MAAMhxC,KAAK0L,EAAMsQ,GACnCA,EAAOtQ,EAAK6nC,kBAAkBv3B,GAC9Bq4B,EAAcxoC,EAAI8E,OAAOhG,SAAU,OAAS4D,UAAWyN,IACvDtQ,EAAKqqC,QAAQ1B,GACT6B,EAAQz7B,gBACR/O,EAAKV,MAAMqpC,GAEf3oC,EAAKP,OAAOkpC,GACR6B,EAAQ17B,iBACR9O,EAAKuqC,iBAAiB5B,GAE1Br4B,EAAOq4B,EAAY9lC,UAAUD,QAAQ,kCAAmC,OAErE0N,KAGXoyB,EAAsBwE,EAAQhzC,QAC9BC,KAAM,SAAUC,GACZ8yC,EAAQ7yC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK4yC,cACD,qCACA,GACA,oCACA,MACA,qBACA,OAGRH,WAAY,SAAU12B,GAClB,MAAO,0DAA0D7E,KAAK6E,MAG1Em6B,EAAavD,EAAQhzC,QACrBoxC,MAAO,SAAUh1B,GACb,GAAIjG,GAAYlK,EAAI8E,OAAOhG,SAAU,OAAS4D,UAAWyN,GAEzD,OADAjG,GAAY9V,KAAKm2C,SAASrgC,GACnBA,EAAUxH,WAErB6nC,SAAU,SAAUrgC,GAChB,MAAOA,MAGXs4B,EAAkB8H,EAAWv2C,QAC7Bw2C,SAAU,SAAUrgC,GAChB,GAAIpS,GAAO1D,KAAKo2C,aAIhB,OAHAh1C,GAAE0U,GAAW1J,KAAK1I,GAAMi5B,KAAK,WACzB/wB,EAAIstB,OAAOl5B,QAER8V,GAEXsgC,YAAa,WACT,MAAIp2C,MAAKH,QAAQ8a,KACN,OADX,QAIJ83B,WAAY,WACR,MAAOzyC,MAAKH,QAAQ8a,QAGxB0zB,EAAkB6H,EAAWv2C,QAC7Bw2C,SAAU,SAAUrgC,GAAV,GACF6d,GAAa3zB,KAAKq2C,cAClBx3B,EAAQzd,EAAE0U,GAAW1J,KAAK,IAAMunB,EAAWngB,KAAK,OAAS,IAE7D,OADAqL,GAAMy3B,WAAW3iB,EAAWngB,KAAK,MAC1BsC,GAEXugC,YAAa,WACT,MAAIr2C,MAAKH,QAAQ+R,KAET,QACA,aAKZ6gC,WAAY,WACR,MAAOzyC,MAAKH,QAAQ+R,OAGxB2kC,EAAgB,WAChBv2C,KAAKkb,KAAO,GACZlb,KAAK6lC,IAAM,SAAU3qB,GACjBlb,KAAKkb,MAAQA,IAGjBs7B,EAAgB50C,EAAMjC,QACtBC,KAAM,SAAU62C,GACZz2C,KAAKy2C,WAAaA,IACdv7B,KAAM,IACNw7B,KAAM,SAEV12C,KAAK22C,SACL32C,KAAK42C,mBACL52C,KAAK62C,aAETC,WAAY,SAAU57B,GACI,IAAlBA,EAAKvE,WACLuE,EAAOA,EAAKtE,WAEhB5W,KAAK+2C,cAAclR,IAAI3qB,IAE3B87B,sBAAuB,SAAU97B,GAC7Blb,KAAK42C,gBAAgBz2C,KAAK+a,IAE9B+7B,qBAAsB,WACdj3C,KAAK42C,gBAAgB/1C,SACrBb,KAAK82C,WAAW92C,KAAK42C,gBAAgBpjC,KAAK,MAC1CxT,KAAK42C,qBAGbM,QAAS,WACLl3C,KAAKi3C,uBACLj3C,KAAK62C,aAET96B,KAAM,WAAA,GAKOvY,GAAO2zC,EAAmBC,EAC3BV,EACK3c,EAAOsd,EAAkBC,EAC1Bp8B,EAPRu7B,EAAaz2C,KAAKy2C,WAClBxgB,EAAS,GACT0gB,EAAQ32C,KAAK22C,KAEjB,KADA32C,KAAKi3C,uBACIzzC,EAAI,EAAG2zC,EAAKR,EAAM91C,OAAQu2C,EAAMD,EAAK,EAAOA,EAAJ3zC,EAAQA,IAAK,CAE1D,IADIkzC,EAAOC,EAAMnzC,GACRu2B,EAAI,EAAGsd,EAAKX,EAAK71C,OAAQy2C,EAAMD,EAAK,EAAOA,EAAJtd,EAAQA,IAChD7e,EAAOw7B,EAAK3c,GAAG7e,KACnB+a,GAAU/a,EACN6e,IAAMud,IACNrhB,GAAUwgB,EAAWv7B,KAGzB1X,KAAM4zC,IACNnhB,GAAUwgB,EAAWC,MAG7B,MAAOzgB,IAEX4gB,UAAW,WACP72C,KAAK+2C,cAAgB,GAAIR,GACzBv2C,KAAK02C,QACL12C,KAAK02C,KAAKv2C,KAAKH,KAAK+2C,eACpB/2C,KAAK22C,MAAMx2C,KAAKH,KAAK02C,SAGzBa,EAAgB31C,EAAMjC,QACtBC,KAAM,SAAUqkC,GACZjkC,KAAKikC,SAAWA,GAEpBU,UAAW,SAAUriB,GAAV,GAIHk1B,GACA9hB,CAJCpT,KAGDk1B,EAAcx3C,KAAKikC,SAAS3hB,GAC5BoT,EAAQpT,EAAKE,YACZg1B,GAAe9hB,GAChB11B,KAAK2kC,UAAUjP,GAEnB11B,KAAK2kC,UAAUriB,EAAKI,iBAGxB4rB,EAAqBqE,EAAQhzC,QAC7BC,KAAM,SAAUC,GACZ8yC,EAAQ7yC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAKy3C,SAAU,EACfz3C,KAAK03C,WAAa,GAAIH,GAAcn2C,EAAEe,MAAMnC,KAAK23C,UAAW33C,QAEhE+wC,MAAO,SAAUh1B,GACb,GAAIjG,GAAYlK,EAAI8E,OAAOhG,SAAU,OAAS4D,UAAWyN,GACzD,OAAO/b,MAAKm2C,SAASrgC,IAEzBqgC,SAAU,SAAUrgC,GAKhB,MAJA9V,MAAKy2C,WAAaz2C,KAAK43C,uBACvB53C,KAAK63C,UAAY,GAAIrB,GAAcx2C,KAAKy2C,YACxCz2C,KAAK03C,WAAW/S,UAAU7uB,EAAU0M,YACpCxiB,KAAKy3C,SAAU,EACRz3C,KAAK63C,UAAU97B,QAE1B47B,UAAW,SAAUr1B,GACjB,GAAI1W,EAAI+mB,WAAWrQ,GAAO,CACtB,GAAI1W,EAAIwqB,aAAa9T,GACjB,MAEJtiB,MAAK63C,UAAUf,WAAWx0B,EAAK1L,UAAUvI,QAAQ,KAAMrO,KAAKy2C,WAAWC,OACvE12C,KAAKy3C,SAAU,MACZ,IAAI7rC,EAAI8qB,QAAQpU,IAAStiB,KAAKy3C,QAAS,CAC1C,GAAIK,GAAS93C,KAAK+3C,QAAQnsC,EAAItI,KAAKgf,KAAUtiB,KAAK+3C,QAAQ91B,KAC1D,OAAO61B,GAAO93C,KAAMsiB,KAG5BmwB,WAAY,WACR,GAAIh5B,GAAIzZ,KAAKH,OACb,OAAO4Z,GAAEY,KAAOZ,EAAEa,cAEtBs9B,qBAAsB,WAClB,MAAI53C,MAAKH,QAAQwa,KAETa,KAAM,IACNw7B,KAAM,MAINx7B,KAAM,IACNw7B,KAAM,UAIlBqB,SACIC,GAAI52C,EAAEsd,KACNqe,GAAI37B,EAAEsd,KACNmtB,MAAOzqC,EAAEsd,KACTu5B,MAAO72C,EAAEsd,KACTw5B,MAAO92C,EAAEsd,KACTy5B,GAAI,SAAUC,EAAS91B,GAAnB,GACI+1B,GAAY,GAAI/J,IAAqBj0B,KAAK,IAC1Ci+B,EAAWD,EAAUlC,SAAS7zB,EAElC,OADA81B,GAAQP,UAAUb,sBAAsBsB,IACjC,GAEXr2B,MAAO,SAAUm2B,GACbA,EAAQP,UAAUX,cAI1B3I,EAAgBoE,EAAQhzC,QACxBoxC,MAAO,SAAUh1B,GACb,MAAO/b,MAAKH,QAAQka,OAAOgC,IAE/B02B,WAAY,WACR,MAAsC,kBAAxBzyC,MAAKH,QAAQka,UAG/Bw+B,EAAe9P,EAAQ9oC,QACvBC,KAAM,SAAUC,GACZ4oC,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAKge,iBAAkB,GAE3B7G,KAAM,WACF,GAAIxL,GAAS3L,KAAK2L,MACdnM,GAAMwC,QAAQE,QAAQkR,KACtBzH,EAAOjB,SAAS4K,YAAY,SAAS,EAAO,MACrC3J,EAAOhK,OAAO62C,OACrB7sC,EAAOhK,OAAO62C,WAItBC,EAAmBhQ,EAAQ9oC,QAC3BC,KAAM,SAAUC,GACZG,KAAKie,OAAQ,EACbwqB,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,IAE/BsX,KAAM,WAAA,GACE1L,GAAOzL,KACP4V,EAAQ5V,KAAK4oC,WAAU,EAC3B5oC,MAAK2L,OAAO4T,YAAYK,KAAK,WACzBnU,EAAKo9B,aAAajzB,OAI9BjW,GAAO+L,GACH8I,cAAe4zB,EACfK,QAASA,EACTF,eAAgBA,EAChB5qB,kBAAmBA,EACnB0rB,eAAgBA,EAChB17B,cAAeA,EACfC,cAAeA,EACfF,iBAAkBA,EAClBG,iBAAkBA,EAClBJ,SAAUA,EACVM,UAAWA,EACX4kC,QAASA,EACT3E,cAAeA,EACfC,WAAYA,EACZC,oBAAqBA,EACrBC,oBAAqBA,EACrBC,gBAAiBA,EACjBC,gBAAiBA,EACjBC,mBAAoBA,EACpBkI,cAAeA,EACfjI,cAAeA,EACfgK,aAAcA,EACdE,iBAAkBA,IAEtB90C,EAAa,aAAc,GAAI0lC,IAC3B1mC,SAAU,GAAIF,IACVE,SAAUE,EAAYK,qBACtBuP,MAAO,cACPimC,aAAc,mBAGtB/0C,EAAa,QAAS,GAAIrC,IACtBlB,QAASm4C,EACT51C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,aAGf9O,EAAa,MAAO,GAAIrC,IACpBlB,QAASq4C,EACT91C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,mBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,uBAAwB,iBAAkBD,IACnD,YACG,SAAU8B,GAAV,GACO5B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOqC,EAASzE,EAAMsC,GAAG6J,OAAQtH,EAAU7E,EAAMsC,GAAGmC,OAAOnE,GAAGD,QAAQwE,QAASxB,EAAcoB,EAAOpB,YAAavB,EAAO2C,EAAO3C,KAAMmB,EAAewB,EAAOxB,aAAclB,EAAa0C,EAAO1C,WAAYqK,EAAM3H,EAAO4H,IAAK6P,EAAazX,EAAOyX,WAAY/b,EAASyB,EAAEzB,OAAQgE,EAAeM,EAAOpB,YAAYc,aAAcQ,EAAiBF,EAAOpB,YAAYsB,eAAgB0d,EAAU,WACha82B,EAAqB/2C,EAAMjC,QAC3BC,KAAM,SAAU2D,GACZvD,KAAKuD,OAASA,GAElBq1C,iBAAkB,SAAUC,GACxB,GAAuGv2B,GAAnGw2B,EAAiB,EAAGC,EAAoB,EAAGC,EAAc,EAAGlmB,EAAa+lB,EAAc/lB,UAC3F,KAAKxQ,EAAOwQ,EAAWtQ,WAAYF,EAAMA,EAAOA,EAAKI,YAC7CJ,GAAQu2B,IACJv2B,EAAK8S,WAAavT,EAClBm3B,IACwB,GAAjB12B,EAAK3L,SACZmiC,IAEAC,IAIZ,OAAIC,GAAc,GAAKlmB,EAAWtQ,WAAW4S,WAAavT,GAAWiR,EAAWoD,UAAUd,WAAavT,EAC5F,EAEAk3B,EAAoBD,GAGnCG,aAAc,SAAUC,EAAY7a,GAAtB,GAIN/b,GACA5e,CAJJ,KAAK26B,GAAQr+B,KAAK44C,iBAAiBM,GAAc,EAC7C,MAAO,KAIX,KAFI52B,EAAO42B,EAAWpmB,WAClBpvB,EAAO1D,KAAKuD,OAAO,GAAGG,MAClBkI,EAAI2sB,OAAOjW,EAAM5e,IAAO,CAC5B,GAAI1D,KAAK44C,iBAAiBt2B,GAAQ,EAC9B,MAAO,KAEXA,GAAOA,EAAKwQ,WAEhB,MAAOxQ,IAEX62B,WAAY,SAAUD,GAClB,GAAuD11C,GAAGod,EAAK0B,EAAM5e,EAAMiwB,EAAvEpwB,EAASvD,KAAKuD,OAAQmwB,EAAa9nB,EAAI8nB,UAC3C,KAAKlwB,EAAI,EAAGod,EAAMrd,EAAO1C,OAAY+f,EAAJpd,EAASA,IAAK,CAI3C,GAHA8e,EAAO42B,EACPx1C,EAAOH,EAAOC,GAAGE,KACjBiwB,EAAapwB,EAAOC,GAAG6I,KACnBiW,GAAQ1W,EAAI2sB,OAAOjW,EAAM5e,IAASgwB,EAAWpR,EAAMqR,GACnD,MAAOrR,EAEX,MAAOA,GAEH,GADAA,EAAO1W,EAAIkoB,aAAaxR,EAAM5e,GAC1B4e,GAAQoR,EAAWpR,EAAMqR,GACzB,MAAOrR,GAInB,MAAO,OAEXxG,YAAa,SAAU+C,GACnB,GAAIrb,GAAGod,CACP,KAAKpd,EAAI,EAAGod,EAAM/B,EAAMhe,OAAY+f,EAAJpd,EAASA,IACrC,GAAIxD,KAAKm5C,WAAWt6B,EAAMrb,IACtB,OAAO,CAGf,QAAO,KAGX41C,EAAkBx3C,EAAMjC,QACxBC,KAAM,SAAU2D,EAAQ81C,GACpBr5C,KAAKyb,OAAS,GAAIk9B,GAAmBp1C,GACrCvD,KAAK2zB,WAAah0B,KAAW4D,EAAO,GAAG8I,KAAMgtC,GAC7Cr5C,KAAKm4B,IAAM50B,EAAO,GAAGG,KAAK,IAE9Bu1B,KAAM,SAAU3W,GACZ,MAAO1W,GAAIqtB,KAAK3W,EAAM1W,EAAI8E,OAAO4R,EAAKyR,cAAe/zB,KAAKm4B,IAAKn4B,KAAK2zB,cAExE2lB,SAAU,SAAU1jC,EAAOiJ,GACnB7e,KAAKyb,OAAOK,YAAY+C,IACxB7e,KAAK8U,MAAMc,GACX5V,KAAKwQ,OAAOqO,IAEZ7e,KAAKy6B,MAAM5b,IAGnBoqB,OAAQ,SAAUrzB,GAAV,GACA4F,GAAYxb,KAAKqZ,aAAeqC,EAAWmrB,kBAAoBnrB,EAAWF,UAC1EqD,EAAQrD,EAAU5F,EAClBiJ,GAAMhe,OAAS,GACfb,KAAKs5C,SAAS1jC,EAAOiJ,IAG7BxF,WAAY,WACR,MAAOrZ,MAAK2L,QAAU3L,KAAK2L,OAAO9L,QAAQwZ,YAE9CohB,MAAO,SAAU5b,GAAV,GAECrb,GAAG45B,EAAG9a,EAAMi3B,EADZC,KAEA7lB,EAAa3zB,KAAK2zB,WAClBmK,EAAYnK,EAAaA,EAAWxtB,YACxC,KAAK3C,EAAI,EAAG45B,EAAIve,EAAMhe,OAAYu8B,EAAJ55B,EAAOA,IAAK,CAGtC,GAFA8e,EAAOzD,EAAMrb,GACb+1C,EAAav5C,KAAKyb,OAAOw9B,aAAa32B,GAE9B1W,EAAIsN,GAAGqgC,EAAY,UACfzb,EAAUxJ,OACVilB,EAAWngB,gBAAgB,SAE3B0E,EAAUn4B,UACV4zC,EAAWngB,gBAAgB,QAE3B0E,EAAUj4B,UACV0zC,EAAWngB,gBAAgB,SAGnCxtB,EAAIS,KAAKktC,EAAY5lB,OAClB,CACH,MAAQ/nB,EAAI8qB,QAAQpU,EAAKwQ,aAAoD,GAArCxQ,EAAKwQ,WAAWI,WAAWryB,QAAmD,SAApCyhB,EAAKwQ,WAAWloB,iBAC9F0X,EAAOA,EAAKwQ,UAEhBymB,GAAav5C,KAAKi5B,KAAK3W,GAE3Bk3B,EAAYr5C,KAAKo5C,GAErBv5C,KAAKy5C,YAAYD,IAErBhpC,OAAQ,SAAUqO,GACd,GAAIrb,GAAG45B,EAAGmc,CACV,KAAK/1C,EAAI,EAAG45B,EAAIve,EAAMhe,OAAYu8B,EAAJ55B,EAAOA,IACjC+1C,EAAav5C,KAAKyb,OAAO09B,WAAWt6B,EAAMrb,IACtC+1C,IACIv5C,KAAK2zB,YAAc3zB,KAAK2zB,WAAWxtB,OACnCyF,EAAIytB,QAAQkgB,EAAYv5C,KAAK2zB,WAAWxtB,OACnCozC,EAAWpzC,MAAM0yB,SAAY0gB,EAAW5lB,WAAW,UACpD/nB,EAAIstB,OAAOqgB,IAGf3tC,EAAIstB,OAAOqgB,KAK3BzkC,MAAO,SAAUc,GAAV,GAGCpS,GAAG+1C,EAFH16B,EAAQnD,EAAWF,UAAU5F,GAC7BwnB,EAAIve,EAAMhe,MAEd,IAAIu8B,EAAI,EACJ,IAAK55B,EAAI,EAAO45B,EAAJ55B,EAAOA,IACf+1C,EAAav5C,KAAKyb,OAAO09B,WAAWt6B,EAAMrb,IACtC+1C,GACA79B,EAAW5G,MAAMc,EAAO2jC,GAAY,IAKpDE,YAAa,SAAU56B,GAEnB,IADA,GAAIyD,GAAMka,EACH3d,EAAMhe,OAAS,GAMlB,GALAyhB,EAAOzD,EAAM66B,MACbld,EAAO3d,EAAMA,EAAMhe,OAAS,GACxByhB,EAAKoQ,iBAAmBpQ,EAAKoQ,gBAAgB0C,WAAavT,GAC1D2a,EAAKzD,YAAYzW,EAAKoQ,iBAEtBpQ,EAAKmW,SAAW+D,EAAK/D,SAAWnW,EAAKoQ,iBAAmB8J,GAAQla,EAAKnc,MAAM0yB,SAAW2D,EAAKr2B,MAAM0yB,QAAS,CAC1G,KAAOvW,EAAKE,YACRga,EAAKzD,YAAYzW,EAAKE,WAE1B5W,GAAI4E,OAAO8R,OAKvBq3B,EAA2BhB,EAAmBh5C,QAC9CC,KAAM,SAAU2D,EAAQq2C,GACpB55C,KAAKuD,OAASA,EACdvD,KAAK45C,eAAiBA,EACtBjB,EAAmB74C,GAAGF,KAAKG,KAAKC,KAAMuD,IAE1Cs2C,kBAAmB,SAAUv3B,GAAV,GAGX9e,GAAG45B,EAAGzE,EAAWr1B,EAAMw2C,EAAgBloC,EAAKmoC,EAAMC,EAAUp5B,EAC5Dq5B,EAAkBtc,EAAUvyB,EAH5BuoB,EAAarR,EAAKqR,WAClBxlB,EAAO/M,EAAE+M,IAGb,IAAKwlB,EAGL,IAAKnwB,EAAI,EAAG45B,EAAIzJ,EAAW9yB,OAAYu8B,EAAJ55B,EAAOA,IAItC,GAHAm1B,EAAYhF,EAAWnwB,GACvBF,EAAOq1B,EAAU9C,SACjBikB,EAAiBnhB,EAAU/hB,UACvB+hB,EAAUC,WAAqB,SAARt1B,EAEvB,IADAsO,EAAMzD,EAAK2rC,GAAkBx3B,EAAKnc,MAAM0yB,SAAS/jB,MAAM,KAClDklC,EAAW,EAAGp5B,EAAMhP,EAAI/Q,OAAmB+f,EAAXo5B,EAAgBA,IAEjD,GADAD,EAAOnoC,EAAIooC,GACPD,EAAKl5C,OAAQ,CAIb,GAHAo5C,EAAmBF,EAAKjlC,MAAM,KAC9B6oB,EAAWxvB,EAAK8rC,EAAiB,GAAGj2C,eACpCoH,EAAQ+C,EAAK8rC,EAAiB,IAC1Btc,GAAY39B,KAAK45C,eACjB,QAEJ,OAAOjc,GAAS1wB,QAAQ,UAAY,EAAIrB,EAAIyoB,MAAMjpB,GAASA,IAM/E8uC,eAAgB,SAAU53B,GAAV,GAGR9e,GAAGod,EAAKxV,EAFR4yB,EAAQ58B,EAAEwK,EAAI+mB,WAAWrQ,GAAQA,EAAKwQ,WAAaxQ,GACnD63B,EAAUnc,EAAMoc,aAAa,qBAAqBC,UAAUC,UAAUjgB,SAE1E,KAAK72B,EAAI,EAAGod,EAAMu5B,EAAQt5C,OAAY+f,EAAJpd,EAASA,IAEvC,GADA4H,EAA+B,aAAvBpL,KAAK45C,eAAgCO,EAAQ32C,GAAG4xB,UAAYp1B,KAAK65C,kBAAkBM,EAAQ32C,IAE/F,MAAO4H,EAGf,OAAO,WAEXyQ,UAAW,SAAUgD,GACjB,GAA4Crb,GAAGod,EAA3CqV,EAASj2B,KAAKk6C,eAAer7B,EAAM,GACvC,KAAKrb,EAAI,EAAGod,EAAM/B,EAAMhe,OAAY+f,EAAJpd,EAASA,IACrC,GAAIyyB,GAAUj2B,KAAKk6C,eAAer7B,EAAMrb,IACpC,MAAO,EAGf,OAAOyyB,IAEXna,YAAa,SAAU+C,GACnB,MAAiC,KAA1B7e,KAAK6b,UAAUgD,MAG1B07B,EAAwBnB,EAAgBz5C,QACxCC,KAAM,SAAU2D,EAAQ81C,EAAQO,GAC5BR,EAAgBt5C,GAAGF,KAAKG,KAAKC,KAAMuD,EAAQ81C,GAC3Cr5C,KAAKq5C,OAASA,EACdr5C,KAAKyb,OAAS,GAAIk+B,GAAyBp2C,EAAQq2C,GAC/CA,IACA55C,KAAK45C,eAAiBp6C,EAAMg7C,YAAYZ,KAGhDN,SAAU,SAAU1jC,EAAOiJ,GAAjB,GACF+6B,GAAiB55C,KAAK45C,eACtB9B,EAAS,OACb93C,MAAK8U,MAAMc,GACPgkC,GAAuD,WAArC55C,KAAKq5C,OAAOlzC,MAAMyzC,KACpC9B,EAAS,UAEb93C,KAAK83C,GAAQj5B,MAGjB47B,EAAmBl5C,EAAW5B,QAC9BC,KAAM,SAAUC,GACZ0B,EAAWzB,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,GACjC4b,OAAQ,GAAIk9B,GAAmB94C,EAAQ0D,QACvCqb,UAAW,WACP,MAAO,IAAIw6B,GAAgBv5C,EAAQ0D,eAK/Cm3C,EAAuBp5C,EAAK3B,QAC5BsM,OAAQ,SAAUnK,EAAI+c,GAClB,GAAIgY,GAAO/0B,EAAG8wB,KAAK5yB,KAAKuL,KACxBsrB,GAAKpjB,QACLojB,EAAKzrB,MAAMpL,KAAKyb,OAAOI,UAAUgD,OAGrC87B,EAAWD,EAAqB/6C,QAChCC,KAAM,SAAUC,GACZyB,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMH,GACxBG,KAAKuL,KAAO/L,EAAMwC,QAAQE,QAAQkR,MAAQ5T,EAAMwC,QAAQuT,MAAQ,oBAAsB,gBACtFvV,KAAKuD,SACGG,MACI,OACA,UAGZ1D,KAAKyb,OAAS,GAAIk+B,GAAyB35C,KAAKuD,OAAQ1D,EAAQ+6C,UAEpEx6C,QAAS,SAAUqe,GACf,GAAI5e,GAAUG,KAAKH,QAAS0D,EAASvD,KAAKuD,OAAQ4C,IAClD,OAAO,IAAIlC,GAAO0a,cAAchf,EAAO8e,GACnCG,UAAW,WAEP,MADAzY,GAAMtG,EAAQg7C,SAAWp8B,EAAiBrT,MACnC,GAAImvC,GAAsBh3C,GAAU4C,MAAOA,GAAStG,EAAQ+6C,cAI/Et8B,WAAY,SAAUxc,EAAIwnC,GACtB,GAAkFC,GAA9E59B,EAAS29B,EAAY39B,OAAQ9L,EAAUG,KAAKH,QAAS+D,EAAW/D,EAAQyD,KAAkB8K,IAC1FvO,GAAQuO,eACRA,IACQ8M,KAAMvP,EAAO9L,QAAQyE,SAASzE,EAAQuO,aAAa,GAAG8M,MACtD9P,MAAOvL,EAAQuO,aAAa,GAAGhD,SAG3Cm+B,EAAan7B,EAAa+M,OAAOtb,EAAQ8gB,MAAQ9gB,EAAQ8gB,MAAQhV,EAAO9L,QAAQ+D,QAChF9B,EAAGuK,MAAOoG,MAAO62B,EAAY72B,QAC7B3Q,EAAG9B,KAAKuL,OACJm+B,cAAe,OACfC,eAAgB,QAChBJ,WAAYA,EACZrrB,OAAQ,WACJ5c,EAAK6V,KAAKxL,EAAQ/H,EAAU5D,KAAKoL,UAErCw+B,gBAAgB,IAEpB9nC,EAAGkK,QAAQ,aAAaoN,YAAY,KAAOxV,GAAUwI,KAAK,KAAKiuC,UAAUhuC,KAAK,eAAgB,MAC9FvK,EAAG8wB,KAAK5yB,KAAKuL,MAAMH,MAAM,cAG7B0vC,EAAYx5C,EAAK3B,QACjBC,KAAM,SAAUC,GACZyB,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMH,GACxBG,KAAKuD,SACGG,MACI,OACA,UAGZ1D,KAAKyb,OAAS,GAAIk+B,GAAyB35C,KAAKuD,OAAQ1D,EAAQ+6C,UAEpE/6C,SAAWk7C,QAAS,WACpB9uC,OAAQ,WACJjM,KAAKg7C,QAAQvnC,SAEjBrT,QAAS,SAAUqe,GACf,GAAI5e,GAAUG,KAAKH,QAAS0D,EAASvD,KAAKuD,OAAQ4C,IAClD,OAAO,IAAIlC,GAAO0a,cAAchf,EAAO8e,GACnCG,UAAW,WAEP,MADAzY,GAAMtG,EAAQg7C,SAAWp8B,EAAiBrT;AACnC,GAAImvC,GAAsBh3C,GAAU4C,MAAOA,GAAStG,EAAQ+6C,cAI/Et8B,WAAY,SAAUxc,EAAIwnC,GACtB,GAAI39B,GAAS29B,EAAY39B,OAAQ/H,EAAW5D,KAAKsD,KAAMzD,EAAUF,KAAWm7C,EAAUh7C,GAAGD,QAASG,KAAKH,SAAUk7C,EAAUl7C,EAAQk7C,OACnIj5C,GAAK9B,KAAKg7C,QAAU,GAAIx7C,GAAMsC,GAAGm5C,YAAYn5C,GACzCo5C,SAAU,KAAOr7C,EAAQyD,KACzBy3C,QAASA,EACT78B,OAAQ,WACJ,GAAIoW,GAAQxyB,EAAGsJ,OACXkpB,IACAhzB,EAAK6V,KAAKxL,EAAQ/H,EAAU0wB,GAEhC3oB,EAAOgK,SAEX2jC,SAAU,SAAUpqC,GAChBA,EAAEsH,iBACF1U,EAAGpB,QAAQ,aAGnBoB,EAAGqK,QAAQE,MACPoG,MAAO62B,EAAY72B,MACnB8L,aAAc,OACfnS,KAAK,KAAKC,KAAK,eAAgB,QAG1C1M,GAAOsE,GACH00C,mBAAoBA,EACpBS,gBAAiBA,EACjBsB,qBAAsBA,EACtBf,yBAA0BA,EAC1BY,sBAAuBA,EACvBE,iBAAkBA,EAClBE,SAAUA,EACVG,UAAWA,IAEf32C,EAAe,SAEPT,MACI,SACA,OAIJA,MAAO,QACP2I,MAAQlG,OAASkrC,WAAY,YAGrC1tC,EAAa,OAAQ,GAAI82C,IACrBt8B,IAAK,IACLC,MAAM,EACN7a,OAAQc,EAAQE,KAChB5B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,YAGftO,EAAe,WAEPT,MACI,KACA,OAIJA,MAAO,QACP2I,MAAQlG,OAASg1C,UAAW,cAGpCx3C,EAAa,SAAU,GAAI82C,IACvBt8B,IAAK,IACLC,MAAM,EACN7a,OAAQc,EAAQG,OAChB7B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,cAGftO,EAAe,cAEPT,MAAO,QACP2I,MAAQlG,OAASo5B,eAAgB,gBAEnC77B,MAAO,QAEbC,EAAa,YAAa,GAAI82C,IAC1Bt8B,IAAK,IACLC,MAAM,EACN7a,OAAQc,EAAQI,UAChB9B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,iBAGftO,EAAe,kBAEPT,MACI,MACA,YAIJA,MAAO,QACP2I,MAAQlG,OAASo5B,eAAgB,oBAGzC57B,EAAa,gBAAiB,GAAI82C,IAC9Bl3C,OAAQc,EAAQK,cAChB/B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,qBAGftO,EAAe,gBAAkBT,MAAO,UACxCC,EAAa,cAAe,GAAI82C,IAC5Bl3C,OAAQc,EAAQM,YAChBhC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,mBAGftO,EAAe,cAAgBT,MAAO,UACtCC,EAAa,YAAa,GAAI82C,IAC1Bl3C,OAAQc,EAAQO,UAChBjC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,iBAGf9O,EAAa,YAAa,GAAIm3C,IAC1BF,QAAS,QACTC,QAAS,QACTv3C,KAAM,YACNX,SAAU,GAAIF,IACVE,SAAUE,EAAYG,oBACtByP,MAAO,aAGf9O,EAAa,YAAa,GAAIm3C,IAC1BF,QAAS,mBACTC,QAAS,kBACTv3C,KAAM,YACNX,SAAU,GAAIF,IACVE,SAAUE,EAAYG,oBACtByP,MAAO,wBAGf9O,EAAa,WAAY,GAAIg3C,IACzBC,QAAS,cACTC,QAAS,aACTv3C,KAAM,WACN8K,eACQ8M,KAAM,kBACN9P,MAAO,YAEfzI,SAAU,GAAIF,IACVE,SAAUE,EAAYI,iBACtBwP,MAAO,iBAGf9O,EAAa,WAAY,GAAIg3C,IACzBC,QAAS,YACTC,QAAS,WACTv3C,KAAM,WACN8K,eACQ8M,KAAM,kBACN9P,MAAO,YAEfzI,SAAU,GAAIF,IACVE,SAAUE,EAAYI,iBACtBwP,MAAO,kBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,sBAAuB,uBAAwBD,IACxD,YACG,SAAU8B,GAAV,GAwSOg6C,GAvSA57C,EAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQsE,EAASzE,EAAMsC,GAAG6J,OAAQtH,EAAU7E,EAAMsC,GAAGmC,OAAOnE,GAAGD,QAAQwE,QAASuH,EAAM3H,EAAO4H,IAAK48B,EAAUxkC,EAAOwkC,QAAShmC,EAAewB,EAAOxB,aAAclB,EAAa0C,EAAO1C,WAAYsB,EAAcoB,EAAOpB,YAAac,EAAed,EAAYc,aAAcQ,EAAiBtB,EAAYsB,eAAgBuX,EAAazX,EAAOyX,WAClY2/B,EAAoBz5C,EAAMjC,QAC1BC,KAAM,SAAU2D,GACZvD,KAAKuD,OAASA,GAElByV,SAAU,SAAUsJ,EAAM9D,GACtB,GAAIhb,GAAGod,EAAK8U,CACZ,KAAKlyB,EAAI,EAAGod,EAAMpC,EAAS3d,OAAY+f,EAAJpd,EAASA,IAExC,GADAkyB,EAAQlX,EAAShb,IACZkyB,IAAU9pB,EAAImnB,iBAAiBzQ,EAAMoT,GACtC,OAAO,CAGf,QAAO,GAEXujB,aAAc,SAAUp6B,GAAV,GAC+Brb,GAAGod,EAAK06B,EAEpCh8C,EAFTiE,EAASvD,KAAKuD,OAAQg4C,IAC1B,KAAK/3C,EAAI,EAAGod,EAAM/B,EAAMhe,OAAY+f,EAAJpd,EAASA,IAAK,CAC1C,IAASlE,EAAIiE,EAAO1C,OAAS,EAAGvB,GAAK,KACjCg8C,EAAY1vC,EAAI2sB,OAAO1Z,EAAMrb,GAAID,EAAOjE,GAAGoE,MAAQmb,EAAMrb,GAAKoI,EAAIivB,sBAAsBhc,EAAMrb,GAAID,EAAOjE,GAAGoE,OADxEpE,KAMxC,IAAKg8C,GAA2C,SAA9BA,EAAU1wC,gBACxB,QAEAxJ,GAAEqC,QAAQ63C,EAAWC,GAAY,GACjCA,EAASp7C,KAAKm7C,GAItB,IADAt7C,KAAKw7C,mBAAmBD,GACnB/3C,EAAI,EAAGod,EAAM26B,EAAS16C,OAAY+f,EAAJpd,EAASA,IACxC,GAAIxD,KAAKgZ,SAASuiC,EAAS/3C,GAAI+3C,GAC3B,OAAQA,EAAS/3C,GAGzB,OAAO+3C,IAEXC,mBAAoB,SAAU38B,GAC1B,GAAIrb,GAAG8e,EAAMnW,CACb,KAAK3I,EAAI,EAAOqb,EAAMhe,OAAV2C,EAAkBA,IAC1B8e,EAAOzD,EAAMrb,GACb2I,EAAUP,EAAIsN,GAAGoJ,EAAM,MAAQA,EAAO1W,EAAIO,QAAQmW,GAClDnW,EAAUA,GAAWP,EAAIirB,KAAK1qB,GAAWA,EAAQqS,SAAS,GAAKrS,EAC3DP,EAAIsN,GAAG/M,EAAS,QAChBmW,EAAOzD,EAAMrb,GAAK2I,IAI9BgtC,WAAY,SAAUD,GAAV,GACkB11C,GAAGod,EAAK0B,EAAM5e,EAAMiwB,EASlC4I,EATRh5B,EAASvD,KAAKuD,OACdy1B,EAAiBptB,EAAIotB,eAAekgB,GACpC7/B,EAAarZ,KAAKH,SAAWG,KAAKH,QAAQwZ,WAC1CoiC,EAAex3C,EAAOqV,UAC1B,KAAK9V,EAAI,EAAGod,EAAMrd,EAAO1C,OAAY+f,EAAJpd,EAASA,IAAK,CAI3C,GAHA8e,EAAO42B,EACPx1C,EAAOH,EAAOC,GAAGE,KACjBiwB,EAAapwB,EAAOC,GAAG6I,KACnBgN,GAAc3V,GAAmB,aAAXA,EAAK,KACvB64B,EAAYkf,EAAa3U,gBAAgBxkB,GACzCia,GAAa3wB,EAAI8nB,WAAW6I,EAAW5I,IACvC,MAAOrR,EAGf,MAAOA,GAAQ1W,EAAIinB,aAAamG,EAAgB1W,IAAO,CACnD,GAAI1W,EAAI2sB,OAAOjW,EAAM5e,IAASkI,EAAI8nB,WAAWpR,EAAMqR,GAC/C,MAAOrR,EAEXA,GAAOA,EAAKwQ,YAGpB,MAAO,OAEXjX,UAAW,SAAUgD,GACjB,GAEsCrb,GAAGod,EAFrCnV,EAAOzL,KAAMm5C,EAAa,SAAU72B,GAChC,MAAO7W,GAAK0tC,WAAWvtC,EAAI+mB,WAAWrQ,GAAQA,EAAKwQ,WAAaxQ,IACjE2T,EAASkjB,EAAWt6B,EAAM,GACjC,KAAKoX,EACD,MAAO,EAEX,KAAKzyB,EAAI,EAAGod,EAAM/B,EAAMhe,OAAY+f,EAAJpd,EAASA,IACrC,GAAIyyB,GAAUkjB,EAAWt6B,EAAMrb,IAC3B,MAAO,EAGf,OAAOyyB,GAAOJ,SAAS7xB,eAE3B8X,YAAa,SAAU+C,GACnB,IAAK,GAAIrb,GAAI,EAAGod,EAAM/B,EAAMhe,OAAY+f,EAAJpd,EAASA,IACzC,IAAKxD,KAAKm5C,WAAWt6B,EAAMrb,IACvB,OAAO,CAGf,QAAO,KAGXk4C,EAAiB95C,EAAMjC,QACvBC,KAAM,SAAU2D,EAAQ81C,GACpBr5C,KAAKuD,OAASA,EACdvD,KAAKq5C,OAASA,EACdr5C,KAAKyb,OAAS,GAAI4/B,GAAkB93C,IAExC01B,KAAM,SAAUd,EAAKxE,EAAY9U,GAA3B,GAKEgb,GAAuD7B,EAA4C7rB,EAAqE3I,EAAGooC,EAJ3KhS,EAAiC,GAAhB/a,EAAMhe,OAAc+K,EAAIioB,kBAAkBhV,EAAM,IAAMjT,EAAIguB,eAAea,MAAM,KAAM5b,EAK1G,KAJIjT,EAAIgrB,SAASgD,KACbA,EAAiBhuB,EAAIioB,kBAAkB+F,IAEvCC,EAAYjuB,EAAIkqB,sBAAsB8D,GAAiB5B,EAAWpsB,EAAI4mB,cAAcqH,EAAU,IAAK1tB,EAAUP,EAAI8E,OAAOkpB,EAAe7F,cAAeoE,EAAKxE,GAC1JnwB,EAAI,EAAOq2B,EAAUh5B,OAAd2C,EAAsBA,IAC9BooC,EAAW/R,EAAUr2B,GACjBoI,EAAI8qB,QAAQkV,IACZhgC,EAAIS,KAAKu/B,EAAUjY,GACfxnB,EAAQ+mB,WAAWryB,SACnB+K,EAAIY,aAAaL,EAASy/B,GAC1Bz/B,EAAUA,EAAQmnB,WAAU,IAEhC0E,EAAWpsB,EAAI4mB,cAAcoZ,GAAY,GAG7Cz/B,EAAQ4sB,YAAY6S,EAEpBz/B,GAAQqW,YACR5W,EAAIksB,SAAS8B,EAAgBztB,EAAS6rB,IAG9CyC,MAAO,SAAU5b,GAEb,QAAS8U,GAAWpwB,GAChB,MAAO5D,MAAW4D,GAAUA,EAAO8I,KAAMgtC,GAH1C,GACC91C,GAKA0sC,EACA0L,EACAC,EAOAC,EACArC,EAESh2C,EAAOod,EAjBRy4B,EAASr5C,KAAKq5C,MAW1B,IAPAr5C,KAAK+rC,kBAAkBltB,GAAO,GAC1BoxB,EAASrkC,EAAIkvB,OAAO,MAAOjc,GAC3B88B,EAAc94C,EAAYQ,aAAa,MAAOrD,KAAKuD,QACnDq4C,EAAkBjoB,EAAWgoB,GACjCv6C,EAAEu7B,KAAKsT,EAAQ,WACXrkC,EAAIS,KAAKrM,KAAM47C,KAEf3L,EAAOpvC,QAAUge,EAAMhe,OAK3B,GAFIg7C,EAAYjwC,EAAIkvB,OAAO,MAAOjc,GAAO,GACrC26B,EAAcx5C,KAAKyb,OAAOw9B,aAAa4C,GACvCrC,EAAY34C,OACZ,IAAS2C,EAAI,EAAGod,EAAM44B,EAAY34C,OAAY+f,EAAJpd,EAASA,IAC/CD,EAASV,EAAYQ,aAAauI,EAAItI,KAAKk2C,EAAYh2C,IAAKxD,KAAKuD,QACjEqI,EAAIS,KAAKmtC,EAAYh2C,GAAImwB,EAAWpwB,QAGxCA,GAASvD,KAAKuD,OAAO,GACrBvD,KAAKi5B,KAAK11B,EAAOG,KAAK,GAAIiwB,EAAWpwB,GAASs4C,IAGtD9P,kBAAmB,SAAUltB,EAAOi9B,GAAjB,GAIXC,GAIAN,EACAre,EACK55B,EACDsjC,CAVR,IAAK9mC,KAAKqZ,eAGN0iC,EAAkBl5C,EAAYQ,aAAa,YAAarD,KAAKuD,SAMjE,IAFIk4C,EAAex3C,EAAOqV,WACtB8jB,EAAIve,EAAMhe,OAAS,EACd2C,EAAI45B,EAAG55B,GAAK,EAAGA,IAChBsjC,EAAkB2U,EAAa3U,gBAAgBjoB,EAAMrb,IACpDsjC,IAGDA,IAAoBjoB,EAAMrb,EAAI,KAC1Bs4C,EACAlwC,EAAIS,KAAKy6B,EAAiBiV,EAAgB1vC,MAE1CT,EAAIytB,QAAQyN,EAAiBiV,EAAgB1vC,KAAKlG,QAG1D0Y,EAAMm9B,OAAOx4C,EAAG,KAGxB6V,WAAY,WACR,MAAOrZ,MAAK2L,QAAU3L,KAAK2L,OAAO9L,QAAQwZ,YAE9C7I,OAAQ,SAAUqO,GACd,GAAIrb,GAAG45B,EAAGmc,EAAY0C,EAAa34C,CAEnC,KADAtD,KAAK+rC,kBAAkBltB,GAAO,GACzBrb,EAAI,EAAG45B,EAAIve,EAAMhe,OAAYu8B,EAAJ55B,EAAOA,IACjC+1C,EAAav5C,KAAKyb,OAAO09B,WAAWt6B,EAAMrb,IACtC+1C,IACAj2C,EAAOsI,EAAItI,KAAKi2C,GACJ,OAARj2C,GAAkBi2C,EAAWjjC,aAAa,UAG1C2lC,EAAcp5C,EAAYQ,aAAaC,EAAMtD,KAAKuD,QAC9C04C,EAAY5vC,KAAKlG,OACjByF,EAAIytB,QAAQkgB,EAAY0C,EAAY5vC,KAAKlG,OAEzC81C,EAAY5vC,KAAK+oB,WACjBxpB,EAAIwN,YAAYmgC,EAAY0C,EAAY5vC,KAAK+oB,YAPjDxpB,EAAIstB,OAAOqgB,KAa3BtQ,OAAQ,SAAUrzB,GACd,GAAInK,GAAOzL,KAAM6e,EAAQjT,EAAIqvB,SAASvf,EAAWmD,MAAMjJ,GAAQhK,EAAIyqB,iBAAiB,EAChF5qB,GAAKgQ,OAAOK,YAAY+C,GACxBpT,EAAK+E,OAAOqO,GAEZpT,EAAKgvB,MAAM5b,MAInBq9B,EAAuBt6C,EAAMjC,QAC7BC,KAAM,SAAU2D,EAAQ81C,GACpB,GAAI5tC,GAAOzL,IACXyL,GAAKlI,OAASA,EACdkI,EAAK4tC,OAASA,EACd5tC,EAAKgQ,OAAS,GAAI4/B,GAAkB93C,IAExCk3B,MAAO,SAAU5b,GAAV,GAICrb,GAAGod,EAAKiW,EAAMjY,EAAWhJ,EACzBzK,EACAstB,EACAxW,EACAk6B,EAsBIC,EA7BJ74C,EAASvD,KAAKuD,OACd0wB,EAASroB,EAAIooB,aAAanV,GAC1Bw9B,EAAY94C,EAAO,GAAGG,KAAK,EAM/B,IAAIuwB,EAAOpzB,OACP,IAAK2C,EAAI,EAAGod,EAAMqT,EAAOpzB,OAAY+f,EAAJpd,EAASA,IACtCye,EAAQgS,EAAOzwB,GACf24C,EAAkBn8C,KAAKqZ,cAAgBpV,EAAOqV,WAAWwtB,gBAAgB7kB,GACpEk6B,IACD1jB,EAAU7sB,EAAItI,KAAK2e,GACJ,MAAXwW,GACA5B,EAAO5U,EAAM6Q,WACblU,EAAY,GAAI3a,GAAOynC,cAAc7U,EAAKhB,SAAS7xB,cAAeq4C,GAClEzmC,EAAQ5V,KAAK2L,OAAO2M,cACpB1C,EAAM2C,WAAW0b,EAAOzwB,IACxBob,EAAUqqB,OAAOrzB,IACVymC,IAAyB,MAAX5jB,GAAmBxW,EAAM0R,WAAW/oB,iBACzD,GAAI8wC,GAAen4C,EAAQvD,KAAKq5C,QAAQ5e,MAAMxY,EAAMiR,aAEpD/nB,EAAUS,EAAI4sB,UAAUvW,EAAOo6B,GAC/BzwC,EAAIS,KAAKlB,EAAS5H,EAAO,GAAG8I,YAKpC+vC,GAAiB,GAAIV,GAAen4C,EAAQvD,KAAKq5C,QACrD+C,EAAezwC,OAAS3L,KAAK2L,OAC7BywC,EAAe3hB,MAAM5b,IAG7BoqB,OAAQ,SAAUrzB,GACd,GAAIiJ,GAAQnD,EAAWF,UAAU5F,EAC5BiJ,GAAMhe,SACP+U,EAAM+sB,mBAAmB/sB,EAAM0G,yBAC/BuC,EAAQnD,EAAWF,UAAU5F,GACxBiJ,EAAMhe,SACPge,EAAQjT,EAAIkqB,sBAAsBlgB,EAAM0G,2BAGhDtc,KAAKy6B,MAAM5b,IAEfxF,WAAY,WACR,MAAOrZ,MAAK2L,QAAU3L,KAAK2L,OAAO9L,QAAQwZ,cAG9CsF,EAAgB8pB,EAAQ9oC,QACxBC,KAAM,SAAUC,GACZA,EAAQ+e,UAAY/e,EAAQ+e,WAC5B,IAAInD,GAAS5b,EAAQ+e,UAAUnD,MAC3BA,IAAU5Y,EAAYQ,aAAa,YAAaoY,EAAOlY,SACvDkY,EAAO6gC,cAAejjC,WAAYxZ,EAAQwZ,aAE9CovB,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/B08C,EAAkBh7C,EAAW5B,QAC7BC,KAAM,SAAUC,GACZ0B,EAAWzB,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,GACjC4b,OAAQ,GAAI4/B,GAAkBx7C,EAAQ0D,QACtCqb,UAAW,WACP,MAAO,IAAI88B,GAAe77C,EAAQ0D,cAKlD5D,GAAOsE,GACHo3C,kBAAmBA,EACnBK,eAAgBA,EAChBQ,qBAAsBA,EACtBv9B,cAAeA,EACf49B,gBAAiBA,IAEjBnB,GACA,KACA,KACA,MAEJj3C,EAAe,gBAEPT,KAAMkI,EAAImW,qBACV1V,MAAQlG,OAASq2C,UAAW,WAG5B94C,MAAO,OACP2I,MACIlG,OACIs2C,QAAS,OACT/J,QAAS,GACTmC,WAAY,GACZ6H,YAAa,OAKrBh5C,MAAO,aACP2I,MACIlG,OACIs2C,QAAS,OACT/J,QAAS,GACTmC,WAAY,GACZ6H,YAAa,OAKrBh5C,KAAM03C,EACN/uC,MACIlG,OACIq2C,UAAW,OACXG,kBAAmB,QAKnCh5C,EAAa,cAAe,GAAI44C,IAC5Bh5C,OAAQc,EAAQS,YAChBnC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,oBAGftO,EAAe,kBAEPT,KAAMkI,EAAImW,qBACV1V,MAAQlG,OAASq2C,UAAW,aAG5B94C,MAAO,OACP2I,MACIlG,OACIusC,QAAS,QACTmC,WAAY,OACZ6H,YAAa,OACbD,QAAS,OAKjB/4C,MAAO,aACP2I,MACIlG,OACIusC,QAAS,QACTmC,WAAY,OACZ6H,YAAa,OACbD,QAAS,OAKjB/4C,KAAM03C,EACN/uC,MACIlG,OACIq2C,UAAW,SACXG,kBAAmB,cAKnCh5C,EAAa,gBAAiB,GAAI44C,IAC9Bh5C,OAAQc,EAAQQ,cAChBlC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,sBAGftO,EAAe,iBAEPT,KAAMkI,EAAImW,qBACV1V,MAAQlG,OAASq2C,UAAW,YAG5B94C,MAAO,OACP2I,MACIlG,OACIs2C,QAAS,QACT/J,QAAS,GACTmC,WAAY,GACZ6H,YAAa,OAKrBh5C,MAAO,aACP2I,MACIlG,OACIs2C,QAAS,QACT/J,QAAS,GACTmC,WAAY,GACZ6H,YAAa,OAKrBh5C,KAAM03C,EACN/uC,MACIlG,OACIq2C,UAAW,QACXG,kBAAmB,cAKnCh5C,EAAa,eAAgB,GAAI44C,IAC7Bh5C,OAAQc,EAAQU,aAChBpC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,qBAGftO,EAAe,gBAEPT,KAAMkI,EAAImW,qBACV1V,MAAQlG,OAASq2C,UAAW,cAG5B94C,MAAO,OACP2I,MACIlG,OACIusC,QAAS,QACTmC,WAAY,OACZ6H,YAAa,OACbD,QAAS,OAKjB/4C,MAAO,aACP2I,MACIlG,OACIusC,QAAS,QACTmC,WAAY,OACZ6H,YAAa,OACbD,QAAS,OAKjB/4C,KAAM03C,EACN/uC,MACIlG,OACIq2C,UAAW,UACXG,kBAAmB,QAKnCh5C,EAAa,cAAe,GAAI44C,IAC5Bh5C,OAAQc,EAAQW,YAChBrC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,qBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,oBAAqB,sBAAuBD,IACrD,YACG,SAAU8B,GAAV,GACO5B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQ+L,EAAWlM,EAAMsC,GAAG6J,OAAQC,EAAMF,EAASG,IAAK48B,EAAU/8B,EAAS+8B,QAASnnC,EAAOoK,EAASpK,KAAMo6C,EAAiBhwC,EAASgwC,eAAgBr5B,EAAYzW,EAAIyW,UAAW3G,EAAahQ,EAASgQ,WAAY/X,EAAe+H,EAAS7I,YAAYc,aACtRi5C,EAAmBnU,EAAQ9oC,QAC3BC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACf4oC,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,IAE/Bg9C,cAAe,SAAU5qC,EAAK2D,GAC1B,GAAmCE,GAA/B6yB,EAAS/8B,EAAI8E,OAAOuB,EAAK,IAS7B,OARA02B,GAAOvT,UAAY,WACnBxf,EAAM2tB,WAAWoF,GACZA,EAAO7V,aACRhd,EAAYF,EAAM0G,wBAClBxG,EAAUxH,UAAY,GACtBwH,EAAUijB,YAAY4P,IAE1BtmB,EAAUsmB,EAAO7V,YACV6V,GAEXmU,WAAY,SAAUlnC,EAAO0lC,GACzB,GAAI1vC,EAAI+qB,QAAQ2kB,GACZ1lC,EAAM2sB,eAAe+Y,OAClB,CACH1lC,EAAM+sB,mBAAmB2Y,EACzB,IAAIyB,GAAYrhC,EAAWF,UAAU5F,GAAO,EAC5C,KAAKmnC,EAAW,CACZ,KAAOzB,EAAUpoB,WAAWryB,SAAW+K,EAAIsN,GAAGoiC,EAAU94B,WAAY,OAChE84B,EAAYA,EAAU94B,UAE1Bu6B,GAAYzB,EAEZ1vC,EAAI+qB,QAAQomB,GACZnnC,EAAM2sB,eAAewa,IAEjBnxC,EAAIgqB,UAAUmnB,KACdA,EAAUzuC,UAAY,UAE1BsH,EAAM2sB,eAAewa,EAAUv6B,YAAcu6B,MAIzDC,WAAY,SAAUpnC,GAClB,GAAIqe,GAAS,sBAAsBnf,MAAM,KAAMmoC,EAAerxC,EAAIkoB,aAAale,EAAMgG,eAAgBqY,GAASipB,EAAatxC,EAAIkoB,aAAale,EAAMyH,aAAc4W,EAChK,OAAOgpB,KAAiBC,IAAeD,GAAgBC,GAE3DC,YAAa,SAAU76B,GACnB,KAAOA,IAAS1W,EAAIuqB,SAAS7T,IAA0C,KAAjC1W,EAAIopB,SAAS1S,EAAK1L,aACpD0L,EAAOA,EAAKI,WAEhB,QAAQJ,GAEZnL,KAAM,WAAA,GACsEoL,GAAQmc,EAAUzoB,EAA4DmnC,EAAWzU,EAAQ8C,EAAI4R,EAASC,EAAKN,EAiB/KzhB,EAIAzI,EACAyqB,EACA/6B,EAvBR5M,EAAQ5V,KAAKqU,WAAYpC,EAAMyJ,EAAW0mB,kBAAkBxsB,GAAgCk2B,EAAwBpgC,EAASjK,mBACjIzB,MAAKkpC,mBAAmBtzB,GACxBonC,EAAah9C,KAAKg9C,WAAWpnC,GAC7BA,EAAMgtB,iBACN+F,EAAS3oC,KAAK68C,cAAc5qC,EAAK2D,GACjChK,EAAIqpB,aAAa0T,EAAOjW,iBACxB9mB,EAAIqpB,aAAa0T,EAAOjmB,aACxB+oB,EAAK7/B,EAAIivB,sBAAsB8N,GAAS,OACxC0U,EAAUzxC,EAAIivB,sBAAsB8N,EAAQ,oBAAoB7zB,MAAM,MAClE22B,EACI7/B,EAAIgqB,UAAU6V,KACd2R,EAAYxxC,EAAI8E,OAAOuB,EAAK,KACxBrG,EAAIqK,KAAKw1B,KACT6R,EAAM1nC,EAAMitB,aACZya,EAAI/kC,WAAWkzB,GACf/vB,EAAW5G,MAAMwoC,EAAK7R,EAAG3Y,aAEzByI,EAAKn6B,EAAE,KAAMqqC,GACA,GAAblQ,EAAG16B,QACH06B,EAAG/qB,SAEHsiB,EAAa2Y,EAAG3Y,WAChByqB,EAAuB9R,EAAG3Y,WAAWtU,SAAS3d,OAC9C2hB,EAAa+6B,EAAuB,GAA6B,GAAxB9R,EAAGvY,WAAWryB,QAAe4qC,EAAGjtB,SAAS,GACtF5S,EAAI6D,YAAY2tC,EAAWtqB,GAC3BlnB,EAAI4E,OAA+B,GAAxB+sC,EAA4B9R,EAAG3Y,WAAa2Y,GACnDjpB,GAAcA,IAAemmB,GAC7ByU,EAAUrkB,YAAYvW,GACtB46B,EAAUrkB,YAAY4P,IAEtByU,EAAU9uC,UAAYw9B,EAE1B71B,EAAOmnC,GAEJC,GAAWr9C,KAAKm9C,YAAYxU,KACnCyU,EAAYxxC,EAAI8E,OAAOuB,EAAK,KAC5BrG,EAAI6D,YAAY2tC,EAAWC,GAC3BD,EAAU9uC,UAAYw9B,EACtBlgC,EAAI4E,OAAOm4B,GACX1yB,EAAOmnC,GAENnnC,IACKw1B,GAAM4R,GACR,GAAI3B,KAAkBh4C,MAAO,QAAS+2B,OAAOkO,IAEjD/yB,EAAM2C,WAAWowB,GACjBpmB,EAAS3W,EAAIkoB,aAAa6U,GAAS8C,EAAK,KAAO4R,EAAUzxC,EAAItI,KAAK+5C,GAAW,MAC7E3hC,EAAW5G,MAAMc,EAAO2M,EAAQy6B,GAChCte,EAAWnc,EAAOmQ,gBACd9mB,EAAIsN,GAAGwlB,EAAU,OAASA,EAASlc,aAAe5W,EAAIsN,GAAGwlB,EAASlc,WAAY,QAC9Ekc,EAAWA,EAASlc,YAExBvM,EAAOsM,EAAOG,YACd1iB,KAAK+wC,MAAMrS,GACX1+B,KAAK+wC,MAAM96B,GAAQhL,OAAO,IACtBW,EAAIsN,GAAGjD,EAAM,OAASA,EAAKuM,aAAe5W,EAAIsN,GAAGjD,EAAKuM,WAAY,QAClEvM,EAAOA,EAAKuM,YAEhB5W,EAAI4E,OAAO+R,GACXF,EAAUqc,IAEdrc,EAAUpM,GACVjW,KAAK88C,WAAWlnC,EAAOK,GACvBL,EAAMkB,UAAS,GACflL,EAAIqrB,SAAShhB,GACbyF,EAAW3E,YAAYnB,IAE3Bm7B,MAAO,SAAUzuB,EAAMziB,GAAhB,GASK29C,GARJ39B,EAAOyC,CAOX,IANIA,EAAKE,YAAc5W,EAAIsN,GAAGoJ,EAAKE,WAAY,OAC3C5W,EAAI4E,OAAO8R,EAAKE,YAEhB5W,EAAI+mB,WAAWrQ,KAAUA,EAAK1L,YAC9B0L,EAAOA,EAAKwQ,YAEZxQ,EAAM,CAEN,IADIk7B,GAAW,EACRl7B,EAAKE,YAA0C,GAA5BF,EAAKE,WAAW7L,UACtC6mC,EAAWA,GAAY5xC,EAAI4pB,iBAAiBlT,EAAK4Q,YAAYryB,OAAS,EACtEyhB,EAAOA,EAAKE,UAMhB,IAJK5W,EAAI+qB,QAAQrU,KAAS,QAAQpL,KAAKoL,EAAKhU,YAAekvC,IACvDp8C,EAAEye,GAAMzT,KAAK,SAASoE,SACtB8R,EAAKhU,UAAY5C,EAASjK,qBAE1B5B,GAAWA,EAAQoL,MACnB,KAAOqX,GAAQzC,GAAM,CACjB,GAAIjU,EAAIsN,GAAGoJ,EAAM,MAAQ1W,EAAIgqB,UAAUtT,GAAO,CAC1C1W,EAAIstB,OAAO5W,EACX,OAEJA,EAAOA,EAAKwQ,gBAM5B2qB,EAAiBhV,EAAQ9oC,QACzBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACf4oC,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,IAE/BsX,KAAM,WAAA,GAGEokB,GACAmiB,EACAx7C,EACAy7C,EALA/nC,EAAQ5V,KAAKqU,UACjBrU,MAAKkpC,mBAAmBtzB,GACpB2lB,EAAK3vB,EAAI8E,OAAOgL,EAAW0mB,kBAAkBxsB,GAAQ,MAErD1T,EAAU1C,EAAMwC,QAAQE,QACxBy7C,EAAQz7C,EAAQkR,MAA0B,GAAlBlR,EAAQ6c,QACpCnJ,EAAMgtB,iBACNhtB,EAAM2tB,WAAWhI,GACjBlZ,EAAUkZ,EAAGzI,YACR6qB,GAAWpiB,EAAG7Y,cAAe9W,EAAImqB,aAAawF,EAAG7Y,eAClDg7B,EAASniB,EAAGjI,WAAU,GACtBoqB,EAAOtoB,UAAY,OACnBxpB,EAAI6D,YAAYiuC,EAAQniB,IAE5B3lB,EAAM4sB,cAAcjH,GACpB3lB,EAAMkB,UAAS,GACflL,EAAIqrB,SAASsE,EAAG7Y,aAAe6Y,GAC/B7f,EAAW3E,YAAYnB,KAG/BjW,GAAO+L,GACHkxC,iBAAkBA,EAClBa,eAAgBA,IAEpB95C,EAAa,kBAAmB,GAAIrC,IAChC6c,IAAK,GACLivB,OAAO,EACPhtC,QAASq9C,KAEb95C,EAAa,kBAAmB,GAAIrC,IAChC6c,IAAK,GACL/d,QAASw8C,MAEfj7C,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBAAiB,oBAAqBD,IAC/C,YACG,SAAU8B,GAAV,GACO5B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQsE,EAASzE,EAAMsC,GAAG6J,OAAQC,EAAM3H,EAAO4H,IAAK6P,EAAazX,EAAOyX,WAAY7Y,EAAcoB,EAAOpB,YAAa4lC,EAAUxkC,EAAOwkC,QAAShmC,EAAewB,EAAOxB,aAAclB,EAAa0C,EAAO1C,WAAY85C,EAAoBp3C,EAAOo3C,kBAAmB7/B,EAAYE,EAAWF,UAAW7X,EAAeM,EAAOpB,YAAYc,aAC5Xi6C,EAAmBvC,EAAkB17C,QACrCC,KAAM,SAAUu4B,GACZn4B,KAAKm4B,IAAMA,CACX,IAAIz0B,GAAO1D,KAAK0D,MACL,MAAPy0B,EAAc,KAAO,KACrBA,EAEJkjB,GAAkBv7C,GAAGF,KAAKG,KAAKC,OAAS0D,KAAMA,MAElDoY,YAAa,SAAU+C,GAAV,GAEL06B,GAAY/1C,EADZg2C,IAEJ,KAAKh2C,EAAI,EAAOqb,EAAMhe,OAAV2C,EAAkBA,IAC1B+1C,EAAav5C,KAAKm5C,WAAWt6B,EAAMrb,IAC/B+1C,GAAc3tC,EAAItI,KAAKi2C,IAAev5C,KAAKm4B,KAC3CqhB,EAAYr5C,KAAKo5C,EAGzB,IAAyB,EAArBC,EAAY34C,OACZ,OAAO,CAEX,IAAI24C,EAAY34C,QAAUge,EAAMhe,OAC5B,OAAO,CAEX,KAAK2C,EAAI,EAAOg2C,EAAY34C,OAAhB2C,GACJg2C,EAAYh2C,GAAGsvB,YAAcymB,EAAWzmB,WADZtvB,IAIhC,GAAIg2C,EAAYh2C,IAAM+1C,EAClB,OAAO,CAGf,QAAO,GAEXN,aAAc,SAAUp6B,GACpB,GAAIy8B,GAAYt7C,KAAKm5C,WAAWt6B,EAAM,GACtC,OAAIy8B,IAAa1vC,EAAItI,KAAKg4C,IAAct7C,KAAKm4B,IAClCmjB,EAEJ,QAGX5P,EAAgB9pC,EAAMjC,QACtBC,KAAM,SAAUu4B,EAAK0lB,GACjB,GAAIpyC,GAAOzL,IACXyL,GAAKgQ,OAAS,GAAImiC,GAAiBzlB,GACnC1sB,EAAK0sB,IAAMA,EACX1sB,EAAKoyC,UAAYA,GAErBC,OAAQ,SAAUx7B,GACd,MAAO1W,GAAIirB,KAAKvU,IAEpBjJ,WAAY,WACR,MAAOrZ,MAAK2L,UAAY3L,KAAK2L,OAAO9L,QAAQwZ,YAEhD4f,KAAM,SAAUpC,EAAMhY,GAClB,GAA+Crb,GAAG8e,EAA9CmpB,EAAK7/B,EAAI8E,OAAOmmB,EAAK9C,cAAe,MAAgBgqB,EAAc/9C,KAAKqZ,aAAepV,EAAOqV,WAAWijB,UAAYn7B,EAAEsd,IAC1H,KAAKlb,EAAI,EAAOqb,EAAMhe,OAAV2C,EAAkBA,IAE1B,GADA8e,EAAOzD,EAAMrb,GACToI,EAAIsN,GAAGoJ,EAAM,MACbuU,EAAKkC,YAAYzW,OAGrB,IAAItiB,KAAK89C,OAAOx7B,GACZ,KAAOA,EAAKE,YACRqU,EAAKkC,YAAYzW,EAAKE,gBAI9B,IAAI5W,EAAIsN,GAAGoJ,EAAM,MAAjB,CACI,KAAOA,EAAKE,YACRipB,EAAG1S,YAAYzW,EAAKE,WAExBqU,GAAKkC,YAAY0S,GACjBnpB,EAAKyW,YAAYlC,GACjBA,EAAOA,EAAKvD,WAAU,GACtBmY,EAAKA,EAAGnY,WAAU,OAGtBmY,GAAG1S,YAAYzW,GACX1W,EAAI8qB,QAAQpU,KACZuU,EAAKkC,YAAY0S,GACZsS,EAAYz7B,IACb1W,EAAIstB,OAAO5W,GAEfmpB,EAAKA,EAAGnY,WAAU,GAGtBmY,GAAGjpB,YACHqU,EAAKkC,YAAY0S,IAGzBuS,YAAa,SAAUz7B,EAAQ1D,GAC3B,IAAK,GAAIrb,GAAI,EAAOqb,EAAMhe,OAAV2C,EAAkBA,IAC9B,GAAIoI,EAAImnB,iBAAiBxQ,EAAQ1D,EAAMrb,IACnC,OAAO,CAGf,QAAO,GAEX+3C,SAAU,SAAUD,EAAWz8B,GAC3B,GAA2B,YAAvBy8B,EAAUlmB,UAAyB,CACnC,GAAIkB,GAAUglB,EAAU54B,WACxB,IAAI4T,GAAW1qB,EAAI8qB,QAAQJ,GACvB,OAAO,CAGX,IADAA,EAAUglB,EAAU5oB,gBAChB4D,GAAW1qB,EAAI8qB,QAAQJ,GACvB,OAAO,EAGf,MAAOt2B,MAAKg+C,YAAY1C,EAAWz8B,IAAUjT,EAAIgrB,SAAS0kB,IAAoC,GAAtBA,EAAU3kC,UAEtFsnC,aAAc,SAAU37B,GACpB,GAAIsY,GAAWhvB,EAAI8uB,gBAAgBpY,EACnC,OAAOlhB,GAAEkhB,GAAM83B,aAAaxf,EAAU,UAE1C9lB,MAAO,SAAUc,GAAV,GAECjG,GAAOmvB,EAAKqb,EAMH32C,EAAO45B,EACRmc,EARR16B,EAAQrD,EAAU5F,EAEtB,IAAIiJ,EAAMhe,OAKN,IAJA8O,EAAQ/D,EAAIkoB,aAAajV,EAAM,IAAK,OACpCigB,EAAMlzB,EAAIkoB,aAAajV,EAAMA,EAAMhe,OAAS,IAAK,OACjD+U,EAAM2sB,eAAe5yB,GACrBiG,EAAM8sB,YAAY5D,GACTt7B,EAAI,EAAG45B,EAAIve,EAAMhe,OAAYu8B,EAAJ55B,EAAOA,IACjC+1C,EAAav5C,KAAKyb,OAAO09B,WAAWt6B,EAAMrb,IAC1C+1C,IACAY,EAAUn6C,KAAKi+C,aAAa1E,GACxBY,EAAQt5C,OACR6a,EAAW5G,MAAMc,EAAOukC,EAAQ3d,OAAO,IAAI,GAE3C9gB,EAAW5G,MAAMc,EAAO2jC,GAAY,KAMxD2E,MAAO,SAAU/lB,EAAKohB,GAElB,IADA,GAAuCtjC,GAAnCwM,EAAO82B,EAAW7mB,gBACfjQ,IAA2B,YAAlBA,EAAK2S,WAA4C,GAAjB3S,EAAK9L,UAAiB/K,EAAImqB,aAAatT,KACnFA,EAAOA,EAAKiQ,eAEhB,IAAIjQ,GAAQ7W,EAAItI,KAAKmf,IAAS0V,EAAK,CAC/B,KAAOohB,EAAW/2B,YACdC,EAAKsW,YAAYwgB,EAAW/2B,WAEhC5W,GAAI4E,OAAO+oC,GACXA,EAAa92B,EAGjB,IADAxM,EAAOsjC,EAAW72B,YACXzM,IAA2B,YAAlBA,EAAKmf,WAA4C,GAAjBnf,EAAKU,UAAiB/K,EAAImqB,aAAa9f,KACnFA,EAAOA,EAAKyM,WAEhB,IAAIzM,GAAQrK,EAAItI,KAAK2S,IAASkiB,EAAK,CAC/B,KAAOohB,EAAWrjB,WACdjgB,EAAKzJ,aAAa+sC,EAAWrjB,UAAWjgB,EAAKuM,WAEjD5W,GAAI4E,OAAO+oC,KAGnB4E,UAAW,SAAU77B,GACjB,MAAOA,IAAQA,EAAKyR,cAAc/gB,OAAS,oBAAoBkE,KAAKtL,EAAItI,KAAKgf,MAAWA,EAAKqR,WAAW/oB,iBAE5GwzC,eAAgB,SAAUC,EAASx/B,GAwB/B,QAASy/B,KACLzkB,EAAU15B,KAAKH,MAzBP,GAQRkzB,GAmBK1vB,EACDkyB,EACA6lB,EA5BJpjB,EAAMn4B,KAAKm4B,IACXyB,EAAiBhuB,EAAI0uB,wBAAwBzb,GAC7Cgb,KACA0f,EAAav5C,KAAKyb,OAAOw9B,aAAap6B,EAuB1C,KAtBK06B,IACDA,EAAa,GAAIqE,GAAwB,MAAPzlB,EAAc,KAAO,MAAM8gB,aAAap6B,IAG1E,cAAc3H,KAAKtL,EAAItI,KAAKs2B,IAC5B1G,EAAa9xB,EAAEkS,IAAIuL,EAAO,SAAUyD,GAChC,MAAO1W,GAAIkoB,aAAaxR,GAAO,UAGnC4Q,EAAatnB,EAAIkqB,sBAAsB8D,GACnCx4B,EAAEq0B,KAAKvC,EAAYtnB,EAAI8qB,SAAS71B,SAChCqyB,EAAa9xB,EAAEq0B,KAAKvC,EAAY9xB,EAAEe,MAAM,SAAUmgB,GAC9C,MAAOtiB,MAAKg+C,YAAY17B,EAAMzD,IAC/B7e,QAEFkzB,EAAWryB,SACZqyB,EAAarU,IAMZrb,EAAI,EAAO0vB,EAAWryB,OAAf2C,EAAuBA,IAC/BkyB,EAAQxC,EAAW1vB,GACnB+3C,IAAahC,IAAe3tC,EAAImnB,iBAAiBwmB,EAAY7jB,KAAW11B,KAAKu7C,SAAS7lB,EAAO7W,GAC5F08B,IAGDhC,GAAcv5C,KAAK89C,OAAOpoB,IAC1Bt0B,EAAEu7B,KAAKjH,EAAMlX,SAAU8/B,GACvB1yC,EAAI4E,OAAOklB,IAEXmE,EAAU15B,KAAKu1B,GAWvB,KARImE,EAAUh5B,QAAUqyB,EAAWryB,QAAUb,KAAKm+C,UAAUvkB,KACxDC,GAAaD,IAEZ2f,IACDA,EAAa3tC,EAAI8E,OAAOkpB,EAAe7F,cAAeoE,GACtDvsB,EAAIY,aAAa+sC,EAAY1f,EAAU,KAE3C75B,KAAKi5B,KAAKsgB,EAAY1f,GACfjuB,EAAImpB,MAAMwkB,EAAW72B,cACxB9W,EAAI4E,OAAO+oC,EAAW72B,YAErB9W,GAAIsN,GAAGqgC,EAAYphB,IACpBvsB,EAAI4sB,UAAU+gB,EAAYphB,GAE9Bn4B,KAAKk+C,MAAM/lB,EAAKohB,IAEpB9e,MAAO,SAAU5b,GAEb,QAAS0/B,KACDC,GACAC,EAASt+C,MACLk+C,QAASG,EACT3/B,MAAO6/B,IALnB,GAA0BF,GAAaE,EAAWL,EAAS/7B,EAAvD9e,EAAI,EAAGi7C,KAAsDrhB,EAAIve,EAAMhe,OAAQimC,EAAkB9mC,KAAKqZ,aAAepV,EAAOqV,WAAWwtB,gBAAkB1lC,EAAEsd,IAS/J,KAAKlb,EAAI,EAAO45B,EAAJ55B,EAAOA,IACf8e,EAAOwkB,EAAgBjoB,EAAMrb,KAAOqb,EAAMrb,GAC1C66C,EAAUzyC,EAAI8uB,gBAAgBpY,GAC1B,KACA,SAECk8B,GAAeH,GAAWG,EAK3BE,EAAUv+C,KAAKmiB,IAJfi8B,IACAG,GAAap8B,GACbk8B,EAAcH,EAMtB,KADAE,IACK/6C,EAAI,EAAOi7C,EAAS59C,OAAb2C,EAAqBA,IAC7BxD,KAAKo+C,eAAeK,EAASj7C,GAAG66C,QAASI,EAASj7C,GAAGqb,QAG7Dqa,OAAQ,SAAU8e,GACd,GAAsFmC,GAAS1O,EAAI7O,EAAGlH,EAAlG+Y,EAAWuJ,EAAGjkB,cAAcoP,yBAA0B0a,EAAY79C,KAAK69C,SAC3E,KAAKpS,EAAKuM,EAAGx1B,WAAYipB,EAAIA,EAAKA,EAAG/oB,YAAa,CAE9C,IADAka,EAAIhxB,EAAI8E,OAAOsnC,EAAGjkB,cAAe8pB,GAAa,KACvCpS,EAAGjpB,YACNkT,EAAQ+V,EAAGjpB,WACP5W,EAAI8qB,QAAQhB,IACRkH,EAAEpa,aACFisB,EAAS1V,YAAY6D,GACrBA,EAAIhxB,EAAI8E,OAAOsnC,EAAGjkB,cAAe8pB,GAAa,MAElDpP,EAAS1V,YAAYrD,IAErBkH,EAAE7D,YAAYrD,EAGlBkH,GAAEpa,YACFisB,EAAS1V,YAAY6D,GAG7Bud,EAAUn6C,KAAKi+C,aAAajG,GACxBmC,EAAQ,IACRvuC,EAAI6D,YAAYg/B,EAAU0L,EAAQ3d,OAAO,IACzC2d,EAAQ3d,OAAOhsB,UAEf5E,EAAI6D,YAAYg/B,EAAUuJ,GAE9BpsC,EAAI4E,OAAOwnC,IAEfxnC,OAAQ,SAAUqO,GAAV,GACA06B,GACK/1C,EAAO45B,CAAhB,KAAS55B,EAAI,EAAG45B,EAAIve,EAAMhe,OAAYu8B,EAAJ55B,EAAOA,IACrC+1C,EAAav5C,KAAKyb,OAAO09B,WAAWt6B,EAAMrb,IACtC+1C,GACAv5C,KAAKk5B,OAAOqgB,IAIxBtQ,OAAQ,SAAUrzB,GAAV,GAMQsF,GALRzP,EAAOzL,KAAM6e,EAAQrD,EAAU5F,GAAQg2B,EAAWh2B,EAAM0G,uBACvDuC,GAAMhe,SACP+U,EAAM+sB,mBAAmBiJ,GACzB/sB,EAAQrD,EAAU5F,GACbiJ,EAAMhe,SACHqa,EAAO0wB,EAAS7X,cAAcmS,eAAe,IACjDtwB,EAAMgG,eAAemd,YAAY7d,GACjC2D,GAAS3D,GACTtF,EAAM2C,WAAW2C,EAAK4X,cAG9BjU,EAAQjT,EAAIqvB,SAASpc,EAAOjT,EAAIyqB,iBAAiB,GAC7C5qB,EAAKgQ,OAAOK,YAAY+C,IACxBpT,EAAKqJ,MAAMc,GACXnK,EAAK+E,OAAOqO,IAEZpT,EAAKgvB,MAAM5b,MAInB8/B,EAAclW,EAAQ9oC,QACtBC,KAAM,SAAUC,GACZA,EAAQ+e,UAAY,GAAI8sB,GAAc7rC,EAAQs4B,KAC9CsQ,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/B++C,EAAWr9C,EAAW5B,QACtBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACf0B,EAAWzB,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,GAAW4b,OAAQ,GAAImiC,GAAiB/9C,EAAQs4B,SAEzF/3B,QAAS,SAAUqe,GACf,MAAO,IAAIkgC,GAAYh/C,EAAO8e,GAAoB0Z,IAAKn4B,KAAKH,QAAQs4B,SAG5Ex4B,GAAOsE,GACH25C,iBAAkBA,EAClBlS,cAAeA,EACfiT,YAAaA,EACbC,SAAUA,IAEdj7C,EAAa,sBAAuB,GAAIi7C,IACpCzmB,IAAK,KACLx1B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,6BAGf9O,EAAa,oBAAqB,GAAIi7C,IAClCzmB,IAAK,KACLx1B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,4BAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,eAAgB,gBAAiBD,IAC1C,YACG,SAAU8B,EAAGC,GAuTV,QAASw9C,GAAkBC,EAAK5W,GAE5B,IADA,GAAI1kC,GAAIs7C,EAAIj+C,OACL2C,MAAQ0kC,EAAOhxB,KAAK4nC,EAAIt7C,MAE/B,MAAOA,GAEX,QAASu7C,GAAcD,EAAK5W,GACxB,GAAIsI,GAAItI,EAAO/wB,KAAK2nC,EACpB,OAAOtO,GAAIA,EAAElP,MAAQ,GA/T5B,GACO9hC,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQwC,EAAQf,EAAEe,MAAO8B,EAASzE,EAAMsC,GAAG6J,OAAQC,EAAM3H,EAAO4H,IAAK6P,EAAazX,EAAOyX,WAAY7Y,EAAcoB,EAAOpB,YAAa4lC,EAAUxkC,EAAOwkC,QAASnnC,EAAO2C,EAAO3C,KAAMmB,EAAewB,EAAOxB,aAAc22C,EAAkBn1C,EAAOm1C,gBAAiBT,EAAqB10C,EAAO00C,mBAAoBn9B,EAAYE,EAAWF,UAAWqrB,EAAoBnrB,EAAWmrB,kBAAmBljC,EAAeM,EAAOpB,YAAYc,aAAcvB,EAAO5C,EAAM4C,KAC1f48C,EAAgB,UAChBC,EAAiB,YACjBC,EAAqB,mBACrBC,EAAmBv9C,EAAMjC,QACzBs5C,aAAc,SAAUC,GACpB,MAAOttC,GAAIkoB,aAAaolB,GAAa,SAGzCkG,EAAgBx9C,EAAMjC,QACtBC,KAAM,WACFI,KAAKyb,OAAS,GAAI0jC,IAEtB1kB,MAAO,SAAU7kB,EAAO+d,GAAjB,GAEC0rB,GAASptC,EAAK2M,EAAWsf,EAAG3b,EAcxB+8B,EACK97C,EAhBTqb,EAAQ7e,KAAKqZ,WAAawtB,EAAkBjxB,GAAS4F,EAAU5F,EAEnE,IAAI+d,EAAWrlB,UAAW,CActB,IAbA2D,EAAMyJ,EAAW0mB,kBAAkBxsB,GACnCypC,EAAU3jC,EAAW+rB,WAAW7xB,GAChCA,EAAMgtB,iBACN1E,EAAItyB,EAAI8E,OAAOuB,EAAK,IAAK0hB,GACzB/d,EAAM2tB,WAAWrF,GACjB3b,EAAS2b,EAAEpL,WACa,KAApBlnB,EAAItI,KAAKif,IACT3W,EAAI6D,YAAYyuB,EAAG3b,GAEnB3W,EAAIgqB,UAAUrT,IACd3W,EAAI4E,OAAO+R,GAEX+8B,EAAMphB,EACD16B,EAAI,EAAO67C,EAAQx+C,OAAZ2C,EAAoBA,IAChCoI,EAAI6D,YAAY4vC,EAAQ77C,GAAI87C,GAC5BA,EAAMD,EAAQ77C,EAEd67C,GAAQx+C,SACR+K,EAAIY,aAAayF,EAAIi0B,eAAe,UAAWmZ,EAAQ,IACvDzzC,EAAI6D,YAAYwC,EAAIi0B,eAAe,UAAWmZ,EAAQ,IACtDzpC,EAAM2sB,eAAe8c,EAAQ,IAC7BzpC,EAAM8sB,YAAY2c,EAAQA,EAAQx+C,OAAS,SAG/C+d,GAAY,GAAIw6B,KAAmB11C,MAAO,OAASiwB,GACnD/U,EAAUnD,OAASzb,KAAKyb,OACxBmD,EAAU6b,MAAM5b,MAIxB0gC,EAAgB9W,EAAQ9oC,QACxBC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXH,GAAQ+e,WACJqqB,OAAQ,SAAUrzB,GACd,GAAIiJ,GAAQpT,EAAK4N,aAAewtB,EAAkBjxB,GAAS4F,EAAU5F,EACrE,IAAIwjC,KAAmB11C,MAAO,QAAS8M,OAAOqO,KAGtD7e,KAAKH,QAAUA,EACf4oC,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/B2/C,EAAc/W,EAAQ9oC,QACtBC,KAAM,SAAUC,GACZ,GAAI4L,EACJzL,MAAKH,QAAUA,EACf4oC,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK4e,UAAY,GAAIwgC,GAChBv/C,EAAQ4/C,IAITz/C,KAAKmX,KAAO,WACRnX,KAAK4e,UAAUvF,WAAa5N,GAAQA,EAAK4N,aACzCrZ,KAAK4e,UAAU6b,MAAM56B,EAAQ+V,OACzBrC,KAAM1T,EAAQ4/C,IACdnxC,UAAWzO,EAAQqb,MAAQrb,EAAQ4/C,IACnCpnC,OAAQxY,EAAQwY,WARxBrY,KAAK2zB,WAAa,KAClB3zB,KAAKie,OAAQ,IAYrByhC,gBAAiB,WACb,MAAOlgD,GAAMmD,SAAS,ipCAA40C2B,SAAUtE,KAAK2L,OAAO9L,QAAQyE,YAEp4C6S,KAAM,WAAA,GAKE0H,GACAqf,EACAyhB,EACAC,EAPAt7C,EAAWtE,KAAK2L,OAAO9L,QAAQyE,QACnCtE,MAAK6/C,aAAe,GACpB7/C,KAAK8/C,OAAS9/C,KAAK4oC,WAAU,GAC7B5oC,KAAK4e,UAAUvF,WAAarZ,KAAKqZ,aAC7BwF,EAAQrD,EAAUxb,KAAK8/C,QACvB5hB,EAAIrf,EAAMhe,OAASb,KAAK4e,UAAUnD,OAAOw9B,aAAap6B,EAAM,IAAM,KAClE8gC,EAAM9gC,EAAMhe,QAAgC,OAAtB+K,EAAItI,KAAKub,EAAM,IACrC+gC,EAAS5/C,KAAK+oC,aAAa/oC,KAAK0/C,mBAChCjtC,MAAOnO,EAASe,WAChBoO,MAAOtR,EAAMnC,KAAK+/C,OAAQ//C,MAC1BggD,SAAS,IAET9hB,IACAl+B,KAAK8/C,OAAOnd,mBAAmBzE,GAC/Brf,EAAQrD,EAAUxb,KAAK8/C,SAE3B9/C,KAAK6/C,aAAe7/C,KAAKqH,SAASwX,GAClC+gC,EAAOxzC,KAAK,oBAAoBgM,MAAMjW,EAAMnC,KAAKigD,OAAQjgD,OAAO8+B,MAAM1yB,KAAK,mBAAmBgM,MAAMjW,EAAMnC,KAAK+/C,OAAQ//C,OAAO8+B,MAAM1yB,KAAK,uBAAuBqJ,QAAQtT,EAAMnC,KAAKkgD,SAAUlgD,OAAO8+B,MAAM1yB,KAAK,sBAAsBwH,IAAI5T,KAAKmgD,QAAQjiB,IAAIY,MAAM1yB,KAAK,uBAAuBwH,IAAI5T,KAAK6/C,cAAc/gB,MAAM1yB,KAAK,wBAAwBwH,IAAIsqB,EAAIA,EAAEzrB,MAAQ,IAAIqsB,MAAM1yB,KAAK,yBAAyBC,KAAK,UAAW6xB,EAAgB,UAAZA,EAAE7lB,QAAqB,GAAOymB,MAAM1yB,KAAK,2BAA2B68B,QAAQ0W,GAChf3/C,KAAKogD,QAAUR,EAAOhtB,KAAK,eAAeytB,SAASptC,OACnD7R,EAAE,qBAAsBw+C,GAAQjqC,QAAQ4uB,UAE5C2b,SAAU,SAAUhxC,GAChB,GAAI9M,GAAO5C,EAAM4C,IACb8M,GAAEiH,SAAW/T,EAAKk+C,MAClBtgD,KAAKigD,OAAO/wC,GACLA,EAAEiH,SAAW/T,EAAKm+C,KACzBvgD,KAAK+/C,OAAO7wC,IAGpB+wC,OAAQ,SAAU/wC,GAAV,GAGAuD,GAAOyI,EAAM7C,EAFblN,EAAUnL,KAAKogD,QAAQj1C,QACvBoI,EAAOnS,EAAE,qBAAsB+J,GAASyI,MAExC4sC,EAAYp/C,EAAE,sBAAuB+J,EACrCoI,IAAQA,GAAQyrC,IACZzrC,EAAKtG,QAAQ,KAAO,IAAM,kBAAkBiK,KAAK3D,KACjDA,EAAO,UAAYA,GAEvBvT,KAAK2zB,YAAepgB,KAAMA,GAC1Bd,EAAQrR,EAAE,uBAAwB+J,GAASyI,MACvCnB,IACAzS,KAAK2zB,WAAWlhB,MAAQA,GAExB+tC,EAAUtnC,GAAG,cACbgC,EAAOslC,EAAU5sC,MACZsH,GAASlb,KAAK6/C,aAER3kC,GAAQA,IAASlb,KAAK6/C,eAC7B7/C,KAAK2zB,WAAWrlB,UAAY1C,EAAIopB,SAAS9Z,IAFzClb,KAAK2zB,WAAWrlB,UAAYiF,GAKpC8E,EAASjX,EAAE,wBAAyB+J,GAAS+N,GAAG,YAChDlZ,KAAK2zB,WAAWtb,OAASA,EAAS,SAAW,KAC7CrY,KAAK4e,UAAU6b,MAAMz6B,KAAK8/C,OAAQ9/C,KAAK2zB,aAE3C3zB,KAAK+/C,OAAO7wC,GACRlP,KAAKke,QACLle,KAAKke,UAGb6hC,OAAQ,SAAU7wC,GACdA,EAAEsH,iBACFxW,KAAKogD,QAAQrvC,UACbnF,EAAIsoB,mBAAmBxY,EAAW0mB,kBAAkBpiC,KAAK8/C,SAASnqC,QAClE3V,KAAK6oC,aAAa7oC,KAAK8/C,SAE3BK,QAAS,SAAUM,GACf,MAAIA,GACOA,EAAOnqC,aAAa,OAAQ,GAEhC0oC,GAEX33C,SAAU,SAAUwX,GAAV,GAEFrb,GADA0X,EAAO,EAEX,KAAK1X,EAAI,EAAOqb,EAAMhe,OAAV2C,EAAkBA,IAC1B0X,GAAQ2D,EAAMrb,GAAGoT,SAErB,OAAOhL,GAAIopB,SAAS9Z,GAAQ,KAEhCva,KAAM,WACF,GAAIiV,GAAQ5V,KAAK4oC,WAAU,EAC3B5oC,MAAK4e,UAAU6b,MAAM7kB,EAAO5V,KAAK2zB,YACjC3zB,KAAK6oC,aAAajzB,MAGtB8qC,EAAkBjY,EAAQ9oC,QAC1BC,KAAM,SAAUC,GACZ4oC,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK4e,UAAY,GAAIwgC,IAEzBjoC,KAAM,WAAA,GAKEvB,GACA+qC,EACAC,EANAC,EAAe7gD,KAAK8gD,YACnBD,KAGDjrC,EAAQ5V,KAAKqU,WACbssC,EAAa,GAAInhD,GAAMsC,GAAG6J,OAAOo2B,OACjC6e,EAAYhrC,EAAMitB,aACtB+d,EAAU/pC,SAASgqC,EAAalxC,MAAM2S,KAAMu+B,EAAalxC,MAAMoG,QAC/D6qC,EAAUte,OAAOue,EAAa/hB,IAAIxc,KAAMu+B,EAAa/hB,IAAI/oB,QACzDH,EAAQ5V,KAAK4oC,YACb+X,EAAW9a,IAAI+a,GACf5gD,KAAK4e,UAAU6b,MAAMmmB,GAAartC,KAAMvT,KAAK+gD,mBAAmBF,EAAa3lC,QAC7EylC,EAAWnwC,OAAOowC,GAClB5gD,KAAK6oC,aAAajzB,KAEtBkrC,WAAY,WAAA,GACJlrC,GAAQ5V,KAAKqU,WACb2sC,EAAY,GAAIC,IAChB3+B,KAAM1M,EAAMgG,eACZ7F,OAAQH,EAAM0H,YACd4jC,aAAc,SAAU5+B,GACpB,MAAOA,IAA2B,MAAnB1W,EAAItI,KAAKgf,MAG5B6+B,EAAY,GAAIC,GAAqBJ,EACzC,OAAOG,GAAUL,cAErBlnC,eAAgB,WACZ,QAAS5Z,KAAK8gD,cAElBC,mBAAoB,SAAU15C,GAC1B,GAAIg6C,GAAcrhD,KAAKshD,mBAAmBj6C,EAC1C,OAAOg6C,GAAch6C,EAAWrH,KAAKuhD,uBAAuBl6C,IAEhEi6C,mBAAoB,SAAUj6C,GAC1B,MAAO43C,GAAe/nC,KAAK7P,IAE/Bk6C,uBAAwB,SAAUl6C,GAC9B,MAAO23C,GAAgB33C,KAG3Bm6C,EAAalgD,EAAK3B,QAClBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACfG,KAAKyb,OAAS,GAAIk9B,KAAsBj1C,MAAO,QAC/CpC,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMoB,EAAEzB,OAAOE,GAAWO,QAASm/C,MAEzDjhC,WAAY,SAAUxc,EAAIjC,GACtByB,EAAKxB,GAAGwe,WAAWve,KAAKC,KAAM8B,EAAIjC,GAClCiC,EAAGwK,SAAS,qBAEhBL,OAAQ,SAAUnK,EAAI+c,GAClB/c,EAAGgd,YAAY,oBAAqB9e,KAAKyb,OAAOK,YAAY+C,IAAQzF,YAAY,oBAGpFgoC,EAAuBx/C,EAAMjC,QAC7BC,KAAM,SAAUohD,GACZhhD,KAAKghD,UAAYA,EACjBhhD,KAAK2P,MAAQ8xC,IACbzhD,KAAK8+B,IAAM2iB,IACXzhD,KAAKkb,KAAO,IAEhB4lC,WAAY,WAAA,GAIA5lC,GAKA0hB,EAUI8kB,EACAC,EAnBRr/B,EAAOtiB,KAAKghD,UAAU1+B,KACtBvM,EAAS/V,KAAKghD,UAAUjrC,MAC5B,IAAInK,EAAI+mB,WAAWrQ,IAEf,GADIpH,EAAOoH,EAAKsQ,KAAKuV,UAAU,EAAGpyB,GAC9B,SAASmB,KAAKtL,EAAIopB,SAAS9Z,IAC3B,WAEc,KAAXnF,IACH6mB,EAAIhxB,EAAIivB,sBAAsBvY,EAAM1W,EAAIoW,eACxC4a,GAAKA,EAAElK,iBACP1yB,KAAKghD,UAAUphD,MAAO0iB,KAAMsa,EAAElK,kBAgBtC,OAbA1yB,MAAKghD,UAAUhd,SAAS5iC,EAAEe,MAAMnC,KAAK4hD,WAAY5hD,OAC5CA,KAAK8+B,IAAI+iB,UACV7hD,KAAKghD,UAAYhhD,KAAKghD,UAAUc,MAAM9hD,KAAK8+B,KAC3C9+B,KAAKghD,UAAUhd,SAAS5iC,EAAEe,MAAMnC,KAAK+hD,aAAc/hD,OAC9CA,KAAKgiD,oBACFN,EAAoB1hD,KAAKghD,UAAUiB,cAAcjiD,KAAK2P,OACtDgyC,EAAsB,GAAIO,GAAsBR,GACpDC,EAAoB3d,SAAS5iC,EAAEe,MAAMnC,KAAKmiD,qBAAsBniD,OAC3DA,KAAKgiD,oBACNhiD,KAAK2P,MAAQ8xC,OAIrBzhD,KAAK2P,MAAMkyC,QACJ,MAGHlyC,MAAO3P,KAAK2P,MACZmvB,IAAK9+B,KAAK8+B,IACV5jB,KAAMlb,KAAKkb,OAIvB8mC,gBAAiB,WACb,MAAO/C,GAAe/nC,KAAKlX,KAAKkb,OAAS,WAAWhE,KAAKlX,KAAKkb,OAElE0mC,WAAY,SAAU1mC,EAAMoH,GACxB,GAAI9e,GAAIq7C,EAAkB3jC,EAAMgkC,EAChC,OAAI17C,GAAI,IACJxD,KAAK8+B,IAAIxc,KAAOA,EAChBtiB,KAAK8+B,IAAI/oB,OAASvS,EAAI,GACf,GAHX,GAMJu+C,aAAc,SAAU7mC,EAAMoH,GAAhB,GACN9e,GAAIq7C,EAAkB3jC,EAAM,MAC5BknC,EAAK5+C,EAAI,CAIb,OAHAxD,MAAKkb,KAAOA,EAAKitB,UAAUia,GAAMpiD,KAAKkb,KACtClb,KAAK2P,MAAM2S,KAAOA,EAClBtiB,KAAK2P,MAAMoG,OAASqsC,EAChB5+C,EAAI,IACG,EADX,GAIJ2+C,qBAAsB,SAAUjnC,EAAMoH,EAAMvM,GAAtB,GACdvS,GAAIu7C,EAAc7jC,EAAM,MACxBknC,EAAK5+C,CAOT,OANU,KAANA,IACA4+C,EAAKlnC,EAAKra,QAEdb,KAAKkb,KAAOlb,KAAKkb,KAAKitB,UAAUia,GAChCpiD,KAAK2P,MAAM2S,KAAOA,EAClBtiB,KAAK2P,MAAMoG,OAASqsC,GAAe,EAATrsC,GACtBvS,EAAI,IACG,EADX,KAeJi+C,EAAS,WACT,OACIn/B,KAAM,KACNvM,OAAQ,KACR8rC,MAAO,WACH,MAAqB,QAAd7hD,KAAKsiB,MAAiC,OAAhBtiB,KAAK+V,UAI1CssC,EAAmBzgD,EAAMjC,QACzBC,KAAM,SAAUC,GACZG,KAAKsiB,KAAOziB,EAAQyiB,KACpBtiB,KAAK+V,OAASlW,EAAQkW,SAAW1U,EAAYuK,EAAI+mB,WAAW3yB,KAAKsiB,OAAStiB,KAAKsiB,KAAKzhB,QAAU,EAAIhB,EAAQkW,OAC1G/V,KAAKkhD,aAAerhD,EAAQqhD,cAAgBlhD,KAAKkhD,cAAgB9/C,EAAEsd,MAEvEslB,SAAU,SAAUC,GACXA,IAGLjkC,KAAKsiD,QAAS,EACdtiD,KAAKuiD,UAAUte,EAAUjkC,KAAKsiB,KAAMtiB,KAAK+V,UAE7CwsC,UAAW,SAAUte,EAAU3hB,EAAMvM,GAA1B,GAKCmF,GAMAsnC,EAIJvsC,EAEIsM,CAhBR,IAAKD,IAAQtiB,KAAKsiD,OAAlB,CAGA,GAAsB,IAAlBhgC,EAAK3L,SASL,MAFI6rC,GAAWxiD,KAAKwiD,SAASlgC,GAC7BtiB,KAAKsiD,OAAStiD,KAAKsiD,QAAUtiD,KAAKkhD,aAAasB,GACxCxiD,KAAKuiD,UAAUte,EAAUue,EAGpC,IAXQtnC,EAAOoH,EAAKsQ,KACZ7c,IAAW1U,IACX6Z,EAAOlb,KAAKyiD,QAAQvnC,EAAMnF,IAE9B/V,KAAKsiD,OAASre,EAAS/oB,EAAMoH,EAAMvM,MAAY,EAM/CE,EAAOjW,KAAKiW,KAAKqM,IAChBrM,EAED,IADIsM,EAASD,EAAKwQ,YACV7c,GAAQrK,EAAIgrB,SAASrU,IACzBtM,EAAOjW,KAAKiW,KAAKsM,GACjBA,EAASA,EAAOuQ,UAGxB9yB,MAAKsiD,OAAStiD,KAAKsiD,QAAUtiD,KAAKkhD,aAAajrC,GAC/CjW,KAAKuiD,UAAUte,EAAUhuB,KAE7BgsC,cAAe,SAAUxoC,GACrB,MAAOrY,GAAEzB,QACL2iB,KAAMtiB,KAAKsiB,KACXvM,OAAQ/V,KAAK+V,OACbmrC,aAAclhD,KAAKkhD,cACpBznC,QAEP+oC,SAAU,SAAUlgC,KAEpBrM,KAAM,SAAUqM,KAEhBmgC,QAAS,SAAUvnC,EAAMnF,OAGzBkrC,EAAuBoB,EAAiB1iD,QACxC8iD,QAAS,SAAUvnC,EAAMwnC,GACrB,MAAOxnC,GAAKitB,UAAU,EAAGua,IAE7BzsC,KAAM,SAAUqM,GACZ,MAAOA,GAAKoQ,iBAEhB8vB,SAAU,SAAUlgC,GAChB,MAAOA,GAAK4T,WAEhB4rB,MAAO,SAAUjiD,GACb,GAAI4Z,GAAIzZ,KAAKiiD,cAAcpiD,EAC3B,OAAO,IAAIohD,GAAqBxnC,MAGpCyoC,EAAwBG,EAAiB1iD,QACzC8iD,QAAS,SAAUvnC,EAAMwnC,GACrB,MAAOxnC,GAAKitB,UAAUua,IAE1BzsC,KAAM,SAAUqM,GACZ,MAAOA,GAAKI,aAEhB8/B,SAAU,SAAUlgC,GAChB,MAAOA,GAAKE,YAEhBs/B,MAAO,SAAUjiD,GACb,GAAI4Z,GAAIzZ,KAAKiiD,cAAcpiD,EAC3B,OAAO,IAAIqiD,GAAsBzoC,KAGzC9Z,GAAOH,EAAMsC,GAAG6J,QACZwzC,iBAAkBA,EAClBC,cAAeA,EACfG,cAAeA,EACfC,YAAaA,EACbkB,gBAAiBA,EACjBc,WAAYA,EACZJ,qBAAsBA,EACtBH,qBAAsBA,EACtBiB,sBAAuBA,IAE3Bv+C,EAAa,aAAc,GAAIrC,IAC3B6c,IAAK,IACLC,MAAM,EACNhe,QAASo/C,EACT78C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,mBAGf9O,EAAa,SAAU,GAAI69C,IACvBrjC,IAAK,IACLC,MAAM,EACNgvB,OAAO,EACPzqC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,mBAGf9O,EAAa,WAAY,GAAIrC,IACzB6c,KACI/b,EAAKk+C,MACLl+C,EAAKugD,UAET1rC,iBAAiB,EACjB7W,QAASsgD,MAEf/+C,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,eACH,oBACA,eACDD,IACL,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQsE,EAASzE,EAAMsC,GAAG6J,OAAQ9I,EAAcoB,EAAOpB,YAAa+I,EAAM3H,EAAO4H,IAAKlI,EAAed,EAAYc,aAAclB,EAAewB,EAAOxB,aAAciZ,EAAazX,EAAOyX,WAAY+sB,EAAUxkC,EAAOwkC,QAAS2W,EAAgBn7C,EAAOm7C,cAAe5jC,EAAYE,EAAWF,UAAWpZ,EAAO5C,EAAM4C,KAAMwgD,EAAiB,qBAAsBC,EAAmB,uBACnZC,EAAcra,EAAQ9oC,QACtBC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXyoC,GAAQ3oC,GAAGF,KAAKG,KAAK0L,EAAM5L,GAC3B4L,EAAKmT,UAAY,GAAIwgC,GACrB3zC,EAAKwS,OAAQ,EACbxS,EAAKkoB,eAETnuB,WAAY,SAAUu9C,EAAMntC,GAAhB,GACJ+d,GAAa3zB,KAAK2zB,WAClB1hB,EAAMyJ,EAAW0mB,kBAAkBxsB,EACvC,IAAI+d,EAAWpgB,MAA2B,WAAnBogB,EAAWpgB,KAAmB,CACjD,IAAKwvC,EAWD,MAVAA,GAAOn3C,EAAI8E,OAAOuB,EAAK,KAAOsB,KAAMogB,EAAWpgB,OAC/CwvC,EAAKz0C,UAAYqlB,EAAWrlB,UAC5BsH,EAAMgtB,iBACNhtB,EAAM2tB,WAAWwf,GACZA,EAAKrgC,aACN9W,EAAI6D,YAAYwC,EAAIi0B,eAAe,UAAW6c,GAElDntC,EAAM4sB,cAAcugB,GACpBntC,EAAM8sB,YAAYqgB,GAClBrnC,EAAW3E,YAAYnB,IAChB,CAEPhK,GAAIS,KAAK02C,EAAMpvB,GAGvB,OAAO,GAEX+rB,gBAAiB,SAAUsD,GACvB,MAAOxjD,GAAMmD,SAAS,ovBAClB2B,SAAUtE,KAAK2L,OAAO9L,QAAQyE,SAC9B0+C,YAAaA,KAGrBriD,KAAM,WACF,GAAI8K,GAAOzL,KAAM4V,EAAQnK,EAAKm9B,WAC9B5oC,MAAK4e,UAAU6b,MAAM7kB,EAAO5V,KAAK2zB,YACjCloB,EAAKo9B,aAAajzB,IAEtBuB,KAAM,WAOF,QAASsjB,GAAMvrB,GACX,GAAI/D,GAAUy0C,EAAOz0C,QAASoI,EAAOpI,EAAQiB,KAAKw2C,GAAgBhvC,MAAMvF,QAAQ,KAAM,OAAQC,EAAYnD,EAAQiB,KAAKy2C,GAAkBjvC,KACzInI,GAAKkoB,YACDpgB,KAAMA,EACNjF,UAAyB,KAAdA,EAAmBA,EAAYiF,GAE9C0vC,EAAUx3C,EAAKjG,WAAWu9C,EAAMntC,GAChCnC,EAAMvE,GACFzD,EAAKyS,QACLzS,EAAKyS,SAGb,QAASzK,GAAMvE,GACXA,EAAEsH,iBACFopC,EAAO7uC,UACPnF,EAAIsoB,mBAAmBxY,EAAW0mB,kBAAkBxsB,IAAQD,QACvDstC,GACDx3C,EAAKo9B,aAAajzB,GAG1B,QAASstC,GAAQh0C,GACTA,EAAEiH,SAAW/T,EAAKk+C,MAClB7lB,EAAMvrB,GACCA,EAAEiH,SAAW/T,EAAKm+C,KACzB9sC,EAAMvE,GA9Bd,GAAiK0wC,GAA7Jn0C,EAAOzL,KAAM4V,EAAQnK,EAAKm9B,YAAa/pB,EAAQrD,EAAU5F,GAAQqtC,GAAU,EAAOF,EAAOlkC,EAAMhe,OAASb,KAAK4e,UAAUnD,OAAOw9B,aAAap6B,EAAM,IAAM,KAAchf,EAAU4L,EAAKE,OAAO9L,QAASyE,EAAWzE,EAAQyE,SAAU2W,EAAcpb,EAAQob,YAAa+nC,KAAiBxjD,EAAMsC,GAAGqhD,aAAeloC,GAAeA,EAAYmoC,WAAanoC,EAAYmoC,UAAUC,OAAShiD,GAAYuZ,GAC5XnI,MAAOnO,EAASkB,WAChBw6C,SAAS,EACT3wC,UAAW2zC,EAEnBhjD,MAAKkpC,mBAAmBtzB,GA4BxBgF,EAAcnH,MAAQA,EAClBuvC,IACApoC,EAAclS,MAAQ,KAE1Bk3C,EAAS5/C,KAAK+oC,aAAat9B,EAAKi0C,gBAAgBsD,GAAcpoC,GAAekE,YAAY,uBAAwBkkC,GAAa52C,KAAK,oBAAoBgM,MAAMqiB,GAAOqE,MAAM1yB,KAAK,mBAAmBgM,MAAM3E,GAAOqrB,MAAM1yB,KAAK,uBAAuBqJ,QAAQytC,GAASpkB,MAAM1yB,KAAKw2C,GAAgBhvC,IAAImvC,EAAOA,EAAKzsC,aAAa,OAAQ,GAAK,WAAWwoB,MAAM1yB,KAAKy2C,GAAkBjvC,IAAImvC,EAAOA,EAAKtwC,MAAQ,IAAIqsB,MAAMlM,KAAK,eAClZowB,IACAv3C,EAAK63C,aAAe,GAAI9jD,GAAMsC,GAAGqhD,YAAYvD,EAAOz0C,QAAQiB,KAAK,kBAAmBzM,KAAWsb,IAC/FxP,EAAK63C,aAAa3yC,KAAK,SAAU,SAAU4yC,GACP,MAA5BA,EAAG/a,SAASzvB,IAAI,SAChB6mC,EAAOz0C,QAAQiB,KAAKw2C,GAAgBhvC,IAAI5T,KAAKoL,WAGrDK,EAAK63C,aAAa3yC,KAAK,QAAS8pB,IAEpCmlB,EAAOS,SAASptC,OAChB2sC,EAAOz0C,QAAQiB,KAAKw2C,GAAgBjtC,QAAQ4uB,WAGpD/kC,GAAMsC,GAAG6J,OAAOm3C,YAAcA,EAC9Bn/C,EAAa,aAAc,GAAIM,GAAO3C,MAClClB,QAAS0iD,EACTngD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,oBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBACH,qBACA,eACDD,IACL,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQsE,EAASzE,EAAMsC,GAAG6J,OAAQ9I,EAAcoB,EAAOpB,YAAa+I,EAAM3H,EAAO4H,IAAKlI,EAAed,EAAYc,aAAclB,EAAewB,EAAOxB,aAAciZ,EAAazX,EAAOyX,WAAY+sB,EAAUxkC,EAAOwkC,QAASrmC,EAAO5C,EAAM4C,KAAMohD,EAAkB,sBAAuBC,EAAoB,wBAAyBC,EAAoB,wBAAyBC,EAAqB,yBACzaC,EAAenb,EAAQ9oC,QACvBC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXyoC,GAAQ3oC,GAAGF,KAAKG,KAAK0L,EAAM5L,GAC3B4L,EAAKwS,OAAQ,EACbxS,EAAKkoB,eAETpuB,YAAa,SAAUo6C,EAAK/pC,GAAf,GAIDiuC,GAHJlwB,EAAa3zB,KAAK2zB,WAClB1hB,EAAMyJ,EAAW0mB,kBAAkBxsB,EACvC,IAAI+d,EAAWthB,KAAyB,WAAlBshB,EAAWthB,IAAkB,CAY/C,GAXIwxC,EAAqB,WACrBj3C,WAAW,WACF+mB,EAAWjrB,OACZi3C,EAAIvmB,gBAAgB,SAEnBzF,EAAWhrB,QACZg3C,EAAIvmB,gBAAgB,UAExBumB,EAAIvmB,gBAAgB,gBAGvBumB,EAYD,MAXAA,GAAM/zC,EAAI8E,OAAOuB,EAAK,MAAO0hB,GAC7BgsB,EAAI/P,OAAS+P,EAAImE,QAAUD,EAC3BjuC,EAAMgtB,iBACNhtB,EAAM2tB,WAAWoc,GACZA,EAAIj9B,aACL9W,EAAI6D,YAAYwC,EAAIi0B,eAAe,UAAWyZ,GAElDkE,IACAjuC,EAAM4sB,cAAcmd,GACpB/pC,EAAM8sB,YAAYid,GAClBjkC,EAAW3E,YAAYnB,IAChB,CAEP+pC,GAAI/P,OAAS+P,EAAImE,QAAUD,EAC3Bj4C,EAAIS,KAAKszC,EAAKhsB,GACdkwB,IAGR,OAAO,GAEXnE,gBAAiB,SAAUsD,GACvB,MAAOxjD,GAAMmD,SAAS;AAClB2B,SAAUtE,KAAK2L,OAAO9L,QAAQyE,SAC9B0+C,YAAaA,KAGrBriD,KAAM,WACF,GAAI8K,GAAOzL,KAAM4V,EAAQnK,EAAKm9B,WACzBn9B,GAAKlG,YAAYmW,EAAWqrB,MAAMnxB,GAAQA,IAC3CnK,EAAKo9B,aAAajzB,IAG1BuB,KAAM,WAOF,QAASsjB,GAAMvrB,GACX,GAAI/D,GAAUy0C,EAAOz0C,QAASoG,EAAIxE,SAAS5B,EAAQiB,KAAKs3C,GAAmB9vC,MAAO,IAAKpC,EAAIzE,SAAS5B,EAAQiB,KAAKu3C,GAAoB/vC,MAAO,GAC5InI,GAAKkoB,YACDthB,IAAKlH,EAAQiB,KAAKo3C,GAAiB5vC,MAAMvF,QAAQ,KAAM,OACvD8+B,IAAKhiC,EAAQiB,KAAKq3C,GAAmB7vC,OAEzCnI,EAAKkoB,WAAWjrB,MAAQ,KACxB+C,EAAKkoB,WAAWhrB,OAAS,MACpBuE,MAAMqE,IAAMA,EAAI,IACjB9F,EAAKkoB,WAAWjrB,MAAQ6I,IAEvBrE,MAAMsE,IAAMA,EAAI,IACjB/F,EAAKkoB,WAAWhrB,OAAS6I,GAE7ByxC,EAAUx3C,EAAKlG,YAAYo6C,EAAK/pC,GAChCnC,EAAMvE,GACFzD,EAAKyS,QACLzS,EAAKyS,SAGb,QAASzK,GAAMvE,GACXA,EAAEsH,iBACFopC,EAAO7uC,UACPnF,EAAIsoB,mBAAmBxY,EAAW0mB,kBAAkBxsB,IAAQD,QACvDstC,GACDx3C,EAAKo9B,aAAajzB,GAG1B,QAASstC,GAAQh0C,GACTA,EAAEiH,SAAW/T,EAAKk+C,MAClB7lB,EAAMvrB,GACCA,EAAEiH,SAAW/T,EAAKm+C,KACzB9sC,EAAMvE,GAtCd,GAAuM0wC,GAAnMn0C,EAAOzL,KAAM4V,EAAQnK,EAAKm9B,YAAaqa,GAAU,EAAOtD,EAAMjkC,EAAWqrB,MAAMnxB,GAAQ5O,EAAa24C,GAAOA,EAAIrpC,aAAa,UAAY,GAAIrP,EAAc04C,GAAOA,EAAIrpC,aAAa,WAAa,GAAYzW,EAAU4L,EAAKE,OAAO9L,QAASyE,EAAWzE,EAAQyE,SAAU0W,EAAenb,EAAQmb,aAAcgoC,KAAiBxjD,EAAMsC,GAAGiiD,cAAgB/oC,GAAgBA,EAAaooC,WAAapoC,EAAaooC,UAAUC,OAAShiD,GAAYuZ,GACxanI,MAAOnO,EAASiB,YAChBy6C,SAAS,EACT3wC,UAAW2zC,EAEnBhjD,MAAKkpC,mBAAmBtzB,GAoCxBgF,EAAcnH,MAAQA,EAClBuvC,IACApoC,EAAclS,MAAQ,KAE1Bk3C,EAAS5/C,KAAK+oC,aAAat9B,EAAKi0C,gBAAgBsD,GAAcpoC,GAAekE,YAAY,uBAAwBkkC,GAAa52C,KAAK,oBAAoBgM,MAAMqiB,GAAOqE,MAAM1yB,KAAK,mBAAmBgM,MAAM3E,GAAOqrB,MAAM1yB,KAAK,uBAAuBqJ,QAAQytC,GAASpkB,MAAM1yB,KAAKo3C,GAAiB5vC,IAAI+rC,EAAMA,EAAIrpC,aAAa,MAAO,GAAK,WAAWwoB,MAAM1yB,KAAKq3C,GAAmB7vC,IAAI+rC,EAAMA,EAAIxS,IAAM,IAAIrO,MAAM1yB,KAAKs3C,GAAmB9vC,IAAI5M,GAAY83B,MAAM1yB,KAAKu3C,GAAoB/vC,IAAI3M,GAAa63B,MAAMlM,KAAK,eAC3eowB,IACAhjD,KAAKgkD,cAAgB,GAAIxkD,GAAMsC,GAAGiiD,aAAanE,EAAOz0C,QAAQiB,KAAK,mBAAoBzM,KAAWqb,IAClGhb,KAAKgkD,cAAcrzC,KAAK,SAAU,SAAU4yC,GACR,MAA5BA,EAAG/a,SAASzvB,IAAI,SAChB6mC,EAAOz0C,QAAQiB,KAAKo3C,GAAiB5vC,IAAI5T,KAAKoL,WAGtDpL,KAAKgkD,cAAcrzC,KAAK,QAAS8pB,IAErCmlB,EAAOS,SAASptC,OAChB2sC,EAAOz0C,QAAQiB,KAAKo3C,GAAiB7tC,QAAQ4uB,WAGrD/kC,GAAMsC,GAAG6J,OAAOi4C,aAAeA,EAC/BjgD,EAAa,cAAe,GAAIM,GAAO3C,MACnClB,QAASwjD,EACTjhD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,qBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,gBAAiBD,IAChD,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOykD,EAAezkD,EAAMsC,GAAGmiD,aAAcr4C,EAAMpM,EAAMsC,GAAG6J,OAAOE,IAClF49B,EAAYwa,EAAatkD,QACzBC,KAAM,SAAUuL,EAAStL,GACrB,GAAI4L,GAAOzL,IACXikD,GAAankD,GAAGF,KAAKG,KAAK0L,EAAMN,EAAStL,GACrCL,EAAMwC,QAAQC,SAASuI,MACvBxK,KAAKkkD,qBACLlkD,KAAK2Q,KAAK,YAAavP,EAAEe,MAAMnC,KAAKkkD,mBAAoBlkD,QAE5DyL,EAAKyP,KAAKzP,EAAK5L,QAAQ4S,OACvBhH,EAAKkF,KAAK,OAAQ,WACd,GAAIlF,EAAK5L,QAAQskD,SAAU,CACvB,GAAsBC,GAAlBvtB,EAAOprB,EAAKorB,IAChBA,GAAKjlB,KACDyyC,WAAY,SACZ37C,MAAO,SAEX07C,EAAYvtB,EAAKnuB,QACb07C,EACAA,GAAa,GAEbA,EAAY34C,EAAK64C,WAErBztB,EAAKjlB,IAAI,QAASwyC,EAAY5kD,EAAMwC,QAAQuiD,aAC5C94C,EAAK64C,WAAaF,MAI9BvkD,SACIyD,KAAM,YACNg+B,MAAO,IAEX4iB,mBAAoB,WAAA,GAIZxf,GAGKlhC,EAQL+gC,EACAp4B,EAfAq4C,EAAYxkD,KACZoL,EAAQo5C,EAAUp5C,QAClBq5C,EAAOzkD,KAAKupC,WAAWkb,OAEvB1oC,EAAO,GACPa,EAASpd,EAAM4+B,UACnB,KAAS56B,EAAI,EAAOihD,EAAK5jD,OAAT2C,EAAiBA,IAC7BkhC,EAAO+f,EAAKjhD,GACZuY,GAAQ,kBAAqBa,EAAO8nB,EAAKt5B,OAAS,IAC9Cs5B,EAAKt5B,OAASA,IACd2Q,GAAQ,aAEZA,GAAQ,IAAMa,EAAO8nB,EAAKxpB,MAAQ,WAElCqpB,GAASnjC,EAAE,oCAAwC2a,EAAO,aAC1D5P,EAAU/K,EAAEpB,KAAKmL,SAASa,QAAQ,aACtCG,EAAQ8J,KAAK,qBAAqBzF,SAClC+zB,EAAO90B,YAAYtD,GACnBo4B,EAAOxvB,GAAG,SAAU,WAChByvC,EAAUp5C,MAAMpL,KAAKoL,OACrBo5C,EAAU9jD,QAAQ,aAG1B0K,MAAO,SAAUA,GACb,GAAIK,GAAOzL,KAAMi2B,EAASguB,EAAankD,GAAGsL,MAAMrL,KAAK0L,EAAML,EAC3D,OAAIA,KAAU/J,EACH40B,GAENguB,EAAankD,GAAGsL,MAAMrL,KAAK0L,IAC5BA,EAAKyP,KAAKzP,EAAK5L,QAAQ4S,OAD3B,IAIJiyC,SAAU,SAAU1xC,GAChB,GAA0ExP,GAAG20B,EAAK/C,EAAWjvB,EAAzFsF,EAAOzL,KAAMupC,EAAa99B,EAAK89B,WAAY5oB,EAAQ4oB,EAAW3W,MAIlE,KAHI5f,GACAvH,EAAKorB,KAAKjlB,IAAI,mBAAoBhG,EAAI2tB,uBAAuBn4B,EAAE4R,KAE9DxP,EAAI,EAAOmd,EAAM9f,OAAV2C,EAAkBA,IAC1B20B,EAAMxX,EAAMnd,GAAG20B,KAAO,OACtB/C,EAAYzU,EAAMnd,GAAG4xB,UACrBjvB,EAAQyF,EAAI0tB,YAAYtmB,EAAMmlB,GAAO/C,UAAWA,IAChDjvB,EAAQA,EAAMkI,QAAQ,KAAM,KAC5BsS,EAAMnd,GAAG2C,MAAQA,EAAQ,uBAE7BojC,GAAW7oC,QAAQ,YAG3BlB,GAAMsC,GAAGuc,OAAOorB,GAChBjqC,EAAMsC,GAAG6J,OAAO89B,UAAYA,GAC9B9nC,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,qBAAsBD,IACjD,YACG,SAAU8B,EAAGC,GAEV,QAAS8D,GAAOmd,EAAMlX,GAClB,GAAI+H,GAAoC,OAA5B/R,EAAEkhB,GAAM1Q,IAAI,aAAuB+yC,EAAkBxxC,EAAQ,QAAU,OAAQwqB,EAA6B,MAAlB/xB,EAAItI,KAAKgf,GAAgB,SAAWqiC,EAAkB,UAAYA,CACxK,OAAIv5C,KAAU/J,EACHihB,EAAKnc,MAAMw3B,IAAa,GAE3BvyB,EAAQ,EACRkX,EAAKnc,MAAMw3B,GAAYvyB,EAAQ,MAE/BkX,EAAKnc,MAAMw3B,GAAY,GAClBrb,EAAKnc,MAAM0yB,SACZvW,EAAK8W,gBAAgB,UAL7B,GAPX,GACO55B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQsE,EAASzE,EAAMsC,GAAG6J,OAAQC,EAAM3H,EAAO4H,IAAKhJ,EAAcoB,EAAOpB,YAAac,EAAed,EAAYc,aAAc8kC,EAAUxkC,EAAOwkC,QAASnnC,EAAO2C,EAAO3C,KAAMmB,EAAewB,EAAOxB,aAAciZ,EAAazX,EAAOyX,WAAYsG,EAAgBpW,EAAIoW,cAAeq5B,EAAoBp3C,EAAOo3C,kBAAmBK,EAAiBz3C,EAAOy3C,eAgBhZkJ,EAAkBhjD,EAAMjC,QACxBC,KAAM,WACFI,KAAKyb,OAAS,GAAI4/B,KAAqB33C,KAAMkI,EAAIoW,kBAErDyY,MAAO,SAAU5b,GAAV,GAEC26B,GAA+CqL,EAAcrhD,EAAGod,EAAK24B,EAAYuL,EAAYxuB,EAmBjFyuB,EACAC,EAsBAnQ,EAEKoQ,EAQbrmC,CAlDR,IAHAC,EAAQjT,EAAIqvB,SAASpc,EAAOjT,EAAIyqB,iBAAiB,GAC7CmjB,EAAcx5C,KAAKyb,OAAOw9B,aAAap6B,GAAQgmC,KACnDrL,EAAcx5C,KAAKklD,cAAc1L,GAC7BA,EAAY34C,OAAQ,CACpB,IAAK2C,EAAI,EAAGod,EAAM44B,EAAY34C,OAAY+f,EAAJpd,EAASA,IACvCoI,EAAIsN,GAAGsgC,EAAYh2C,GAAI,MAClBpC,EAAEo4C,EAAYh2C,IAAI89B,QAEZlgC,EAAEqC,QAAQ+1C,EAAYh2C,GAAGsvB,WAAY+xB,GAAW,GACvDA,EAAQ1kD,KAAKq5C,EAAYh2C,IAFzBqhD,EAAQ1kD,KAAKq5C,EAAYh2C,GAAGsvB,YAKhC+xB,EAAQ1kD,KAAKq5C,EAAYh2C,GAGjC,MAAOqhD,EAAQhkD,QAEX,GADA04C,EAAasL,EAAQzX,QACjBxhC,EAAIsN,GAAGqgC,EAAY,MAKnB,GAJAuL,EAAavL,EAAWzmB,WACxBwD,EAAUl1B,EAAEm4C,GAAY92B,KAAK,MACzBsiC,EAAczuB,EAAQlqB,KAAK,SAASowB,OACpCwoB,EAAa5jD,EAAEm4C,GAAY/6B,SAAS,SAAS,GAC7CwmC,GAAc1uB,EAAQ,GAClByuB,EAAY,IACZA,EAAYj1C,OAAOypC,GACnBwL,EAAYj1C,OAAO1O,EAAE4jD,GAAYxmC,YACjC5S,EAAI4E,OAAOw0C,KAEX1uB,EAAQxmB,OAAOk1C,GACfA,EAAWx4C,aAAa+sC,EAAYyL,EAAWxiC,iBAQnD,KALAwiC,EAAa1uB,EAAQ9X,SAAS,SAAS,GAClCwmC,IACDA,EAAap5C,EAAI8E,OAAO6oC,EAAWxlB,cAAenoB,EAAItI,KAAKwhD,IAC3DxuB,EAAQxmB,OAAOk1C,IAEZzL,GAAcA,EAAWzmB,YAAcgyB,GAC1CE,EAAWjsB,YAAYwgB,GACvBA,EAAasL,EAAQzX,YAM7B,KAFIyH,EAAa9nC,SAAS5H,EAAOo0C,GAAa,IAAM,GACpDp0C,EAAOo0C,EAAY1E,GACVoQ,EAAc,EAAiBJ,EAAQhkD,OAAtBokD,EAA8BA,IAChD7jD,EAAE4X,SAASugC,EAAYsL,EAAQI,KAC/BJ,EAAQ7I,OAAOiJ,EAAa,OAMxCrmC,GAAY,GAAI88B,KAAkBh4C,MAAO,QAAWyC,OAAS0uC,WAAY,MAC7Ej2B,EAAU6b,MAAM5b,IAGxBqmC,cAAe,SAAUrmC,GACrB,GAAK7e,KAAKqZ,WAEH,CACH,GAAIA,KACJ,OAAOjY,GAAEkS,IAAIuL,EAAO,SAAUyD,GAC1B,GAAIia,GAAYt4B,EAAOqV,WAAWwtB,gBAAgBxkB,EAClD,IAAIia,EAAW,CACX,GAAyC,KAArCn7B,EAAEqC,QAAQ84B,EAAWljB,GAGrB,MAAO,KAFPA,GAAWlZ,KAAKo8B,GAKxB,MAAOA,IAAaja,IAZxB,MAAOzD,IAgBfrO,OAAQ,SAAUqO,GACdA,EAAQjT,EAAIqvB,SAASpc,EAAOjT,EAAIyqB,iBAAiB,EACjD,IAAmD8uB,GAAY3hD,EAAGod,EAAKiW,EAAMuuB,EAAY5H,EAAUjE,EAAY1E,EAA3G2E,EAAcx5C,KAAKyb,OAAOw9B,aAAap6B,EAE3C,KADA26B,EAAcx5C,KAAKklD,cAAc1L,GAC5Bh2C,EAAI,EAAGod,EAAM44B,EAAY34C,OAAY+f,EAAJpd,EAASA,IAAK,CAEhD,GADA+1C,EAAan4C,EAAEo4C,EAAYh2C,IACvB+1C,EAAWrgC,GAAG,MAAO,CAGrB,GAFA2d,EAAO0iB,EAAWh3B,SAClB6iC,EAAavuB,EAAKtU,SACd6iC,EAAWlsC,GAAG,cAAgB/T,EAAO0xB,EAAK,IAAK,CAC/C,GAAIsuB,GAAc/jD,EAAE4X,SAASmsC,EAAYC,EAAW,IAChD,QAEJ5H,GAAWjE,EAAW8L,QAAQ,MAC1B7H,EAAS38C,QACTO,EAAEy1B,EAAK,GAAGvD,WAAU,IAAQ3hB,SAAS4nC,GAAYzpC,OAAO0tC,GAExD4H,EAAWlsC,GAAG,MACdqgC,EAAW9pC,YAAY21C,GAEvB7L,EAAW5nC,SAASyzC,GAEnBvuB,EAAKrY,SAAS,MAAM3d,QACrBg2B,EAAKrmB,QAET,UAEA,GAAI20C,GAActuB,EAAK,GACnB,QAEJsuB,GAAatuB,EAAK,OAGtBsuB,GAAa3L,EAAYh2C,EAE7BqxC,GAAa9nC,SAAS5H,EAAOggD,GAAa,IAAM,GAChDhgD,EAAOggD,EAAYtQ,OAI3ByQ,EAAgB7c,EAAQ9oC,QACxBC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXH,GAAQ+e,WACJqqB,OAAQ7nC,EAAEe,MAAM,SAAUyT,GACtB,GAAI2vC,GAAkB,GAAIX,EAC1BW,GAAgBlsC,WAAarZ,KAAK2L,QAAU3L,KAAK2L,OAAO9L,QAAQwZ,WAChEksC,EAAgB9qB,MAAM/e,EAAWmD,MAAMjJ,KACxCnK,IAEPg9B,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/B2lD,EAAiB/c,EAAQ9oC,QACzBC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXH,GAAQ+e,WACJqqB,OAAQ7nC,EAAEe,MAAM,SAAUyT,GACtB,GAAI2vC,GAAkB,GAAIX,EAC1BW,GAAgBlsC,WAAarZ,KAAK2L,QAAU3L,KAAK2L,OAAO9L,QAAQwZ,WAChEksC,EAAgB/0C,OAAOkL,EAAWmD,MAAMjJ,KACzCnK,IAEPg9B,EAAQ3oC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/B4lD,EAAcnkD,EAAK3B,QACnBC,KAAM,SAAUC,GACZyB,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMH,GACxBG,KAAKyb,OAAS,GAAI4/B,KAAqB33C,KAAMse,MAEjD1D,WAAY,SAAUxc,EAAIjC,GACtByB,EAAKxB,GAAGwe,WAAWve,KAAKC,KAAM8B,EAAIjC,GAClCuB,EAAEzB,OAAOK,KAAKH,SAAWwZ,WAAYxZ,EAAQ8L,QAAU9L,EAAQ8L,OAAO9L,QAAQwZ,aAC9EvX,EAAGwK,SAAS,qBAEhBL,OAAQ,SAAUnK,EAAI+c,GAClB,GAAqD6mC,GAAeC,EAAkBniD,EAAGod,EAAK26B,EAAUzU,EAApG8e,EAAgB5lD,KAAKyb,OAAOw9B,aAAap6B,EAC7C,KAAKrb,EAAI,EAAGod,EAAMglC,EAAc/kD,OAAY+f,EAAJpd,EAASA,IAgB7C,GAfA+3C,EAAWqK,EAAcpiD,GACrBxD,KAAKH,QAAQwZ,aACbytB,EAAkB7iC,EAAOqV,WAAWwtB,gBAAgByU,GAChDzU,IACAyU,EAAWzU,IAGnB4e,EAAgBvgD,EAAOo2C,GAClBmK,IACDC,EAAmBvkD,EAAEm6C,GAAUpB,QAAQ,SAASt5C,OAChD6kD,EAAgB95C,EAAIsN,GAAGqiC,EAAU,QAAUoK,EAAmB,GAAKxgD,EAAOo2C,EAASzoB,cAAgBlnB,EAAI2sB,OAAOgjB,GAC1G,KACA,QACEoK,EAAmB,GAEzBD,EAEA,MADA5jD,GAAGsX,YAAY,oBACf,CAGRtX,GAAGwK,SAAS,oBAAoB8M,YAAY,mBAGpDzZ,GAAOsE,GACH2gD,gBAAiBA,EACjBU,cAAeA,EACfE,eAAgBA,EAChBC,YAAaA,IAEjB9hD,EAAa,SAAU,GAAIrC,IACvBlB,QAASklD,EACT3iD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,cAGf9O,EAAa,UAAW,GAAI8hD,IACxBrlD,QAASolD,EACT7iD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,gBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,mBAAoB,iBAAkBD,IAC/C,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQsE,EAASzE,EAAMsC,GAAG6J,OAAQ9I,EAAcoB,EAAOpB,YAAa4lC,EAAUxkC,EAAOwkC,QAASnnC,EAAO2C,EAAO3C,KAAMmB,EAAewB,EAAOxB,aACzKojD,EAAkBpd,EAAQ9oC,QAC1BC,KAAM,SAAUC,GACZ,GAAI6Z,GAAM1Z,IACV0Z,GAAI7Z,QAAUA,EACd4oC,EAAQ3oC,GAAGF,KAAKG,KAAK2Z,EAAK7Z,GAC1B6Z,EAAIia,WAAa,KACjBja,EAAIuE,OAAQ,GAEhB9G,KAAM,WAKF,QAASsjB,GAAMvrB,GACXrP,EAAQia,gBAAgBT,WAAa1N,EAAO0N,WAC5C1N,EAAOP,MAAMw0C,EAAOxzC,KAAK6B,GAAU2F,OACnC/T,EAAQia,gBAAgBT,WAAahY,EACrCoS,EAAMvE,GACFzD,EAAKyS,QACLzS,EAAKyS,SAETvS,EAAOjL,QAAQ,UAEnB,QAAS+S,GAAMvE,GACXA,EAAEsH,iBACFopC,EAAOhtB,KAAK,eAAe7hB,UACvBpF,EAAO0N,aACP1N,EAAO0N,WAAW2rB,yBAEtBr5B,EAAOgK,QApBX,GAA8NnG,GAA1N/D,EAAOzL,KAAM2L,EAASF,EAAKE,OAAQ9L,EAAU8L,EAAO9L,QAASyE,EAAWqH,EAAO9L,QAAQyE,SAAUs7C,EAASx+C,EAAE5B,EAAMmD,SAASkjD,EAAgBljD,UAAU2B,IAAWqN,SAASjH,SAASsI,MAAO/E,EAAW,oBACxMpO,GAAQma,cAAcX,WAAa1N,EAAO0N,WAC1C7J,EAAUq2C,EAAgB1gD,OAAOwG,EAAOP,SACxCvL,EAAQma,cAAcX,WAAahY,EAmBnCrB,KAAK+oC,aAAa6W,GACdntC,MAAOnO,EAASoB,SAChB+N,MAAOA,EACPusC,SAAS,IACV5zC,KAAK6B,GAAU2F,IAAIpE,GAASsvB,MAAM1yB,KAAK,oBAAoBgM,MAAMqiB,GAAOqE,MAAM1yB,KAAK,mBAAmBgM,MAAM3E,GAAOqrB,MAAMlM,KAAK,eAAeytB,SAASptC,OACzJ2sC,EAAOxzC,KAAK6B,GAAU0H,UAG9BhW,GAAOkmD,GACHljD,SAAU,wVACVwC,OAAQ,SAAUqK,GACd,MAAOA,GAAQnB,QAAQ,2CAA4C,WAAWA,QAAQ,wBAAyB,eAAeA,QAAQ,YAAa,YAAYA,QAAQ,MAAO,OAGtL7O,EAAMsC,GAAG6J,OAAOk6C,gBAAkBA,EAClC5hD,EAAOpB,YAAYc,aAAa,WAAY,GAAIrC,IAC5ClB,QAASylD,EACTljD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,kBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,mBAAoBD,IACnD,YACG,SAAU8B,GA2NP,QAAS0kD,GAAexjC,GAAxB,GAGYyjC,GACAnwC,EAHJ61B,EAAK7/B,EAAIivB,sBAAsBvY,GAAO,MACtCmpB,KACIsa,EAAgB,GAAI9hD,GAAOynC,cAAc9/B,EAAItI,KAAKmoC,EAAG3Y,aACrDld,EAAQpW,EAAMsC,GAAG6J,OAAO02B,SAASqB,SAASphB,GAC9C1M,EAAM2C,WAAWkzB,GACjBsa,EAAc9c,OAAOrzB,IAjOhC,GACOpW,GAAQmC,OAAOnC,MAAOyE,EAASzE,EAAMsC,GAAG6J,OAAQrK,EAAO2C,EAAO3C,KAAMmB,EAAewB,EAAOxB,aAAci4C,EAAuBz2C,EAAOy2C,qBAAsBjS,EAAUxkC,EAAOwkC,QAAS78B,EAAM3H,EAAO4H,IAAKhJ,EAAcoB,EAAOpB,YAAa6Y,EAAazX,EAAOyX,WAAY/X,EAAed,EAAYc,aACrSqiD,EAAiBtL,EAAqB/6C,QACtCC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXsB,GAAKxB,GAAGF,KAAKG,KAAK0L,EAAMjM,EAAMsB,cAAe2K,EAAK5L,QAASA,IAC3D4L,EAAKF,KAAO,iBACZE,EAAKgQ,QACDI,UAAW,WACP,MAAO,MAInBhc,SACI8gB,QAEQzF,KAAM,YACN9P,MAAO,MAGP8P,KAAM,YACN9P,MAAO,eAGP8P,KAAM,YACN9P,MAAO,OAGP8P,KAAM,YACN9P,MAAO,OAGP8P,KAAM,YACN9P,MAAO,OAGP8P,KAAM,YACN9P,MAAO,OAGP8P,KAAM,YACN9P,MAAO,OAGP8P,KAAM,YACN9P,MAAO,OAGf1C,MAAO,KAEXu9C,iBAAkB,SAAUvhB,GAAV,GAQVwhB,GAPA96C,EAAQs5B,EAAKt5B,KACjB,OAAKA,GAGDs5B,EAAKvM,KAAOuM,EAAKtP,UACVsP,GAEPwhB,EAAM96C,EAAM6B,QAAQ,KACZ,IAARi5C,EACAxhB,EAAKtP,UAAYhqB,EAAM+8B,UAAU,GACnB,IAAP+d,EACPxhB,EAAKvM,IAAM/sB,GAEXs5B,EAAKvM,IAAM/sB,EAAM+8B,UAAU,EAAG+d,GAC9BxhB,EAAKtP,UAAYhqB,EAAM+8B,UAAU+d,EAAM,IAEpCxhB,GAdIA,GAgBftkC,QAAS,SAAUuf,GAAV,GACDlU,GAAOzL,KACP0kC,EAAO/kB,EAAKvU,KAEhB,OADAs5B,GAAO1kC,KAAKimD,iBAAiBvhB,GACtB,GAAIzgC,GAAO0a,eACd/I,MAAO+J,EAAK/J,MACZgJ,UAAW,WACP,GAAIA,GAAWlb,GAAQghC,EAAKvM,KAAOuM,EAAKyhB,SAAW,QAAQrxC,MAAM,KAAMvR,IAC3DG,KAAMA,EACN2I,MAAQ+oB,UAAWsP,EAAKtP,WAAa,KAQjD,OALIxW,GADAxd,EAAEqC,QAAQC,EAAK,GAAIkI,EAAIsW,iBAAmB,EAC9B,GAAIje,GAAOs2C,sBAAsBh3C,GAEjC,GAAIU,GAAOi4C,qBAAqB34C,GAEhDqb,EAAUjT,OAASF,EAAKE,OACjBiT,MAInBN,WAAY,SAAUxc,EAAIwnC,GAAd,GACJ39B,GAAS29B,EAAY39B,OACrB9L,EAAUG,KAAKH,QACf+D,EAAW/D,EAAQyD,KACnBmI,EAAOzL,IACXyL,GAAKE,OAASA,EACd7J,EAAG4G,MAAM7I,EAAQ6I,OACjB5G,EAAGskD,gBACC1c,cAAe,OACfC,eAAgB,QAChBJ,WAAY1pC,EAAQ8gB,OAAShV,EAAO9L,QAAQ+D,GAC5C6O,MAAO9G,EAAO9L,QAAQyE,SAASV,GAC/BugD,UAAU,EACVjmC,OAAQ,WACJ,GAAImoC,GAAWrmD,KAAKqmD,UAChBA,IACA/kD,EAAK6V,KAAKxL,EAAQ/H,EAAUyiD,EAASC,WAG7CC,UAAW,WACP,GAAI/iD,GAAGmd,EAAQ3gB,KAAKupC,WAAW3W,MAC/B,KAAKpvB,EAAI,EAAOmd,EAAM9f,OAAV2C,EAAkBA,IAC1Bmd,EAAMnd,GAAKiI,EAAKw6C,iBAAiBtlC,EAAMnd,KAG/ComC,gBAAgB,EAChBjnC,SAAUnD,EAAMmD,SAAS,2FAE7Bb,EAAGwK,SAAS,eAAeN,QAAQ,aAAaoN,YAAY,KAAOxV,GAAUwI,KAAK,KAAKiuC,UAAUhuC,KAAK,eAAgB,OAE1Hm6C,mBAAoB,SAAU7lC,EAAO9B,GAAjB,GACPrb,GACDkhC,EACAvM,EACA/C,EACAoS,EACAr8B,EAOKs7C,CAZb,KAASjjD,EAAI,EAAOmd,EAAM9f,OAAV2C,EAAkBA,IAM9B,GALIkhC,EAAO/jB,EAAMnd,GACb20B,EAAMuM,EAAKvM,KAAOuM,EAAKyhB,SAAW,GAClC/wB,EAAYsP,EAAKtP,UAAY,IAAMsP,EAAKtP,UAAY,GACpDoS,EAAWrP,EAAM/C,EACjBjqB,EAAU/J,EAAEyd,EAAM,IAAI7S,QAAQw7B,GAAU,GAC5C,CAGA,GAAoB,GAAhB3oB,EAAMhe,OACN,MAAO6jC,GAAKt5B,KAEhB,KAASq7C,EAAI,EAAO5nC,EAAMhe,OAAV4lD,GACPrlD,EAAEyd,EAAM4nC,IAAIz6C,QAAQw7B,GAAU,GADLif,IAGvB,GAAIA,GAAK5nC,EAAMhe,OAAS,EAC3B,MAAO6jC,GAAKt5B,MAIxB,MAAO,IAEXa,OAAQ,SAAUnK,EAAI+c,GAAd,GAKA0qB,GAAmC5oB,EAA2Bnd,EAAG2iD,EAASva,EAJ1E4Y,EAAYpjD,EAAEU,GAAI8wB,KAAK5yB,KAAKuL,KAChC,IAAKi5C,IAGDjb,EAAaib,EAAUjb,WAAY5oB,EAAQ4oB,EAAW3W,OAAoBgZ,EAAWhgC,EAAIguB,eAAea,MAAM,KAAM5b,GACpH+sB,GAAYhgC,EAAI8uB,gBAAgBkR,IAAa5rC,KAAK0mD,WAAa9a,GAAnE,CAKA,IAFI5rC,KAAK0mD,UAAY9a,EAEhBpoC,EAAI,EAAOmd,EAAM9f,OAAV2C,EAAkBA,IAC1B2iD,EAAUxlC,EAAMnd,GAAG2iD,QACnBxlC,EAAMnd,GAAGw8C,SAAWmG,KAAa/kD,EAAEwqC,GAAU5/B,QAAQm6C,GAAStlD,MAElE0oC,GAAWzO,SACH6rB,MAAO,UACPC,SAAU,KACVx7C,OAAO,KAEfsvC,EAAqB56C,GAAGmM,OAAOlM,KAAKC,KAAM8B,EAAI+c,GAC9C2lC,EAAUp5C,MAAMpL,KAAKwmD,mBAAmBjd,EAAWkb,OAAQ5lC,IAC3D2lC,EAAUr4C,QAAQ2S,YAAY,oBAAqByqB,EAAWkb,OAAO5jD,UAEzEkQ,QAAS,WACL/Q,KAAK0mD,UAAY,QAGrBG,EAAqBpe,EAAQ9oC,QAC7BwX,KAAM,WAAA,GAIE0H,GAGK8V,EACDrS,EAPJ1M,EAAQ5V,KAAK4oC,WAAU,EAM3B,KALA5oC,KAAK8mD,YAAc9mD,KAAKH,QAAQ2Q,QAAU,wCAAwCsE,MAAM,KACxF4G,EAAWksB,qBAAqBhyB,GAC5BiJ,EAAQnD,EAAW0rB,OAAOxxB,EAAO,SAAU0M,GAC3C,MAAOA,KAEFqS,EAAI9V,EAAMhe,OAAS,EAAG8zB,GAAK,EAAGA,IAC/BrS,EAAOzD,EAAM8V,GACZ30B,KAAK8mC,gBAAgBxkB,IACtBtiB,KAAK+wC,MAAMzuB,EAGnBtiB,MAAK6oC,aAAajzB,IAEtBm7B,MAAO,SAAUzuB,GAAV,GAIChf,GAEIyiD,EACAtjC,EACAxM,EAQKzS,CAfb,IAAK8e,IAAQ1W,EAAIuqB,SAAS7T,GAA1B,CAIA,GADIhf,EAAOsI,EAAItI,KAAKgf,GACR,MAARhf,GAAwB,MAARA,EAKhB,IAJIyiD,EAAgB,GAAI9hD,GAAOynC,cAAcpoC,GACzCmf,EAAOH,EAAKoQ,gBACZzc,EAAOqM,EAAKI,YAChBqjC,EAAc7sB,OAAO5W,GACdG,GAAQA,GAAQxM,EAAMwM,EAAOA,EAAKC,YACrC1iB,KAAK+wC,MAAMtuB,OAEZ,IAAY,cAARnf,EACPsI,EAAI4sB,UAAUlW,EAAM,SACjB,IAAqB,GAAjBA,EAAK3L,UAAkB/K,EAAIupB,cAAc7S,GAOhDwjC,EAAexjC,OAPwC,CACvD,IAAS9e,EAAI8e,EAAK4Q,WAAWryB,OAAS,EAAG2C,GAAK,EAAGA,IAC7CxD,KAAK+wC,MAAMzuB,EAAK4Q,WAAW1vB,GAE/B8e,GAAK8W,gBAAgB,SACrB9W,EAAK8W,gBAAgB,SAIrBh4B,EAAEqC,QAAQH,EAAMtD,KAAK8mD,aAAe,IACpCl7C,EAAIstB,OAAO5W,KAGnBwkB,gBAAiB,SAAUxkB,GACvB,MAAOtiB,MAAKqZ,cAAgBpV,EAAOqV,WAAWwtB,gBAAgBxkB,KAYtElhB,GAAEzB,OAAOsE,GACL+hD,eAAgBA,EAChBa,mBAAoBA,IAExBljD,EAAa,aAAc,GAAIqiD,IAC3BrjD,SAAU,GAAIF,IACVE,SAAUE,EAAYK,qBACtBuP,MAAO,cAGf9O,EAAa,kBAAmB,GAAIrC,IAChClB,QAASymD,EACTlkD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,yBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,kBAAmB,qBAAsBD,IAClD,YACG,SAAU8B,EAAGC,GAAb,GAgCOqL,GA/BAlN,EAAQmC,OAAOnC,MACfsC,EAAKtC,EAAMsC,GACX4J,EAAW5J,EAAG6J,OACd9J,EAASC,EAAGD,OACZlC,EAASyB,EAAEzB,OACXwC,EAAQf,EAAEe,MACVC,EAAO5C,EAAM4C,KACbuS,EAAK,eACL9R,EAAcrD,EAAMsC,GAAG6J,OAAO9I,YAC9BJ,EAAejD,EAAMsC,GAAG6J,OAAOlJ,aAC/BnB,EAAO9B,EAAMsC,GAAG6J,OAAOrK,KACvBylD,EAAiB,iBACjBC,EAAY,gPACZC,EAAqB3lD,EAAK3B,QAC1B2e,WAAY,SAAUxc,EAAIjC,GACtBiC,EAAGuK,MAAOkS,aAAc,MACxB,IAAI9R,GAAU5M,EAAQ8L,OAAOc,OAC7B3K,GAAGiT,GAAG,QAAS3T,EAAEe,MAAM,WACnBnC,KAAKknD,cAAcje,UACpBx8B,KAEP5M,SAAWyD,KAAMyjD,GACjB3mD,QAASgB,EAAEsd,KACXzS,OAAQ7K,EAAEsd,KACV3N,QAAS3P,EAAEsd,MAEf7b,GAAYc,aAAaojD,EAAgB,GAAIE,IACzC9oC,IAAK,GACLC,MAAM,EACNzb,SAAU,GAAIF,IAAeE,SAAUE,EAAYO,4BAEnDsJ,EAAU7K,EAAOlC,QACjBC,KAAM,SAAUuL,EAAStL,GACrB,GAAI4L,GAAOzL,IACXH,GAAUF,KAAWE,GAAWyD,KAAM,kBACtCzB,EAAO/B,GAAGF,KAAKG,KAAK0L,EAAMN,EAAStL,GAC/BA,EAAQ0M,OACRd,EAAK07C,aAELtnD,EAAQwP,WAAaxP,EAAQwP,UAAU5C,UACvChB,EAAK27C,eAAiB5nD,EAAM6nD,SAAS,WACjC57C,EAAKmD,WAETnD,EAAKN,QAAQmB,SAAS,yBAG9BpM,QAAS,WACTonD,QACIx8C,OACI,OACA,SACA,YACA,iBAEJqP,SACI,YACA,eAEJpR,WACI,cACA,gBACA,eACA,eAEJkC,OACI,cACA,aACA,aACA,UAEJF,OACI,sBACA,oBACA,SACA,WAEJG,QACI,cACA,gBACA,iBACA,cACA,cACA,YACA,gBAEJq8C,UACI,WACA,kBACA,QACA,OAEJC,OACI,WACA,YAEJC,QACI,YACA,cAGRC,oBACI,aACA,WACA,WACA,YACA,YACA,cAEJP,WAAY,WACR,GAAI17C,GAAOzL,IACXA,MAAK2B,OAASP,EAAEpB,KAAKmL,SAAS8tB,KAAK,gDAAkD1W,SAASolC,QAAQ,+GAAmH3e,aACrNv2B,OAAO,EACPpD,WAAW,EACXyL,WAAa8sC,WAAY,+BACzB7sC,WACI9H,MAAQ40C,QAAS,WACjBp0C,OAASo0C,QAAS,aAEtBC,UAAW,GACX9H,SAAS,EACT+H,WAAW,EACXhQ,WACAiQ,QAAS,WACLhoD,KAAKioD,QAAS,KAEnBlzC,GAAG,YAAa,SAAU7F,GACpB9N,EAAE8N,EAAEmJ,QAAQa,GAAG,aAChBzN,EAAKwN,kBAAmB,KAE7BlE,GAAG,WAAY,WACdtJ,EAAK5L,QAAQ8L,OAAOR,QAAQyN,aAC7Bga,KAAK,gBAEZs1B,sBAAuB,SAAU/8C,EAASwN,GACtCxN,EAAQiB,KAAK,MAAM0S,YAAY,yBAA0BnG,GAAMvM,KAAK,qDAAqD0S,YAAY,6BAA8BnG,IAEvKwvC,mBAAoB,SAAUrmD,GAAV,GACZ2J,GAAOzL,KACPooD,EAAgB,iFACpB38C,GAAKy7C,cAAgB9lD,EAAEgnD,GAAez2C,SAAS,QAAQ02C,YACnD5H,OAAQ3+C,EACRwmD,OAAQ,eACRtwB,SAAU,YACVuwB,kBAAkB,EAClBt1C,KAAM,SAAU/D,GACRlP,KAAKmL,QAAQ+N,GAAG,WAChBhK,EAAEsH,iBAEN/K,EAAKy8C,sBAAsBloD,KAAKmL,SAAS,IAE7CmuC,SAAUn3C,EAAMsJ,EAAK+8C,mBAAoB/8C,KAC1CmnB,KAAK,eAEZjS,MAAO,WACH,GAA4EpU,GAAO0pB,EAA/E3mB,EAActP,KAAKH,QAAQwP,WAAarP,KAAKH,QAAQwP,UAAU5C,OAMnE,OALAwpB,GAASj2B,KAAKmL,QAAQqT,WAAWpS,KAAK,eAClCkD,IACA/C,EAAQvM,KAAKknD,cACbjxB,EAASA,EAAO4P,IAAIt5B,EAAMpB,QAAQqT,WAAWpS,KAAK,SAE/C6pB,GAEX9c,QAAS,WACL,MAAOnZ,MAAKmL,QAAQiB,KAAK,oBAAoBvL,OAAS,GAAKb,KAAKiZ,kBAEpE8E,SAAU,SAAUza,GAChB,GAAI2F,GAAI6C,EAAQ9L,KAAK8L,KACrB,KAAK7C,IAAM6C,GACP,GAAI7C,EAAGjF,eAAiBV,EACpB,MAAOwI,GAAM7C,IAIzBw/C,aAAc,SAAU7kD,GACpB,GAAIJ,GAAG8jD,EAAStnD,KAAKsnD,MACrB,IAAItnD,KAAK0oD,aAAa9kD,GAClB,MAAO,QAEX,KAAKJ,IAAK8jD,GACN,GAAIlmD,EAAEqC,QAAQG,EAAU0jD,EAAO9jD,KAAO,EAClC,MAAOA,IAInBmJ,OAAQ,SAAUhB,GACd,GAAIF,GAAOzL,KAAM2B,EAAS8J,EAAK9J,MAC3B8J,GAAKk9C,SACLl9C,EAAKk9C,QAAQ9X,OAAO,SAAU1uC,EAAMsJ,EAAKmD,OAAQnD,IAErDA,EAAKk9C,QAAUh9C,EACXF,EAAK5L,QAAQwP,WAAa5D,EAAK5L,QAAQwP,UAAU5C,SACjDd,EAAO9L,QAAQiM,MAAM3L,KAAK4mD,GAE9Bt7C,EAAKK,MAAQL,EAAKm9C,YAAYj9C,EAAO9L,QAAQiM,OAC7CL,EAAKo9C,SACLp9C,EAAKN,QAAQiB,KAAK,wBAAwBqJ,QAAQ,SAAUvG,GACxD,GAAI45C,GAAW1nD,EAAEpB,MAAMgM,QAAQ,eAAe4mB,KAAK,iBAAkBzU,EAAMjP,EAAEiH,OACzEgI,IAAO/b,EAAKsU,OAASyH,GAAO/b,EAAKqU,KACjCqyC,EAASr1C,QACF0K,GAAO/b,EAAK2V,OACd+wC,EAASC,SAASC,aACnB95C,EAAE+5C,2BACFH,EAAS71C,WAIrBxH,EAAKy9C,gBACLz9C,EAAKkV,QAAQgc,KAAK,WAAA,GAMNwsB,GALJvlD,EAAW6H,EAAK29C,UAAUppD,MAAO6D,EAAoB,SAAbD,EAAsB6H,EAAKK,MAAMlI,GAAY6H,EAAKK,MAAMu9C,eAAgBxpD,EAAUgE,GAAQA,EAAKhE,QAASyE,EAAWqH,EAAO9L,QAAQyE,SAAUglD,EAAczpD,GAAWA,EAAQ0pD,SAAWjlD,EAASV,GAAW9B,EAAKV,EAAEpB,KAC1P6D,IAASA,EAAKya,aAGH,YAAZ1a,GAAsC,YAAZA,IACtBulD,EAAc7kD,EAASV,EAAW,WACtC9B,EAAGsK,KAAK,SAASwH,IAAIu1C,GAAarqB,MAAM1yB,KAAK,gBAAgB8O,KAAKiuC,GAAarqB,OAEnFj7B,EAAKya,WAAWxc,GACZ2Q,MAAOhH,EAAK+9C,wBAAwBF,EAAazlD,GACjD8H,OAAQF,EAAKk9C,UAEjB7mD,EAAGkK,QAAQ,YAAaP,EAAKN,SAASmB,SAAS,mBAC/CxK,EAAGkK,QAAQ,iBAAkBP,EAAKN,SAAS8K,KAAK,kBAAkB3J,SAAS,sBAE/EX,EAAOgF,KAAK,SAAUxO,EAAMsJ,EAAKmD,OAAQnD,IACzCA,EAAKQ,SACDtK,GACAA,EAAOwK,QAAQyF,KACX0lB,IAAK,GACLzhB,KAAM,GACNnN,MAAO,MAInBiQ,KAAM,WACF,GAA4ExM,GAASs9C,EAAeC,EAAhGj+C,EAAOzL,KAAM2B,EAAS8J,EAAK9J,OAAQgoD,EAAgBl+C,EAAK5L,QAAQ8L,MAChEhK,KACAwK,EAAUxK,EAAOwK,QACjBs9C,EAAgBE,EAAcx+C,QACzBgB,EAAQ+M,GAAG,aAAgBzN,EAAK9J,OAAO9B,QAAQmgD,UAC3C7zC,EAAQ,GAAGhG,MAAMuC,OAClByD,EAAQzD,MAAM+gD,EAAcG,aAAe78C,SAASZ,EAAQyF,IAAI,qBAAsB,IAAM7E,SAASZ,EAAQyF,IAAI,sBAAuB,KAEvIjQ,EAAOsmD,SACRyB,EAAeD,EAAc1zC,SAC7B5J,EAAQyF,KACJ0lB,IAAKhnB,KAAKF,IAAI,EAAGrD,SAAS28C,EAAapyB,IAAK,IAAMnrB,EAAQ09C,cAAgB98C,SAAStB,EAAK9J,OAAOwJ,QAAQyG,IAAI,kBAAmB,KAC9HiE,KAAMvF,KAAKF,IAAI,EAAGrD,SAAS28C,EAAa7zC,KAAM,QAGtDlU,EAAOsR,UAInBT,KAAM,WACExS,KAAK2B,QACL3B,KAAK2B,OAAO8R,SAGpBkC,MAAO,WAAA,GACCm0C,GAAW,WACX3+C,EAAUnL,KAAKmL,QACfwH,EAAW3S,KAAK2oD,QAAQx9C,QAAQkB,KAAKy9C,EACzC3+C,GAAQkB,KAAKy9C,EAAUn3C,GAAY,GAAGgD,QAAQvJ,KAAK46C,GAAWltB,QAAQnkB,QACjEhD,GAAyB,IAAbA,GACbxH,EAAQmrC,WAAWwT,IAG3BtB,mBAAoB,WAAA,GACZsB,GAAW,WACX3+C,EAAUnL,KAAKknD,cAAc/7C,QAC7BwH,EAAW3S,KAAK2oD,QAAQx9C,QAAQkB,KAAKy9C,EACzC3+C,GAAQa,QAAQ,0BAA0BM,SAAS,sBACnDnB,EAAQkB,KAAKy9C,EAAUn3C,GAAY,GAAGvG,KAAK46C,GAAWltB,QAAQnkB,QACzDhD,GAAyB,IAAbA,GACbxH,EAAQmrC,WAAWwT,IAG3BN,wBAAyB,SAAUO,EAAelmD,GAC9C,IAAKA,EAAKsa,IACN,MAAO4rC,EAEX,IAAIC,GAAMD,EAAgB,IAW1B,OAVIlmD,GAAKua,OACL4rC,GAAO,WAEPnmD,EAAKupC,QACL4c,GAAO,YAEPnmD,EAAKspC,MACL6c,GAAO,UAEXA,GAAOnmD,EAAKsa,IAAM,KAGtB8rC,cACI,kBACA,kBACA,OACA,OACA,YAEJn+C,SACA48C,aAAc,SAAU9kD,GACpB,QAASA,IAAYpE,GAAMsC,GAAGmC,OAAOC,eAEzC0kD,YAAa,SAAU98C,GACnB,GAAIo+C,GAAa1mD,EAAoC3D,EAAyFyD,EAA1H6mD,EAAcnqD,KAAKiqD,aAAuB/lD,EAAe1E,EAAMsB,cAAetB,EAAMsC,GAAGmC,OAAOC,cAAe+xB,IACjI,KAAKzyB,EAAI,EAAOsI,EAAMjL,OAAV2C,EAAkBA,IAC1B0mD,EAAcp+C,EAAMtI,GACpBF,EAAO4mD,EAAY5mD,KACflC,EAAEmO,cAAc26C,GACZ5mD,GAAQY,EAAaZ,IACrB2yB,EAAO3yB,GAAQ3D,KAAWuE,EAAaZ,IACvC3D,EAAOs2B,EAAO3yB,GAAMzD,QAASqqD,KAE7BrqD,EAAUF,GACNoE,SAAU,aACVwH,KAAM,SACNkH,MAAO,IACRy3C,GACErqD,EAAQyD,OACTzD,EAAQyD,KAAO,UAEnBzD,EAAQkE,SAAW,KAAOlE,EAAQyD,KAC7BzD,EAAQ8C,UAA4B,UAAhB9C,EAAQ0L,OAC7B1L,EAAQ8C,SAAW+I,EAAS7I,YAAYE,eACxClD,EAAQ4S,MAAQ5S,EAAQ4S,OAAS5S,EAAQ0pD,SAE7CtzB,EAAO3yB,IAAUzD,QAASA,IAEvBqE,EAAagmD,KACpBj0B,EAAOi0B,GAAehmD,EAAagmD,GAG3C,KAAK1mD,EAAI,EAAO2mD,EAAYtpD,OAAhB2C,EAAwBA,IAC3ByyB,EAAOk0B,EAAY3mD,MACpByyB,EAAOk0B,EAAY3mD,IAAMU,EAAaimD,EAAY3mD,IAG1D,OAAOyyB,IAEX4yB,OAAQ,WAEJ,QAAS7hB,GAAUrkC,GACf,GAAIszB,EASJ,OARItzB,GAASD,QACTuzB,EAAStzB,EAASD,WAEbtB,EAAEq6B,WAAW94B,KACdA,EAAWnD,EAAMmD,SAASA,IAE9BszB,EAAStzB,EAAS9C,IAEfuB,EAAE+M,KAAK8nB,GAElB,QAASm0B,KACDC,EAAM7rC,WAAW3d,SACbwO,IACAg7C,EAAMz3B,KAAK,WAAY03B,GACvBA,KAEJD,EAAM14C,SAASxG,IAGvB,QAASo/C,GAAW3mD,GACZA,IAAamjD,GACbsD,EAAQjpD,EAAE,mDACVipD,EAAMz3B,KAAK,WAAwD,KAA5CxxB,EAAEqC,QAAQG,EAAU8jD,KAE3C2C,EAAQjpD,EAAE,mCA3BlB,GAAqCvB,GAAS8C,EAAU6nD,EAAa5mD,EAAgF6mD,EAAWC,EAAwFL,EAAO7mD,EAA3PiI,EAAOzL,KAAM8L,EAAQL,EAAKK,MAAiD29C,EAAgBh+C,EAAKk9C,QAAQx9C,QAASA,EAAUM,EAAKN,QAAQ2W,QAAkC6oC,EAAal/C,EAAKk9C,QAAQ9oD,QAAQiM,MAAO5J,EAAU1C,EAAMwC,QAAQE,QAAmBooD,EAAgB,EAAGj7C,EAAY5D,EAAK5L,QAAQwP,WAAa5D,EAAK5L,QAAQwP,UAAU5C,QAASi7C,EAAqB1nD,KAAK0nD,kBAmCrX,KALAv8C,EAAQ2W,QACJ6oC,EAAW9pD,SACX+C,EAAW+mD,EAAW,GAAGrnD,MAAQqnD,EAAW,IAEhDJ,EAAW3mD,EAAU8jD,GAChBlkD,EAAI,EAAOmnD,EAAW9pD,OAAf2C,EAAuBA,IAC/BI,EAAW+mD,EAAWnnD,GAAGF,MAAQqnD,EAAWnnD,GAC5C3D,EAAUiM,EAAMlI,IAAakI,EAAMlI,GAAU/D,SACxCA,GAAWuB,EAAEmO,cAAc3L,KAC5B/D,EAAU+D,GAEdjB,EAAW9C,GAAWA,EAAQ8C,SACd,SAAZiB,IACAwmD,IACAhpD,EAAE,8BAAgCuQ,SAASlG,EAAKN,SAChDo/C,EAAW3mD,EAAU8jD,IAEpB/kD,IAGL+nD,EAAej/C,EAAKg9C,aAAa7kD,GAC7B6mD,GAAaC,GAAgB9mD,GAAYmjD,IACzCqD,IACAG,EAAW3mD,EAAU8jD,GACrB+C,EAAYC,GAEhB/nD,EAAWqkC,EAAUrkC,GACrB6nD,EAAcppD,EAAEuB,GAAUgP,SAAS04C,GACf,UAAhBK,IACAN,IACAG,EAAW3mD,EAAU8jD,IAErB7nD,EAAQsX,MAAQqzC,EAAY7rB,SAAS,WACrC6rB,EAAYpyC,MAAMjW,EAAMtC,EAAQsX,KAAMsyC,EAAc,KAG5DW,KACAhpD,EAAEqK,EAAKN,SAASqT,SAAS,mBAAmBlS,SAAS,kBACjDb,EAAK5L,QAAQ0M,OAASrK,EAAQkR,MAA0B,EAAlBlR,EAAQ6c,SAC9CtT,EAAK9J,OAAOwK,QAAQC,KAAK,KAAKC,KAAK,eAAgB,MAEvDZ,EAAKm/C,eACDv7C,GACA5D,EAAK08C,mBAAmB18C,EAAKN,QAAQiB,KAAK,uBAE9CX,EAAKo/C,QAAQ,UAAW,WACpB,OAASzvB,SAAU3vB,EAAKN,YAGhCy/C,aAAc,WACVxpD,EAAEpB,KAAKmL,SAASqT,WAAWme,KAAK,WAC5Bv7B,EAAEpB,MAAMwe,WAAWsc,OAAO,WACtB,OAAQ15B,EAAEpB,MAAM2+B,SAAS,sBAC1BvlB,YAAY,eAAe0gB,QAAQxtB,SAAS,iBAAiBwyB,MAAMtC,OAAOlwB,SAAS,eAAewyB,SAG7G/rB,aAAc,SAAUC,GACpBhT,KAAK2gB,QAAQma,OAAO,gBAAgB6B,KAAK,WACrC,GAAI6nB,GAAYpjD,EAAEpB,MAAM4yB,KAAK,iBACzB4xB,IACAA,EAAUE,SAAS1xC,MAI/BjC,QAAS,WACLlP,EAAO/B,GAAGiR,QAAQhR,KAAKC,KACvB,IAAIiJ,GAAI6C,EAAQ9L,KAAK8L,KACrB,KAAK7C,IAAM6C,GACHA,EAAM7C,GAAI8H,SACVjF,EAAM7C,GAAI8H,SAGd/Q,MAAK2B,QACL3B,KAAK2B,OAAOoP,UAEZ/Q,KAAKonD,gBACL5nD,EAAMsrD,aAAa9qD,KAAKonD,gBAExBpnD,KAAKknD,eACLlnD,KAAKknD,cAAcn2C,WAG3Bm4C,cAAe,WACX,GAAIz9C,GAAOzL,KAAM+qD,EAAet/C,EAAKy7C,cAAgBz7C,EAAKy7C,cAAc/7C,QAAU/J,KAClFqK,GAAKu/C,kBAAkBv/C,EAAKN,QAAQ06B,IAAIklB,KAE5CC,kBAAmB,SAAU7/C,GACzB,GAAIM,GAAOzL,KAAMirD,EAAU,uBAAwBC,EAAiBD,EAAU,0BAA2BE,EAAkBF,EAAU,mBACrI9/C,GAAQ+J,IAAIP,GAAII,GAAG,aAAeJ,EAAIu2C,EAAgB,WAClD9pD,EAAEpB,MAAMsM,SAAS,mBAClByI,GAAG,aAAeJ,EAAIu2C,EAAgB,WACrC9pD,EAAEpB,MAAMoZ,YAAY,mBACrBrE,GAAG,YAAcJ,EAAIs2C,EAAS,SAAU/7C,GACvCA,EAAEsH,mBACHzB,GAAG,UAAYJ,EAAIqyC,EAAW,SAAU93C,GAIvC,QAASk8C,GAAKp1C,EAAWF,EAAWu1C,GAApC,GACQv/C,GAAQgK,EAAU1J,KAAK46C,GACvB1lB,EAAQx1B,EAAMw1B,MAAMyC,GAAW/tB,CAInC,OAHIq1C,KACA/pB,EAAQhxB,KAAKF,IAAI,EAAGE,KAAKH,IAAIrE,EAAMjL,OAAS,EAAGygC,KAE5Cx1B,EAAMw1B,GAVY,GAGzBgqB,GAAcC,EAFdxnB,EAAU/jC,KACVqP,EAAY5D,EAAK5L,QAAQwP,WAAa5D,EAAK5L,QAAQwP,UAAU5C,QAC7B0J,EAAUjH,EAAEiH,OAS5CA,IAAW/T,EAAKsU,OAASP,GAAW/T,EAAKqU,KACpCrV,EAAE2iC,GAASpF,SAAS,iBACrB2sB,EAAeF,EAAKj1C,GAAW/T,EAAKsU,MAAQ,EAAI,GAAIjL,EAAKN,SAAS,KAE/DkE,GAAc8G,GAAW/T,EAAK0V,IAAM3B,GAAW/T,EAAK2V,KAEpD5B,GAAW/T,EAAKm+C,KACnB90C,EAAKy7C,eAAiBz7C,EAAKy7C,cAAclH,WACzCv0C,EAAKy7C,cAAczzC,QAEvB63C,EAAe7/C,EAAKk9C,SACbxyC,GAAW/T,EAAKqV,KAASvI,EAAE+I,SAAW/I,EAAEgJ,SAE3CqzC,EADAl8C,GACmBjO,EAAE2iC,EAAQrD,eAAe/B,SAAS,yBAA2BlzB,EAAKy7C,cAAc/7C,QAEhFM,EAAKN,QAExB+D,EAAEiJ,SACFmzC,EAAeF,EAAK,GAAIG,IAExBD,EAAeF,EAAK,EAAGG,GAClBD,IACDA,EAAe7/C,EAAKk9C,WAjB5B2C,EAAeF,EAAKj1C,GAAW/T,EAAK2V,KAAO,EAAI,GAAItM,EAAKy7C,cAAc/7C,SAAS,GAqB/EmgD,IACAp8C,EAAEsH,iBACF80C,EAAa31C,WAElBZ,GAAG,QAAUJ,EAAIu2C,EAAgB,SAAUh8C,GAC1C,GAAIs8C,GAASpqD,EAAEpB,KACfkP,GAAEsH,iBACFtH,EAAEu8C,kBACFD,EAAOpyC,YAAY,iBACdoyC,EAAOtyC,GAAG,iBACXzN,EAAKk9C,QAAQxxC,KAAK1L,EAAK29C,UAAUppD,SAEtC+U,GAAG,QAAUJ,EAAIw2C,EAAiB,SAAUj8C,GAC3CA,EAAEsH,oBAGV4yC,UAAW,SAAUj+C,GAAV,GAIHiqB,GAIAvxB,EAII6nD,CAXR,IAAKvgD,EAUL,MAPIiqB,GAAYjqB,EAAQiqB,UACpB,YAAYle,KAAKke,KACjBA,EAAYjqB,EAAQqX,WAAW4S,WAE/BvxB,EAAOzC,EAAEq0B,KAAKL,EAAUtgB,MAAM,KAAM,SAAU0f,GAC9C,OAAQ,+FAA+Ftd,KAAKsd,KAE5G3wB,EAAK,IACD6nD,EAAW7nD,EAAK,GAChB6nD,EAASz+C,QAAQ,SAAW,EACrBzN,EAAMg7C,YAAYkR,EAASvjB,UAAUujB,EAASz+C,QAAQ,QAAU,IAEhEy+C,EAASvjB,UAAUujB,EAASC,YAAY,KAAO,IAGvD,UAEXtvC,aAAc,WACV,GAAI5Q,GAAOzL,KAAM0L,EAAWlM,EAAMsC,GAAG6J,OAAQA,EAASF,EAAKk9C,QAAS/yC,EAAQjK,EAAO0I,WAAYwK,EAAQnT,EAASgQ,WAAWF,UAAU5F,GAAQyD,EAAa1N,EAAO9L,QAAQwZ,WAAY2xB,EAAoBv/B,EAAKmgD,mBAAmBh2C,EACjOiJ,GAAQnT,EAASG,IAAIovB,SAASpc,EAAOnT,EAASG,IAAIwqB,iBAAiB,GAC9DxX,EAAMhe,SACPge,GAASjJ,EAAMgG,iBAEnBnQ,EAAKkV,QAAQgc,KAAK,WAAA,GAGN76B,GAFJ+B,EAAO4H,EAAKK,MAAML,EAAK29C,UAAUppD,MACjC6D,KACI/B,EAAKV,EAAEpB,MACP6D,EAAKoI,QACLpI,EAAKoI,OAAOnK,EAAI+c,GAEhBxF,GACA5N,EAAKogD,uBAAuBhoD,EAAM/B,EAAIkpC,MAIlDhrC,KAAKiM,UAET2/C,mBAAoB,SAAUh2C,GAC1B,GAAI5V,KAAK2oD,QAAQ9oD,QAAQwZ,WAAY,CACjC,GAAI3N,GAAWlM,EAAMsC,GAAG6J,MACxB,OAAIiK,GAAM+F,UACCjQ,EAAS4N,WAAW0xB,kBAAkBp1B,GAEkB,IAAxDlK,EAASgQ,WAAWmrB,kBAAkBjxB,GAAO/U,SAIhEgrD,uBAAwB,SAAUhoD,EAAM/B,EAAIkpC,GAApB,GAQZ0H,GAEIoZ,EACK3tC,EAEG4tC,EAOZC,EAnBJ1oD,EAAOO,EAAKP,KACZ2oD,EAAYnqD,EACZoqD,EAAkBroD,EAAKhE,QAAQqsD,eAInC,IAHIA,IAAoB7qD,IACpB6qD,EAAkB9qD,EAAEqC,QAAQH,EAAMoI,EAAS4N,WAAW6yC,kBAAoB,IAE1ED,EAAiB,CAEjB,GADIxZ,EAAU1H,EAAoB,OAAS,IACtClpC,EAAGoX,GAAG,WAAY,CACf4yC,EAAShqD,EAAG8wB,MAChB,KAASzU,IAAO2tC,GACZ,GAAI3tC,EAAI+c,MAAM,wBAAyB,CAC/B6wB,EAASD,EAAO3tC,GACpB8tC,EAAYF,EAAO5/C,OACnB,QAIZ8/C,EAAUr6C,IAAI,UAAW8gC,GACrBsZ,EAAUC,EAAUjgD,QAAQ,MACY,IAAxCggD,EAAQxtC,SAAS,YAAY3d,QAC7BmrD,EAAQp6C,IAAI,UAAW8gC,KAInCzmC,OAAQ,WACJjM,KAAK4qD,gBAETwB,QAAS,SAAUl9C,GAAV,GACDm9C,GAAiBn9C,EAAExG,MACnB2G,EAAYrP,KAAKH,QAAQwP,WAAarP,KAAKH,QAAQwP,UAAU5C,QAC7DF,EAAQvM,KAAKknD,aACjBlnD,MAAKqc,eACAhN,IAGD9C,EAAMyzC,WACNzzC,EAAMkH,OAAM,GAEhBzT,KAAKssD,iBACLtsD,KAAKusD,QAAQF,GACbrsD,KAAKwsD,SAASH,GACdrsD,KAAKkoD,sBAAsBloD,KAAKmL,SAAS,GACzCnL,KAAKkoD,sBAAsBloD,KAAKknD,cAAc/7C,SAAS,GACvDnL,KAAKmL,QAAQqT,SAAS,uBAAuB5M,IAAI,aAAcrF,EAAMpB,QAAQ+N,GAAG,UAAY,SAAW,aAE3GozC,eAAgB,WACZtsD,KAAKmL,QAAQqT,SAAS,MAAMme,KAAK,SAAU8vB,EAAKthD,GAC5C,GAAIk/C,GAAQjpD,EAAE+J,EACdk/C,GAAMz3B,KAAK,aAAcy3B,EAAMT,YAAW,OAGlD2C,QAAS,SAAU7jD,GAAV,GACD2hD,GAAOqC,EAGElpD,CAFb,IAAIkF,EAAQ1I,KAAK2sD,eAEb,IADAD,EAAgB1sD,KAAK4sD,iBAAiB9xB,OAAO,2BACpCt3B,EAAIkpD,EAAc7rD,OAAS,EAAG2C,GAAK,IACxC6mD,EAAQqC,EAAc7W,GAAGryC,KACrBkF,EAAQ1I,KAAK2sD,iBAF0BnpD,IAKvCxD,KAAK6sD,WAAWxC,IAKhCmC,SAAU,SAAU9jD,GAAV,GACF2hD,GAAOyC,EAGEtpD,CAFb,IAAIkF,EAAQ1I,KAAK2sD,eAEb,IADAG,EAAe9sD,KAAK+sD,gBACXvpD,EAAI,EAAOspD,EAAajsD,OAAjB2C,IACZ6mD,EAAQyC,EAAajX,GAAGryC,KACpBkF,EAAQ1I,KAAK2sD,iBAAmB3sD,KAAKgtD,WAAW3C,EAAO3hD,IAFtBlF,OAQjDupD,cAAe,WAAA,GACPxgD,GAAQvM,KAAKknD,cACb4F,EAAe9sD,KAAKmL,QAAQqT,SAAS,mBAAmBsc,OAAO,UAKnE,OAJAgyB,GAAeA,EAAajnB,IAAIt5B,EAAMpB,QAAQqT,SAAS,OACvDsuC,EAAa7uB,KAAK,SAAUC,EAAGC,GAC3B,MAAO/8B,GAAE88B,GAAGtL,KAAK,YAAcxxB,EAAE+8B,GAAGvL,KAAK,YAAc,EAAI,KAExDk6B,GAEXF,eAAgB,WACZ,MAAO5sD,MAAKmL,QAAQqT,SAAS,wCAAwCsc,OAAO,aAEhF6xB,aAAc,WACV,GAAIjkD,GAAQ,CAIZ,OAHA1I,MAAK4sD,iBAAiBjwB,KAAK,WACvBj0B,GAAStH,EAAEpB,MAAM4yB,KAAK,gBAEnBtiB,KAAKknB,KAAK9uB,IAErBmkD,WAAY,SAAUxC,GAClB,GAAIA,EAAMz3B,KAAK,YAAa,CACxB,GAAIrmB,GAAQvM,KAAKknD,aACjBmD,GAAM4C,SAASxwB,UAAUlwB,EAAMpB,SAASmB,SAAS,6BAEjD+9C,GAAM73C,QAGdw6C,WAAY,SAAU3C,EAAO3hD,GACzB,GAAIsvB,GAAU0G,CACd,OAAI2rB,GAAMxpD,QAAU6H,EAAQ1I,KAAK2sD,eAAiBtC,EAAMz3B,KAAK,eACrDy3B,EAAM1rB,SAAS,0BACf3G,EAAWqyB,EAAMz3B,KAAK,YACL,IAAboF,EACAqyB,EAAM4C,SAASxwB,UAAUz8B,KAAKmL,UAE9BuzB,EAAW1+B,KAAKmL,QAAQqT,WAAWsc,OAAO,SAAU2xB,EAAKthD,GACrD,MAAO/J,GAAE+J,GAASynB,KAAK,cAAgBoF,EAAW,IAEtDqyB,EAAM4C,SAASx9C,YAAYivB,IAE/B2rB,EAAMjxC,YAAY,0BAElBixC,EAAM1xC,QAEH,IAEJ,KAGfvX,EAAEzB,OAAO+L,GAAYgB,QAASA,KAChC/K,OAAO8e,QAAU9e,OAAOnC,MAAMihB,SAChB,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,kBAAmBD,IAC9C,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQwC,EAAQf,EAAEe,MAAO8B,EAASzE,EAAMsC,GAAG6J,OAAQC,EAAM3H,EAAO4H,IAAKhJ,EAAcoB,EAAOpB,YAAa6Y,EAAazX,EAAOyX,WAAY+sB,EAAUxkC,EAAOwkC,QAAS9zB,EAAK,cAAeu4C,EAAc,iBAAkBC,EAAgB,mBAAoB7rD,EAAO2C,EAAO3C,KAAMmB,EAAewB,EAAOxB,aAAckb,EAAoB1Z,EAAO0Z,kBAAmB09B,EAAoBp3C,EAAOo3C,kBAAmB13C,EAAeM,EAAOpB,YAAYc,aAAcypD,EAAa5tD,EAAM4tD,WACjfzqD,EAAWnD,EAAMmD,SACjB0qD,EAAiB,+CACjBC,EAAoB,GAAIjS,KAAqB33C,MAAO,YACpD6pD,EAAe5vC,EAAkBhe,QACjCC,KAAM,SAAUC,GACZ,GAAI4Z,GAAIrY,EAAEzB,QACNypC,YAAappC,KAAKopC,YAClBoJ,cAAc,GACf3yC,MACH8d,GAAkB7d,GAAGF,KAAKG,KAAKC,KAAMyZ,IAEzC+zC,WAAY,SAAUnjD,EAAMD,GAAhB,GAGJqjD,GAIAC,CACJ,OAPArjD,GAAOA,GAAQ,EACfD,EAAUA,GAAW,EACjBqjD,EAAa9qD,EAAS0qD,IACtB3kD,MAAO,IAAM0B,EACboF,QAASvL,EAAOvC,wBAEhBgsD,EAAY,IAAMrjD,EACf,oCAA4CimC,MAAMjmC,EAAO,GAAGmJ,KAAK,qBAAwBk6C,EAAY,OAAcpd,MAAMlmC,EAAU,GAAGoJ,KAAKi6C,GAAc,SAAW,YAE/KrkB,YAAa,SAAUz9B,EAAQiK,GAC3B,GAAI+3C,GAAgBvsD,EAAE,mBAAoBuK,EAAOjB,UAAU4rC,WAAW,YACtE1gC,GAAMiB,SAAS82C,EAAcvhD,KAAK,MAAM,GAAI,GAC5CwJ,EAAMkB,UAAS,GACfnL,EAAOoL,YAAYnB,IAEvBuB,KAAM,WACF,GAAItX,GAAUG,KAAKH,OACnBA,GAAQkc,KAAO/b,KAAKwtD,WAAW3tD,EAAQwK,KAAMxK,EAAQuK,SACrDuT,EAAkB7d,GAAGqX,KAAKpX,KAAKC,SAGnC4tD,EAAYtsD,EAAK3B,QACjB2e,WAAY,SAAUxc,EAAIjC,GAAd,GAEJ0M,GAQAZ,EAEAvD,EASAylD,CApBJvsD,GAAKxB,GAAGwe,WAAWve,KAAKC,KAAM8B,EAAIjC,GAC9B0M,EAAQnL,EAAEpB,KAAKH,QAAQuoD,eAAez2C,SAAS,QAAQ02C,YACvD5H,OAAQ3+C,EACRymD,kBAAkB,EAClBt1C,KAAM9Q,EAAMnC,KAAK8tD,MAAO9tD,MACxBs5C,SAAUn3C,EAAMnC,KAAK+tD,UAAW/tD,MAChCyT,MAAOtR,EAAMnC,KAAK+/C,OAAQ//C,QAC3B4yB,KAAK,cACR9wB,EAAGsW,MAAMjW,EAAMnC,KAAKguD,QAAShuD,OAAOyV,QAAQtT,EAAMnC,KAAKkgD,SAAUlgD,OAC7D2L,EAAS3L,KAAK2oD,QAAU9oD,EAAQ8L,OACpC3L,KAAKiuD,OAAS1hD,EACVnE,EAAc,GAAInE,GAAOiqD,iBACzBvrD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO9G,EAAO9L,QAAQyE,SAAS8D,cAEnChI,QAAS6D,EAAOkqD,mBAChBC,gBAAgB,IAEpBzqD,EAAa,oBAAqByE,GAC9BylD,EAASzsD,EAAE,iCAAqCgH,EAAYvI,QAAQ8C,SAASD,UAAY,UAC7FmrD,EAAOl8C,SAASpF,EAAMpB,SAClBQ,EAAOc,SACPd,EAAOc,QAAQu+C,kBAAkB6C,IAGzCthD,MAAO,WACH,MAAOvM,MAAKiuD,QAEhBF,UAAW3sD,EAAEsd,KACbovC,MAAO,WACH9tD,KAAKiuD,OAAOpuD,QAAQ4gD,OAAOn0C,SAAS4gD,IAExCnN,OAAQ,WACJ//C,KAAKiuD,OAAOpuD,QAAQ4gD,OAAOrnC,YAAY8zC,IAE3ChN,SAAU,SAAUhxC,GAAV,GACF9M,GAAO5C,EAAM4C,KACb+b,EAAMjP,EAAEiH,OACRgI,IAAO/b,EAAK2V,MAAQ7I,EAAEgJ,OACtBlY,KAAKiuD,OAAOh7C,OACLkL,GAAO/b,EAAKm+C,KACnBvgD,KAAKiuD,OAAOx6C,SAGpBu6C,QAAS,SAAU9+C,GACf,GAAIs8C,GAASpqD,EAAE8N,EAAEmJ,QAAQrM,QAAQ,UAC5Bw/C,GAAO7sB,SAAS,qBACjB3+B,KAAKuM,QAAQ08B,UAGrBh9B,OAAQ,SAAUnK,GACd,GAAIyK,GAAQvM,KAAKuM,OACbA,GAAMJ,SAA2C,SAAhCI,EAAMJ,QAAQyF,IAAI,YACnCrF,EAAMkH,QAEV3R,EAAGsX,YAAY,kBAEnBrI,QAAS,WACL/Q,KAAKiuD,OAAOl9C,aAGhBs9C,EAAkBT,EAAUjuD,QAC5BC,KAAM,SAAUC,GACZG,KAAKsuD,KAAO,EACZtuD,KAAKqK,KAAO,EACZujD,EAAU9tD,GAAGF,KAAKG,KAAKC,KAAMoB,EAAEzB,OAAOE,GAClCO,QAASmtD,EACTnF,cAAe,2BAAmC9X,MAAMtwC,KAAKsuD,KAAOtuD,KAAKqK,KAAO,GAAGmJ,KAAK,+CAAmD,yCAGnJu6C,UAAW,WAOP,QAASQ,GAAkBr/C,GACvB,GAAIqC,GAAInQ,EAAEO,OACV,QACIuzC,IAAK5kC,KAAKk+C,OAAOt/C,EAAEu/C,QAAUl9C,EAAEiL,YAAc7M,EAAM2nB,KAAOo3B,GAAc,EACxEC,IAAKr+C,KAAKk+C,OAAOt/C,EAAE0/C,QAAUr9C,EAAEs9C,aAAel/C,EAAMkG,MAAQi5C,GAAa,GAVjF,GAA6PA,GAAWJ,EAApQjjD,EAAOzL,KAAMmL,EAAUM,EAAKwiD,OAAO9iD,QAASgqC,EAAQhqC,EAAQiB,KAAK,cAAe2iD,EAAY5Z,EAAMU,GAAG,GAAImZ,EAAW7Z,EAAMU,GAAGV,EAAMt0C,OAAS,GAAI8O,EAAQnQ,EAAMyvD,UAAUF,GAAYjwB,EAAMt/B,EAAMyvD,UAAUD,GAAWV,EAAO7iD,EAAK6iD,KAAMjkD,EAAOoB,EAAKpB,IACvPc,GAAQiB,KAAK,KAAKiuC,UAAUhuC,KAAK,eAAgB,MACjDyyB,EAAIjpB,MAAQm5C,EAAS,GAAGE,YACxBpwB,EAAIxH,KAAO03B,EAAS,GAAGz3B,aACvBu3B,GAAahwB,EAAIjpB,KAAOlG,EAAMkG,MAAQy4C,EACtCI,GAAc5vB,EAAIxH,IAAM3nB,EAAM2nB,KAAOjtB,EAQrCc,EAAQgkD,YAAYx6C,GAAII,GAAG,YAAa,SAAU7F,GAC9CzD,EAAK2jD,cAAcb,EAAkBr/C,MACtC6F,GAAG,aAAc,WAChBtJ,EAAK2jD,kBACNr6C,GAAG,OAAQ,SAAU7F,GACpBA,EAAEsH,gBACF,IAAIjB,GAAQ63C,EAAWl+C,GAAG,EAC1BzD,GAAK4jD,MAAMd,EAAkBh5C,EAAMjD,cAG3Cg9C,OAAQ,SAAUjwB,GACd,MAAOA,IAAQA,EAAK6V,IAAM,GAAK7V,EAAKsvB,IAAM,GAAiB3uD,KAAKqK,MAAjBg1B,EAAK6V,KAAgCl1C,KAAKsuD,MAAjBjvB,EAAKsvB,KAEjFU,MAAO,SAAUhwB,GACTr/B,KAAKsvD,OAAOjwB,KACZr/B,KAAK2oD,QAAQxxC,KAAK,eACd9M,KAAMg1B,EAAK6V,IACX9qC,QAASi1B,EAAKsvB,MAElB3uD,KAAKiuD,OAAOx6C,UAGpB27C,cAAe,SAAU/vB,GAAV,GACPl0B,GAAUnL,KAAKiuD,OAAO9iD,QACtBokD,EAASpkD,EAAQiB,KAAK,aACtB+oC,EAAQhqC,EAAQiB,KAAK,cACrBkiD,EAAOtuD,KAAKsuD,KACZhqD,EAAWtE,KAAK2oD,QAAQ9oD,QAAQyE,QAChCtE,MAAKsvD,OAAOjwB,IACZkwB,EAAOr0C,KAAK1b,EAAM+D,OAAOe,EAASuD,gBAAiBw3B,EAAK6V,IAAK7V,EAAKsvB,MAClExZ,EAAMxY,KAAK,SAAUn5B,GACjBpC,EAAEpB,MAAM8e,YAAYquC,EAA0B9tB,EAAKsvB,IAAhBnrD,EAAI8qD,GAA8BjvB,EAAK6V,IAAhB1xC,EAAI8qD,OAGlEiB,EAAOr0C,KAAK5W,EAASqD,cACrBwtC,EAAM/7B,YAAY+zC,KAG1BjN,SAAU,SAAUhxC,GAAV,GAKF9M,GACA+b,EACAg3B,EACAx/B,EACA65C,EACAC,EACA/iB,EAcAgjB,CAxBJ9B,GAAU9tD,GAAGogD,SAASngD,KAAKC,KAAMkP,GAC5BlP,KAAKiuD,OAAOjO,YAGb59C,EAAO5C,EAAM4C,KACb+b,EAAMjP,EAAEiH,QACRg/B,EAAQn1C,KAAKiuD,OAAO9iD,QAAQiB,KAAK,cACjCuJ,EAAQrF,KAAKF,IAAI+kC,EAAMra,OAAO,qBAAqB0B,OAAO8E,QAAS,GACnEkuB,EAAel/C,KAAKk+C,MAAM74C,EAAQ3V,KAAKsuD,MACvCmB,EAAkB95C,EAAQ3V,KAAKsuD,KAC/B5hB,GAAU,EACVvuB,GAAO/b,EAAK2V,MAAS7I,EAAEgJ,OAGhBiG,GAAO/b,EAAK0V,IACnB40B,GAAU,EACV8iB,KACOrxC,GAAO/b,EAAKsU,OACnBg2B,GAAU,EACV+iB,KACOtxC,GAAO/b,EAAKqU,OACnBi2B,GAAU,EACV+iB,MAVA/iB,GAAU,EACV8iB,KAWAE,GACAxa,IAAK5kC,KAAKF,IAAI,EAAGE,KAAKH,IAAInQ,KAAKqK,KAAMmlD,EAAe,IACpDb,IAAKr+C,KAAKF,IAAI,EAAGE,KAAKH,IAAInQ,KAAKsuD,KAAMmB,EAAkB,KAEvDtxC,GAAO/b,EAAKk+C,MACZtgD,KAAKqvD,MAAMK,GAEX1vD,KAAKovD,cAAcM,GAEnBhjB,IACAx9B,EAAEsH,iBACFtH,EAAE+5C,8BAGV6E,MAAO,WACH,GAAIxpD,GAAWtE,KAAK2oD,QAAQ9oD,QAAQyE,QACpCspD,GAAU9tD,GAAGguD,MAAM/tD,KAAKC,MACxBA,KAAKuM,QAAQpB,QAAQiB,KAAK,aAAa8O,KAAK5W,EAASqD,cAAcm3B,MAAM1yB,KAAK,cAAcgN,YAAY+zC,IAE5GpN,OAAQ,WACJ6N,EAAU9tD,GAAGigD,OAAOhgD,KAAKC,MACzBA,KAAKuM,QAAQpB,QAAQ+J,IAAI,IAAMP,MAGnCg7C,EAAmBlnB,EAAQ9oC,QAC3BwX,KAAM,WAEF,IAFE,GACyDy4C,GAAW1a,EAAK2a,EAUlErsD,EAVLoS,EAAQ5V,KAAK4oC,WAAU,GAAOuP,EAAKviC,EAAMyH,aACtB,MAAhBzR,EAAItI,KAAK60C,IACZA,EAAKA,EAAGrlB,UAEZ,KAAI9yB,KAAKqZ,eAAgBpV,EAAOqV,WAAWwtB,gBAAgBqR,GAA3D,CAMA,IAHAjD,EAAMiD,EAAGrlB,WACT88B,EAAY1a,EAAI12B,SAAS3d,OACzBgvD,EAAS3a,EAAI5hB,WAAU,GACd9vB,EAAI,EAAO0xC,EAAIC,MAAMt0C,OAAd2C,EAAsBA,IAClCqsD,EAAO1a,MAAM3xC,GAAG8K,UAAYrK,EAAOvC,qBAEV,WAAzB1B,KAAKH,QAAQm4B,SACbpsB,EAAIY,aAAaqjD,EAAQ3a,GAEzBtpC,EAAI6D,YAAYogD,EAAQ3a,GAE5Bl1C,KAAK6oC,aAAajzB,OAGtBk6C,EAAsBrnB,EAAQ9oC,QAC9BwX,KAAM,WACF,GAAgH44C,GAAavsD,EAAsB+mC,EAAMylB,EAArJp6C,EAAQ5V,KAAK4oC,WAAU,GAAOuP,EAAKvsC,EAAII,QAAQ4J,EAAMyH,aAAc,MAAOwuB,EAAQjgC,EAAII,QAAQmsC,EAAI,SAA0B9tC,EAAOwhC,EAAMxhC,KAAqB2tB,EAAWh4B,KAAKH,QAAQm4B,QAC1L,KAAIh4B,KAAKqZ,eAAgBpV,EAAOqV,WAAWwtB,gBAAgBqR,GAA3D,CAIA,IADA4X,EAAcnkD,EAAI4mB,cAAc2lB,GAAI,GAC/B30C,EAAI,EAAO6G,EAAKxJ,OAAT2C,EAAiBA,IACzB+mC,EAAOlgC,EAAK7G,GAAG2xC,MAAM4a,GACrBC,EAAUzlB,EAAKjX,YACf08B,EAAQ1hD,UAAYrK,EAAOvC,sBACX,UAAZs2B,EACApsB,EAAIY,aAAawjD,EAASzlB,GAE1B3+B,EAAI6D,YAAYugD,EAASzlB,EAGjCvqC,MAAK6oC,aAAajzB,OAGtBq6C,EAAmBxnB,EAAQ9oC,QAC3BwX,KAAM,WAAA,GASE00B,GACAyf,EAQS9nD,EAjBToS,EAAQ5V,KAAK4oC,YACbv+B,EAAOqR,EAAW0rB,OAAOxxB,EAAO,SAAU0M,GAC1C,MAAOlhB,GAAEkhB,GAAMtW,QAAQ,MAAM,KAE7BkpC,EAAM7qC,EAAK,EACf,KAAIrK,KAAKqZ,eAAgBpV,EAAOqV,WAAWwtB,gBAAgBoO,GAA3D,CAKA,GAFIrJ,EAAQjgC,EAAII,QAAQkpC,EAAK,SAEJ7qC,EAAKxJ,QAA1BgrC,EAAMxhC,KAAKxJ,OACXyqD,EAAe1/C,EAAIqK,KAAK41B,GACnByf,IAAgB1/C,EAAIupB,cAAcm2B,KACnCA,EAAe1/C,EAAI6W,KAAKopB,IAE5BjgC,EAAI4E,OAAOq7B,OAEX,KAASroC,EAAI,EAAO6G,EAAKxJ,OAAT2C,EAAiBA,IAC7B0xC,EAAM7qC,EAAK7G,GACXoI,EAAIssB,mBAAmBgd,GACvBoW,EAAe1/C,EAAIqK,KAAKi/B,IAAQtpC,EAAI6W,KAAKyyB,GACzCoW,EAAeA,EAAanW,MAAM,GAClCvpC,EAAI4E,OAAO0kC,EAGfoW,KACA11C,EAAMiB,SAASy0C,EAAc,GAC7B11C,EAAMkB,UAAS,GACf9W,KAAK2L,OAAOoL,YAAYnB,QAIhCs6C,EAAsBznB,EAAQ9oC,QAC9BwX,KAAM,WACF,GAA8Mm0C,GAAc9nD,EAAxNoS,EAAQ5V,KAAK4oC,YAAauP,EAAKvsC,EAAII,QAAQ4J,EAAMyH,aAAc,MAAOwuB,EAAQjgC,EAAII,QAAQmsC,EAAI,SAAU9tC,EAAOwhC,EAAMxhC,KAAM0lD,EAAcnkD,EAAI4mB,cAAc2lB,GAAI,GAAOgY,EAAc9lD,EAAK,GAAG8qC,MAAMt0C,MACtM,KAAIb,KAAKqZ,eAAgBpV,EAAOqV,WAAWwtB,gBAAgBqR,GAA3D,CAGA,GAAmB,GAAfgY,EACA7E,EAAe1/C,EAAIqK,KAAK41B,GACnByf,IAAgB1/C,EAAIupB,cAAcm2B,KACnCA,EAAe1/C,EAAI6W,KAAKopB,IAE5BjgC,EAAI4E,OAAOq7B,OAIX,KAFAjgC,EAAIssB,mBAAmBigB,GACvBmT,EAAe1/C,EAAIqK,KAAKkiC,IAAOvsC,EAAI6W,KAAK01B,GACnC30C,EAAI,EAAO6G,EAAKxJ,OAAT2C,EAAiBA,IACzBoI,EAAI4E,OAAOnG,EAAK7G,GAAG2xC,MAAM4a,GAG7BzE,KACA11C,EAAMiB,SAASy0C,EAAc,GAC7B11C,EAAMkB,UAAS,GACf9W,KAAK2L,OAAOoL,YAAYnB,QAIhCw6C,EAAwB9uD,EAAK3B;AAC7BS,QAAS,SAAUP,GAEf,MADAA,GAAUF,EAAOE,EAASG,KAAKH,SACT,UAAlBA,EAAQi4C,OACY,OAAhBj4C,EAAQ0L,KACD,GAAI0kD,GAAiBpwD,GAErB,GAAIqwD,GAAoBrwD,GAGf,OAAhBA,EAAQ0L,KACD,GAAIokD,GAAiB9vD,GAErB,GAAIiwD,GAAoBjwD,IAI3Cye,WAAY,SAAUxc,EAAIjC,GACtByB,EAAKxB,GAAGwe,WAAWve,KAAKC,KAAM8B,EAAIjC,GAClCiC,EAAGwK,SAAS,qBAEhBL,OAAQ,SAAUnK,EAAI+c,GAClB,GAAI/C,IAAewxC,EAAkBxxC,YAAY+C,EACjD/c,GAAGgd,YAAY,mBAAoBhD,KAG3Cnc,GAAOH,EAAMsC,GAAG6J,QACZiiD,UAAWA,EACXL,aAAcA,EACdc,gBAAiBA,EACjB+B,sBAAuBA,EACvBT,iBAAkBA,EAClBG,oBAAqBA,EACrBG,iBAAkBA,EAClBC,oBAAqBA,IAEzBvsD,EAAa,cAAe,GAAI0qD,IAC5B1rD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtBwJ,OAAO,EACPkG,MAAO,oBAGf9O,EAAa,gBAAiB,GAAIysD,IAC9B7kD,KAAM,SACNysB,SAAU,SACVr1B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,8BAGf9O,EAAa,iBAAkB,GAAIysD,IAC/B7kD,KAAM,SACN5I,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,+BAGf9O,EAAa,cAAe,GAAIysD,IAC5B7kD,KAAM,MACNysB,SAAU,SACVr1B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,qBAGf9O,EAAa,cAAe,GAAIysD,IAC5B7kD,KAAM,MACN5I,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,qBAGf9O,EAAa,YAAa,GAAIysD,IAC1B7kD,KAAM,MACNusC,OAAQ,SACRn1C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,kBAGf9O,EAAa,eAAgB,GAAIysD,IAC7B7kD,KAAM,SACNusC,OAAQ,SACRn1C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,sBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,kCAAmC,eAAgBD,IAC5D,YACG,SAAUE,EAAO6B,GAcd,QAASgqD,GAAUxrD,GAAnB,GACQuL,GAAQvL,EAAQuL,MAChBilD,EAAaxwD,EAAQsQ,IACrBmgD,EAAazwD,EAAQuQ,GACzB,OAAOA,GAAID,EAAIykC,EAAWxpC,GAAQwpC,EAAW0b,IAAc1b,EAAWyb,IAE1E,QAASE,GAAkBplD,GACvB,MAAIA,KAAY/J,EAAE+J,GAAS+N,GAAG,SAAW/N,EAAQqlD,aAAerlD,EAAQslD,aAC7DjxD,EAAMwC,QAAQuiD,YAElB,EAEX,QAASmM,GAAyBtlD,EAAOulD,GACrC,MAAIC,GAAcxlD,GACPwpC,EAAWxpC,GAEXwpC,EAAWxpC,GAASulD,EAAQ,IAG3C,QAASC,GAAcxlD,GACnB,aAAcA,KAAUylD,GAAUC,EAA4B55C,KAAK9L,GAEvE,QAAS2lD,GAAS3lD,GACd,aAAcA,KAAUylD,GAAUG,EAAuB95C,KAAK9L,GAElE,QAAS6lD,GAAc7lD,GACnB,MAAOwpC,GAAWxpC,GAAS8lD,EAE/B,QAASC,GAAS/lD,GACd,MAAOwpC,GAAWxpC,GAASgmD,EA3ClC,GACOC,GAAS1vD,OACT2vD,EAAOD,EAAO/gD,KACdH,EAAMmhD,EAAKnhD,IACXC,EAAMkhD,EAAKlhD,IACXwkC,EAAayc,EAAOzc,WACpBxzC,EAAI5B,EAAMihB,OACV9gB,EAASyB,EAAEzB,OACXsE,EAASzE,EAAMsC,GAAG6J,OAClBulD,EAAa,IACbE,EAAQ,KACRN,EAA8B,mBAC9BE,EAAyB,oBACzBH,EAAS,SAgCTU,GACAlG,UAAWA,EACXkF,kBAAmBA,EACnBG,yBAA0BA,EAC1BE,cAAeA,EACfG,SAAUA,EACVE,cAAeA,EACfE,SAAUA,EAEdxxD,GAAOsE,GAAUstD,cAAeA,KAClC5vD,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,0CACH,cACA,kBACA,kCACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GACOD,GAAI5B,EAAMihB,OACV9gB,EAASyB,EAAEzB,OACX+e,EAAOtd,EAAEsd,KACTvc,EAAQf,EAAEe,MACV8B,EAASzE,EAAMsC,GAAG6J,OAClB/J,EAAQpC,EAAMoC,MACd4vD,EAAW,UACXC,EAAa,YACbC,EAAc,aACdC,EAAc,aACdC,EAAa,YACbC,EAAW,UACXC,EAAQ,IACRC,EAAM,IACNC,EAAa,cACbC,EAAQ,QACRC,EAAuBtwD,EAAMjC,QAC7BC,KAAM,SAAUuL,EAAStL,GACrB,GAAI4L,GAAOzL,IACXyL,GAAK5L,QAAUF,KAAW8L,EAAK5L,QAASA,GACxC4L,EAAK5L,QAAQ6D,KAAOtC,EAAEqsC,QAAQhiC,EAAK5L,QAAQ6D,MAAQ+H,EAAK5L,QAAQ6D,MAAQ+H,EAAK5L,QAAQ6D,MACjFtC,EAAE+J,GAAS+N,GAAG+4C,KACdxmD,EAAKN,QAAUA,EACfM,EAAK0mD,yBAGbphD,QAAS,WAAA,GACDtF,GAAOzL,KACPoyD,EAAiB3mD,EAAK5L,QAAQuyD,cAC9B3mD,GAAKN,UACL/J,EAAEqK,EAAKN,SAAS+J,IAAIk9C,GACpB3mD,EAAKN,QAAU,MAEnB/J,EAAEqK,EAAK5L,QAAQwyD,aAAan9C,IAAIs8C,EAAWY,GAC3C3mD,EAAK6mD,wBAETzyD,SACI6D,QACAyM,IAAK,EACLkiD,YAAa,KACbD,eAAgB,GAChBG,KAAK,EACLC,QACIC,cAAe,GACf9pD,OAAQ,EACRD,MAAO,EACPgxB,cACA/2B,SAAU,KAGlBwvD,qBAAsB,WAAA,GACd1mD,GAAOzL,KACPH,EAAU4L,EAAK5L,OACnBuB,GAAEqK,EAAKN,SAAS4J,GAAG68C,EAAa/xD,EAAQuyD,eAAgBvyD,EAAQ6D,KAAK8P,KAAKs+C,GAAQ3vD,EAAMsJ,EAAKinD,4BAA6BjnD,KAE9HknD,mBAAoB,WAAA,GACZlnD,GAAOzL,KACPqP,EAAY5D,EAAK0B,UACrB,OAAIkC,KACSA,EAAUujD,UAEhB,GAEXhkD,OAAQ8P,EACRg0C,4BAA6B,SAAUxjD,GAAV,GACrBzD,GAAOzL,KACPH,EAAU4L,EAAK5L,QACfgzD,EAAgBhzD,EAAQ2yD,OACxBM,EAAe1xD,EAAE8N,EAAEU,eACnBmjD,EAAetnD,EAAKsnD,aACpBN,EAAgBI,EAAcJ,aAC7BhnD,GAAKknD,wBACDG,EAAa55C,GAAG84C,IAAevmD,EAAKunD,qBAAqBF,EAAc5jD,GACpE6jD,EACIA,EAAangC,KAAK6/B,IAAkBM,EAAangC,KAAK6/B,KAAmBK,EAAa,IACtFrnD,EAAKwnD,iBAAiBH,EAAc5jD,GAGxCzD,EAAKwnD,iBAAiBH,EAAc5jD,GAGpC6jD,GACAtnD,EAAK6mD,yBAKrBU,qBAAsBt0C,EACtBu0C,iBAAkB,SAAUH,EAAc5jD,GACtC,GAAIzD,GAAOzL,IACO,KAAdkP,EAAE+7C,UAGNx/C,EAAKynD,oBACLznD,EAAK0nD,wBAAwBL,GAC7BrnD,EAAK2nD,4BACL3nD,EAAK4nD,8BAA8BP,EAAa,IAChDrnD,EAAK6nD,mCACL7nD,EAAK8nD,eAAeT,GACpBrnD,EAAK+nD,oBACL/nD,EAAKsnD,aAAap6C,SAEtBu6C,kBAAmB,WAAA,GACXznD,GAAOzL,KACPH,EAAU4L,EAAK5L,OACnB4L,GAAK6mD,uBACL7mD,EAAKsnD,aAAe3xD,EAAEvB,EAAQ2yD,OAAO7vD,UAAUgP,SAAS9R,EAAQwyD,cAEpEc,wBAAyBz0C,EACzB00C,0BAA2B10C,EAC3B20C,8BAA+B,SAAUP,GACrC,GAAIrnD,GAAOzL,IACXyL,GAAKsnD,aAAangC,KAAKnnB,EAAK5L,QAAQ2yD,OAAOC,cAAeK,IAE9DQ,iCAAkC,WAAA,GAC1B7nD,GAAOzL,KACPH,EAAU4L,EAAK5L,QACfuyD,EAAiBvyD,EAAQuyD,eACzBqB,EAAc5zD,EAAQ2yD,OAAO94B,WAAWiP,OACxCoqB,EAAetnD,EAAKsnD,YACxBtnD,GAAKsnD,aAAah+C,GAAG08C,EAAaW,EAAgB,WAC9CW,EAAa3mD,KAAK2lD,EAAM0B,GAAa96C,SACtC5D,GAAG88C,EAAWO,EAAgB,WAC7BW,EAAa3mD,KAAK2lD,EAAM0B,GAAajhD,UAG7CghD,kBAAmB,WACf,GAAI/nD,GAAOzL,IACXyL,GAAKsnD,aAAa3mD,KAAK2lD,EAAMtmD,EAAK5L,QAAQ2yD,OAAO94B,WAAWiP,QAAQn2B,QAExE8/C,qBAAsB,WAClB,GAAI7mD,GAAOzL,IACPyL,GAAKsnD,eACLtnD,EAAKioD,oBACLjoD,EAAKsnD,aAAa79C,IAAIzJ,EAAK5L,QAAQuyD,gBAAgB5hD,SACnD/E,EAAKsnD,aAAe,OAG5BQ,eAAgB,SAAUT,GACtB,GAAIrnD,GAAOzL,IACNyL,GAAKsnD,eAGVtnD,EAAKioD,oBACLjoD,EAAK0B,WAAa,GAAI3N,GAAMsC,GAAG6xD,UAAUb,GACrCc,iBAAkBnoD,EAAKsnD,aAAa,GACpCpjD,MAAOxN,EAAMsJ,EAAKooD,cAAepoD,GACjCmD,OAAQzM,EAAMsJ,EAAK47C,SAAU57C,GAC7B8E,UAAWpO,EAAMsJ,EAAKqoD,YAAaroD,OAG3CioD,kBAAmB,WACf,GAAIjoD,GAAOzL,IACPyL,GAAK0B,aACL1B,EAAK0B,WAAW4D,UAChBtF,EAAK0B,WAAa,OAG1B0mD,cAAe,WACX7zD,KAAK+zD,oBAET1M,SAAU,SAAUn4C,GAChBlP,KAAKg0D,4BAA4B9kD,IAErC8kD,4BAA6Bt1C,EAC7Bo1C,YAAa,SAAU5kD,GACnB,GAAIzD,GAAOzL,IACXyL,GAAKmD,OAAOM,GACZzD,EAAK6mD,uBACL7mD,EAAKwoD,mBAETA,gBAAiB,WACb,GAAIp0D,GAAUG,KAAKH,OACnBuB,GAAEvB,EAAQwyD,aAAan9C,IAAIs8C,EAAW3xD,EAAQuyD,iBAElD2B,iBAAkB,WACd,GAAIl0D,GAAUG,KAAKH,OACnBuB,GAAEvB,EAAQwyD,aAAat9C,GAAGy8C,EAAW3xD,EAAQuyD,eAAgB,SAAUljD,GACnEA,EAAEsH,oBAGV09C,eAAgB,SAAUhlD,GACtB,GAAIG,GAAYrP,KAAKmN,UACjBkC,IAAaA,EAAU8kD,YACvB9kD,EAAU8kD,WAAWtwB,KAAK30B,MAIlCklD,EAAkBxyD,EAAMjC,QACxB+Q,OAAQ,SAAU/E,EAAQ9L,GAAlB,GACA4L,GAAOzL,KACPq0D,EAAex0D,EAAQyD,KACvBqR,EAAK9U,EAAQuyD,cACjBhxD,GAAEuK,EAAOqH,MAAM+B,GAAG28C,EAAc/8C,EAAIs9C,EAAO,SAAU/iD,GAAV,GACnC28B,GAAQ38B,EAAEU,cACVgjD,EAAWjnD,EAAO0oD,EACtBnlD,GAAEu8C,kBACEmH,EACIA,EAASznD,UAAY0gC,GAAU+mB,EAASD,uBACxClnD,EAAK6oD,iBAAiB3oD,EAAQ9L,GAC9B4L,EAAK8oD,cAAc5oD,EAAQkgC,EAAOhsC,IAGtC4L,EAAK8oD,cAAc5oD,EAAQkgC,EAAOhsC,KAEvCkV,GAAG48C,EAAch9C,EAAIs9C,EAAO,SAAU/iD,GAAV,GACvBslD,GACA5B,EAAWjnD,EAAO0oD,EACtBnlD,GAAEu8C,mBACEmH,GAAaA,EAASD,sBAAyBC,EAASG,eACxDyB,EAAcpzD,EAAEwxD,EAASznD,SAASgvC,QAAQ8X,GAAO,GAC7CuC,IACA/oD,EAAK6oD,iBAAiB3oD,EAAQ9L,GAC9B4L,EAAK8oD,cAAc5oD,EAAQ6oD,EAAa30D,OAGjDkV,GAAG48C,EAAch9C,EAAI,WACpB,GAAIi+C,GAAWjnD,EAAO0oD,EAClBzB,KAAaA,EAASD,sBACtBlnD,EAAK6oD,iBAAiB3oD,EAAQ9L,KAEnCkV,GAAG88C,EAAWl9C,EAAI,SAAUzF,GAAV,GAEbslD,GADA5B,EAAWjnD,EAAO0oD,EAElBzB,IAAYA,EAASD,uBACrB6B,EAAcpzD,EAAE8N,EAAEmJ,QAAQ8hC,QAAQ8X,GAAO,GACrCuC,IACA5B,EAASsB,eAAehlD,GACxBzD,EAAK6oD,iBAAiB3oD,EAAQ9L,GAC9B4L,EAAK8oD,cAAc5oD,EAAQ6oD,EAAa30D,QAKxD00D,cAAe,SAAU5oD,EAAQmnD,EAAcjzD,GAAhC,GACPw0D,GAAex0D,EAAQyD,KACvBmxD,EAAe50D,EAAQ0L,IAC3BI,GAAO0oD,GAAgB,GAAII,GAAa3B,GACpCP,IAAK/yD,EAAMwC,QAAQmR,MAAMxH,EAAOR,SAChCknD,YAAa1mD,EAAOqH,QAG5BshD,iBAAkB,SAAU3oD,EAAQ9L,GAChC,GAAIw0D,GAAex0D,EAAQyD,IACvBqI,GAAO0oD,KACP1oD,EAAO0oD,GAActjD,UACrBpF,EAAO0oD,GAAgB,QAInCD,GAAgBrwB,QAAU,GAAIqwB,GAC9BlC,EAAqBxhD,OAAS,SAAU/E,EAAQ9L,GAC5Cu0D,EAAgBrwB,QAAQrzB,OAAO/E,EAAQ9L,IAE3CF,EAAOsE,GAAUiuD,qBAAsBA,KACzCvwD,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,mCACH,cACA,iCACA,0CACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GACOgwD,GAAS1vD,OACT2vD,EAAOD,EAAO/gD,KACdokD,EAAMpD,EAAKoD,IACXtzD,EAAI5B,EAAMihB,OACV9gB,EAASyB,EAAEzB,OACXsE,EAASzE,EAAMsC,GAAG6J,OAClBumD,EAAuBjuD,EAAOiuD,qBAC9BX,EAAgBttD,EAAOstD,cACvBlG,EAAYkG,EAAclG,UAC1BqF,EAA2Ba,EAAcb,yBACzCH,EAAoBgB,EAAchB,kBAClCK,EAAgBW,EAAcX,cAC9BK,EAAgBM,EAAcN,cAC9BE,EAAWI,EAAcJ,SACzBx8C,EAAK,6BACLggD,EAAsB,yBACtBC,EAAsB,yBACtBC,EAAO,OACPC,EAAQ,QACRp5B,EAAK,KACLq5B,EAAK,KACLC,EAAK,KACLlD,EAAQ,IACRmD,EAAQ,QACRhkD,EAAiBihD,EAAqBvyD,QACtCE,SACI6D,MACIg4B,EACAq5B,GAEJ5kD,IAAK,GACLkiD,YAAa,KACbD,eAAgBz9C,EAChB49C,KAAK,EACLC,QACIC,cAAe,SACf/pD,MAAO,GACPC,OAAQ,EACR+wB,YACI84B,OAAQmC,EACRhsB,OAAQisB,GAEZjyD,SAAU,qGAA4GgyD,EAAsB,iBAAwBC,EAAsB,yBAGlM5B,qBAAsB,SAAUkC,EAAQhmD,GAAlB,GACdzD,GAAOzL,KACPH,EAAU4L,EAAK5L,QACfs1D,EAAct1D,EAAQ2yD,OAAO9pD,MAC7B0sD,EAAeF,EAAOn/C,SAASF,MAAQhW,EAAQ0yD,IAAM,EAAI2C,EAAOtL,cAChEyL,EAAgBnmD,EAAE0/C,QAAUxtD,EAAE8zD,EAAO,GAAGnhC,eAAe86B,YAC3D,OAAIwG,GAAgBD,EAAeD,GAA+BC,EAAeD,EAA/BE,GAMtDlC,wBAAyB,SAAU+B,GAAV,GACjBzpD,GAAOzL,KACPs1D,EAAYl0D,EAAEqK,EAAKN,SAASqT,SAASs2C,GACrCj1D,EAAU4L,EAAK5L,QACf0yD,EAAM1yD,EAAQ0yD,IACd4C,EAAct1D,EAAQ2yD,OAAO9pD,MAC7B2pD,EAAcjxD,EAAEvB,EAAQwyD,aACxBkD,EAAkBlD,EAAYn5C,GAAG27C,GAAQ,EAAIxC,EAAY71C,YACzDg5C,EAAmBnD,EAAYn5C,GAAG27C,GAAQ,EAAIxC,EAAYxD,aAC1D4G,EAAoBlD,EAAM,EAAI2C,EAAOtL,aACrC8L,EAAiBnD,EAAMhC,EAAkB8B,EAAY,IAAM,CAC/D5mD,GAAKsnD,aAAanhD,KACd0lB,IAAKg+B,EAAUt9B,WAAWV,IAAMi+B,EAChC1/C,KAAMq/C,EAAOl9B,WAAWniB,KAAO4/C,GAAqBD,EAAmBE,GAAkBP,EAAc,EACvGn9B,SAAU,cAGlBo7B,0BAA2B,WAAA,GACnB3nD,GAAOzL,KACPs1D,EAAYl0D,EAAEqK,EAAKN,SAASqT,SAASs2C,EACzCrpD,GAAKsnD,aAAanhD,KACdlJ,MAAO+C,EAAK5L,QAAQ2yD,OAAO9pD,MAC3BC,OAAQ2sD,EAAU3sD,YAG1BqrD,4BAA6B,SAAU9kD,GAAV,GACrBzD,GAAOzL,KACPk1D,EAAS9zD,EAAEA,EAAE8N,EAAEU,eAAegjB,KAAKnnB,EAAK5L,QAAQ2yD,OAAOC,gBACvD5yD,EAAU4L,EAAK5L,QACfs1D,EAAct1D,EAAQ2yD,OAAS3yD,EAAQ2yD,OAAO9pD,MAAQ,EACtDyH,EAAMtQ,EAAQsQ,IACdoiD,EAAM1yD,EAAQ0yD,IACdoD,EAAcT,EAAOtL,aACrBgM,EAAmBV,EAAOl9B,WAAWniB,KACrCggD,EAAsBX,EAAOj/C,OAAO2zC,cAAgB,EACpDmJ,EAAe3xD,EAAEqK,EAAKsnD,cACtBV,EAAcjxD,EAAEvB,EAAQwyD,aACxBmD,EAAmBnD,EAAYn5C,GAAG27C,GAAQ,EAAIxC,EAAYxD,aAC1D6G,EAAiBnD,EAAMhC,EAAkB8B,EAAY,IAAM,EAC3DyD,EAAezK,GACfjgD,MAAO2nD,EAAa/6B,WAAWniB,MAAQ2/C,EAAmBE,GAAkBxmD,EAAEslB,EAAEzkB,MAChFI,IAAKylD,GAAoBJ,EAAmBE,IAAmBnD,EAAMsD,EAAsB,GAAK1lD,EAChGC,IAAKwlD,EAAmBD,GAAeH,EAAmBE,IAAmBnD,EAAM,EAAIsD,GAAuBV,EAAchlD,GAEhI4iD,GAAanhD,KAAMiE,KAAMigD,KAE7BlnD,OAAQ,SAAUM,GAAV,GAOA6mD,GACAC,EACAC,EARAxqD,EAAOzL,KACPk1D,EAAS9zD,EAAEA,EAAE8N,EAAEU,eAAegjB,KAAKnnB,EAAK5L,QAAQ2yD,OAAOC,gBACvD5yD,EAAU4L,EAAK5L,QACfq2D,EAAcr2D,EAAQ0yD,IAAM,GAAK,EACjCpiD,EAAMtQ,EAAQsQ,IACdgmD,EAAgBD,EAAchnD,EAAEslB,EAAEvkB,YAItCxE,GAAK2qD,yBACL3qD,EAAK4qD,2BACLJ,EAAqBf,EAAOtL,aAC5BoM,EAA6Bd,EAAOj/C,OAAO2zC,cAAgB,EAC3DmM,EAAW1K,GACPjgD,MAAO6qD,EAAqBE,EAC5BhmD,IAAKA,EACLC,IAAK6lD,EAAqBD,EAA6B7lD,IAE3D1E,EAAK6qD,cAAcpB,EAAO,GAAIa,GAC9BtqD,EAAK8qD,2BAA2BrB,EAAO,GAAIa,GAC3CtqD,EAAK+qD,uBAAuBtB,EAAO5zB,QAAS00B,EAA4BC,EAAoBA,EAAqBF,IAErHK,uBAAwB,WACpB,GAAIjrD,GAAUnL,KAAKmL,OACU,MAAzBA,EAAQhF,MAAM8uD,KACd9pD,EAAQhF,MAAM8uD,GAAS9D,EAAS/vD,EAAE+J,GAASy+C,gBAGnDyM,yBAA0B,WAAA,GASlB7yD,GARAiI,EAAOzL,KACPs1D,EAAYl0D,EAAEqK,EAAKN,SAASqT,SAASs2C,GACrC2B,EAAiBnB,EAAU1L,aAC3Bx/C,EAAUkrD,EAAU92C,SAASw2C,GAAIx2C,SAASkd,GAC1C76B,EAASuJ,EAAQvJ,OACjB61D,EAAuBtsD,EAAQkJ,IAAI,WACnC,MAAOlS,GAAEpB,MAAM4pD,cAGnB,KAAKpmD,EAAI,EAAO3C,EAAJ2C,EAAYA,IAEhB4G,EAAQ5G,GAAG2C,MAAM8uD,GADjBrE,EAAcxmD,EAAQ5G,GAAG2C,MAAM8uD,IACLhE,EAAcP,EAAyBgG,EAAqBlzD,GAAIizD,IAEhEtF,EAASuF,EAAqBlzD,KAIpE+yD,2BAA4B,SAAUrB,EAAQa,GAAlB,GAQpBvyD,GAPAiI,EAAOzL,KACP+vD,EAAc3uD,EAAE8zD,GAAQ5zB,QACxBq1B,EAAsBv1D,EAAEqK,EAAKN,SAASqT,SAASs2C,GAAOt2C,SAASw2C,GAAIx2C,SAAS/S,EAAK5L,QAAQ6D,KAAK8P,KAAKs+C,IAAQh3B,OAAO,WAClH,GAAIyP,GAAOvqC,IACX,OAAOoB,GAAEmpC,GAAMjJ,UAAYyuB,GAAexlB,IAAS2qB,IAEnDr0D,EAAS81D,EAAoB91D,MAEjC,KAAK2C,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpBiI,EAAK6qD,cAAcK,EAAoBnzD,GAAIuyD,IAGnDO,cAAe,SAAUpB,EAAQa,GAEzBb,EAAO/uD,MAAM8uD,GADbrE,EAAcsE,EAAO/uD,MAAM8uD,IACLhE,EAAcP,EAAyBqF,EAAU30D,EAAEpB,KAAKmL,SAASqT,SAASs2C,GAAOlL,eAEjFuH,EAAS4E,IAGvCS,uBAAwB,SAAUzG,EAAaiG,EAA4BC,EAAoBW,GAAvE,GAMhBpzD,GALAiI,EAAOzL,KACP62D,EAAkBz1D,EAAEqK,EAAKN,SAASqT,SAASs2C,GAAOt2C,SAASw2C,GAAIx2C,SAAS/S,EAAK5L,QAAQ6D,KAAK8P,KAAKs+C,IAAQh3B,OAAO,WAC9G,MAAO15B,GAAEpB,MAAMshC,UAAYyuB,EAAc,IAEzClvD,EAASg2D,EAAgBh2D,MAE7B,KAAK2C,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpBiI,EAAKqrD,sBAAsBD,EAAgBrzD,GAAIwyD,EAA4BC,EAAoBW,IAGvGE,sBAAuB,SAAUC,EAAgBf,EAA4BC,EAAoBW,GAA1E,GACfnrD,GAAOzL,KACPmQ,EAAM1E,EAAK5L,QAAQsQ,IACnB4lD,EACO1K,GACPjgD,MAAO4qD,EAA6BY,EACpCzmD,IAAKA,EACLC,IAAKskD,EAAIuB,EAAqBD,EAA6B7lD,IAE/D1E,GAAK6qD,cAAcS,EAAgBhB,KAG3C9kD,GAAeP,OAAS,SAAU/E,GAC9BumD,EAAqBxhD,OAAO/E,GACxBrI,KAAM,iBACNiI,KAAM0F,EACNmhD,eAAgBz9C,KAGxBhV,EAAOsE,GAAUgN,eAAgBA,KACnCtP,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gCACH,cACA,iCACA,0CACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GACOiwD,GAAO3vD,OAAO2O,KACdokD,EAAMpD,EAAKoD,IACXtzD,EAAI5B,EAAMihB,OACV9gB,EAASyB,EAAEzB,OACXsE,EAASzE,EAAMsC,GAAG6J,OAClBumD,EAAuBjuD,EAAOiuD,qBAC9BX,EAAgBttD,EAAOstD,cACvBhB,EAAoBgB,EAAchB,kBAClClF,EAAYkG,EAAclG,UAC1BqF,EAA2Ba,EAAcb,yBACzCE,EAAgBW,EAAcX,cAC9BK,EAAgBM,EAAcN,cAC9BE,EAAWI,EAAcJ,SACzBx8C,EAAK,0BACLggD,EAAsB,sBACtBqC,EAAqC,8BACrCpC,EAAsB,sBACtBC,EAAO,OACPG,EAAK,KACLF,EAAQ,QACRmC,EAAS,SACT7lD,EAAc8gD,EAAqBvyD,QACnCE,SACI6D,MAAOsxD,GACP7kD,IAAK,GACLkiD,YAAa,KACbD,eAAgBz9C,EAChB49C,KAAK,EACLC,QACIC,cAAe,MACf/pD,MAAO,EACPC,OAAQ,GACR+wB,YACI84B,OAAQmC,EACRhsB,OAAQisB,GAEZjyD,SAAU,kGAAyGgyD,EAAsB,iBAAwBqC,EAAqC,iBAAwBpC,EAAsB,+BAG5P5B,qBAAsB,SAAUF,EAAc5jD,GAAxB,GACdzD,GAAOzL,KACPk3D,EAAezrD,EAAK5L,QAAQ2yD,OAAOyE,GACnC7B,EAAetC,EAAa/8C,SAASuhB,IAAMw7B,EAAajJ,cACxDwL,EAAgBnmD,EAAEu/C,QAAUrtD,EAAE0xD,EAAa,GAAG/+B,eAAevX,WACjE,OAAI64C,GAAgBD,EAAe8B,GAAgC9B,EAAe8B,EAA/B7B,GAMvDlC,wBAAyB,SAAUje,GAAV,GACjBzpC,GAAOzL,KACPH,EAAU4L,EAAK5L,QACfq3D,EAAer3D,EAAQ2yD,OAAOyE,GAC9BE,EAAcjiB,EAAIld,WAClBq6B,EAAcjxD,EAAEvB,EAAQwyD,aACxBkD,EAAkBlD,EAAYn5C,GAAG27C,GAAQ,EAAIxC,EAAY71C,YACzDg5C,EAAmBnD,EAAYn5C,GAAG27C,GAAQ,EAAIxC,EAAYxD,aAC1D6G,EAAiB71D,EAAQ0yD,IAAMhC,EAAkB8B,EAAY,IAAM,CACvE5mD,GAAKsnD,aAAanhD,KACd0lB,IAAK6/B,EAAY7/B,IAAM4d,EAAI2U,cAAgB0L,EAAkB2B,EAAe,EAC5ErhD,KAAMshD,EAAYthD,MAAQ2/C,EAAmBE,GAC7C19B,SAAU,cAGlBo7B,0BAA2B,WACvB,GAAI3nD,GAAOzL,IACXyL,GAAKsnD,aAAanhD,KACdlJ,MAAOtH,EAAEqK,EAAKN,SAASqT,SAASs2C,GAAOpsD,QACvCC,OAAQ8C,EAAK5L,QAAQ2yD,OAAOyE,MAGpCjD,4BAA6B,SAAU9kD,GAAV,GACrBzD,GAAOzL,KACPH,EAAU4L,EAAK5L,QACfsQ,EAAMtQ,EAAQsQ,IACdmlD,EAAYl0D,EAAEqK,EAAKN,SAASqT,SAASs2C,GACrCsC,EAAqB9B,EAAUt9B,WAAWV,IAC1Cy7B,EAAe3xD,EAAEqK,EAAKsnD,cACtB7d,EAAM9zC,EAAE8N,EAAEU,eAAegjB,KAAK/yB,EAAQ2yD,OAAOC,eAC7CJ,EAAcjxD,EAAEvB,EAAQwyD,aACxBkD,EAAkBlD,EAAYn5C,GAAG27C,GAAQ,EAAIxC,EAAY71C,YACzDs5C,EAAezK,GACfjgD,MAAO2nD,EAAa/6B,WAAWV,IAAMi+B,EAAkBrmD,EAAEc,EAAED,MAC3DI,IAAK/O,EAAE8zC,GAAKld,WAAWV,IAAMi+B,EAAkBplD,EAC/CC,IAAKgnD,EAAqB9B,EAAUzL,cAAgB0L,EAAkB11D,EAAQ2yD,OAAOyE,GAAU9mD,GAEnG4iD,GAAanhD,KAAM0lB,IAAKw+B,KAE5BlnD,OAAQ,SAAUM,GAAV,GACAzD,GAAOzL,KACPH,EAAU4L,EAAK5L,QACfq1C,EAAM9zC,EAAE8N,EAAEU,eAAegjB,KAAK/yB,EAAQ2yD,OAAOC,eAC7C4E,EAAmBj2D,EAAE8zC,GAAK2U,cAC1B1+C,EAAU/J,EAAEqK,EAAKN,SACjBmsD,EAAqBnsD,EAAQ0+C,cAC7ByL,EAAYnqD,EAAQqT,SAASs2C,GAC7ByC,EAAkBjC,EAAU3sD,SAC5B6uD,EAAqBtiB,EAAI/uC,MAAM8wD,GAC/BQ,EAAepM,GACfjgD,MAAOisD,EAAmBnoD,EAAEc,EAAEC,aAC9BE,IAAKtQ,EAAQsQ,IACbC,IAAKskD,EAAI6C,EAAkB13D,EAAQsQ,MAEvC1E,GAAKisD,yBACLxiB,EAAI/uC,MAAM8wD,GAAU9F,EAASsG,GAC7BhsD,EAAKksD,gBAAgBL,GAAsBG,EAAeJ,IACtDzG,EAAc4G,IACd/rD,EAAKmsD,+BAGbF,uBAAwB,WAAA,GAOhBl0D,GANAiI,EAAOzL,KACPqK,EAAOjJ,EAAEqK,EAAKN,SAASqT,SAASs2C,GAAOt2C,SAASw2C,GAChDn0D,EAASwJ,EAAKxJ,OACdg3D,EAAqBxtD,EAAKiJ,IAAI,WAC9B,MAAOlS,GAAEpB,MAAM6pD,eAGnB,KAAKrmD,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpB6G,EAAK7G,GAAG2C,MAAM8wD,GAAU9F,EAAS0G,EAAmBr0D,KAG5Do0D,4BAA6B,WAAA,GASrBp0D,GARAiI,EAAOzL,KACPs1D,EAAYl0D,EAAEqK,EAAKN,SAASqT,SAASs2C,GACrCyC,EAAkBjC,EAAU3sD,SAC5B0B,EAAOirD,EAAU92C,SAASw2C,GAC1Bn0D,EAASwJ,EAAKxJ,OACdg3D,EAAqBxtD,EAAKiJ,IAAI,WAC9B,MAAOlS,GAAEpB,MAAM6pD,eAGnB,KAAKrmD,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpB6G,EAAK7G,GAAG2C,MAAM8wD,GAAUhG,EAAcP,EAAyBmH,EAAmBr0D,GAAI+zD,KAG9FI,gBAAiB,SAAUG,GACvB,GAAI3sD,GAAUnL,KAAKmL,OAEfA,GAAQhF,MAAM8wD,GADdrG,EAAczlD,EAAQhF,MAAM8wD,IACJhG,EAAcP,EAAyBoH,EAAW12D,EAAE+J,GAASoX,SAAS5Z,WAEtEwoD,EAAS2G,KAI7C1mD,GAAYV,OAAS,SAAU/E,GAC3BumD,EAAqBxhD,OAAO/E,GACxBrI,KAAM,cACNiI,KAAM6F,EACNghD,eAAgBz9C,KAGxBhV,EAAOsE,GAAUmN,YAAaA,KAChCzP,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,uCACH,cACA,oBACA,kCACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GA0KO02D,GA+CAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAEAC,EA8BAC,EAYAC,EAEAC,EAEAC,EAYAC,EAEAC,EAEAC,EAYAC,EAOAC,EAOAC,EAOAC,EAjZAh4D,EAAI5B,EAAMihB,OACV9gB,EAASyB,EAAEzB,OACX+e,EAAOtd,EAAEsd,KACTvc,EAAQf,EAAEe,MACV8B,EAASzE,EAAMsC,GAAG6J,OAClB/J,EAAQpC,EAAMoC,MACdy3D,EAAY75D,EAAMsC,GAAGu3D,UACrB35D,EAAaF,EAAME,WACnB6wD,EAAoBtsD,EAAOstD,cAAchB,kBACzC57C,EAAK,gCACLggD,EAAsB,wBACtB2E,EAAa,YACbC,EAAO,OACPC,EAAW,UACXC,EAAc,aACdC,EAAa,YACbC,EAAY,WACZ9E,EAAO,OACP5C,EAAQ,QACR2H,EAAO,OACPC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAO,OACPpI,EAAM,IACNqI,EAAoB16D,EAAWC,QAC/BC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXN,GAAWI,GAAGF,KAAKG,KAAK0L,GACxBA,EAAK5L,QAAUF,KAAW8L,EAAK5L,QAASA,GACxC4L,EAAKN,QAAU/J,EAAEqK,EAAK5L,QAAQ8C,UAAUgP,SAASlG,EAAK5L,QAAQ8R,UAAU,GACxElG,EAAK0mD,uBACL1mD,EAAK4uD,aACL5uD,EAAK6uD,iBACL7uD,EAAK8uD,2BACL9uD,EAAK+uD,wBACLp5D,EAAEqK,EAAKN,SAASynB,KAAKq/B,EAAOxmD,EAAK5L,QAAQ46D,mBAE7C1pD,QAAS,WACL,GAAItF,GAAOzL,IACXoB,GAAEqK,EAAKN,SAAS+J,IAAIP,GAAInE,SACxB/E,EAAKN,QAAU,KACfM,EAAKivD,oBACLjvD,EAAKolC,UAEThxC,SACI8R,SAAU,KACVqE,UAAWikD,EACXQ,iBAAkB,KAClBlI,KAAK,EACL5vD,SAAU,oGAAkHgyD,EAAsB,kBAEtJz0D,QACIo5D,EACAC,EACAC,EACAE,EACAC,GAEJhhD,KAAM,WACF3Y,KAAK26D,gBAETA,aAAc,WAAA,GACNlvD,GAAOzL,KACPg4B,EAAWvsB,EAAKmvD,qBAAqBC,aACzCz5D,GAAEqK,EAAKN,SAASyG,KACZ0lB,IAAKU,EAASV,IACdzhB,KAAMmiB,EAASniB,KACfmiB,SAAU,cAGlBm6B,qBAAsB,WAClB,GAAI1mD,GAAOzL,IACXoB,GAAEqK,EAAKN,SAAS4J,GAAG2kD,EAAa/kD,EAAIxS,EAAMsJ,EAAKqvD,aAAcrvD,IAAOsJ,GAAG4kD,EAAYhlD,EAAIxS,EAAMsJ,EAAKsvD,YAAatvD,KAEnHqvD,aAAc,WACV96D,KAAKU,QAAQg5D,IAEjBqB,YAAa,WACT/6D,KAAKU,QAAQi5D,IAEjBU,WAAY,WACR,GAAI5uD,GAAOzL,IACXoB,GAAEqK,EAAKN,SAASqT,SAASuzC,EAAM4C,GAAqBroD,SAAS,YAAcb,EAAK5L,QAAQmW,YAE5FukD,yBAA0B,WAAA,GAClB9uD,GAAOzL,KACPH,EAAU4L,EAAK5L,OACnB4L,GAAKmvD,qBAAuB7C,EAA0BrnD,QAClDpN,KAAMzD,EAAQmW,UACdw8C,OAAQ/mD,EAAKN,QACbsvD,iBAAkB56D,EAAQ46D,iBAC1BpI,YAAaxyD,EAAQwyD,YACrBE,IAAK1yD,EAAQ0yD,OAGrB+H,eAAgB,WAAA,GACR7uD,GAAOzL,KACPmL,EAAUM,EAAKN,SACfM,EAAKuvD,YAAe7vD,IAGxBM,EAAKuvD,WAAa,GAAI3B,GAAUluD,GAC5B8vD,UAAW94D,EAAMsJ,EAAKyvD,aAAczvD,GACpC0vD,KAAMh5D,EAAMsJ,EAAK2vD,QAAS3vD,GAC1Bu8C,QAAS7lD,EAAMsJ,EAAK4vD,WAAY5vD,OAGxCyvD,aAAc,WACVl7D,KAAKU,QAAQ44D,IAEjB8B,QAAS,SAAUlsD,GACf,GAAIzD,GAAOzL,IACXyL,GAAK/K,QAAQ64D,EAAM9tD,EAAK6vD,kBAAkBC,iBACtCC,OAAQtsD,EAAEslB,EAAEzkB,MACZ0rD,OAAQvsD,EAAEc,EAAED,MACZomD,cAAejnD,EAAEslB,EAAEvkB,aACnByrD,cAAexsD,EAAEc,EAAEC,iBAG3BorD,WAAY,WACRr7D,KAAKU,QAAQ84D,IAEjBkB,kBAAmB,WACf,GAAIjvD,GAAOzL,IACPyL,GAAKuvD,aACLvvD,EAAKuvD,WAAWjqD,UAChBtF,EAAKuvD,WAAa,OAG1BR,sBAAuB,WACnB,GAAI/uD,GAAOzL,IACXyL,GAAK6vD,kBAAoB7C,EAAuB/nD,QAASpN,KAAMmI,EAAK5L,QAAQmW,eAGhF2lD,EAAkB/5D,EAAMjC,QACxBC,KAAM,WACFI,KAAK47D,WAETC,SAAU,SAAUv4D,EAAMiI,GACtBvL,KAAK47D,OAAOz7D,MACRmD,KAAMA,EACNiI,KAAMA,KAGdmF,OAAQ,SAAU7Q,GAAV,GAIAq7B,GACAwJ,EACAlhC,EALAmd,EAAQ3gB,KAAK47D,OACbE,EAAcn7C,EAAM9f,OACpByC,EAAOzD,EAAQyD,KAAOzD,EAAQyD,KAAKU,cAAgB,EAIvD,KAAKR,EAAI,EAAOs4D,EAAJt4D,EAAiBA,IAEzB,GADAkhC,EAAO/jB,EAAMnd,GACTkhC,EAAKphC,KAAKU,gBAAkBV,EAAM,CAClC43B,EAAQwJ,CACR,OAGR,MAAIxJ,GACO,GAAIA,GAAM3vB,KAAK1L,GAD1B,KAKJk8D,GAA6BJ,EAAgBh8D,UACjDo8D,IAA2Bh4B,QAAU,GAAIg4B,IACrChE,EAA4Bn2D,EAAMjC,QAClCC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXyL,GAAK5L,QAAUF,KAAW8L,EAAK5L,QAASA,IAE5CA,SACI2yD,OAAQ,KACRz8C,OAAQ0jD,EACRgB,iBAAkB,KAClBpI,YAAa,KACbE,KAAK,GAETsI,YAAa,WAAA,GACLpvD,GAAOzL,KACPg4B,EAAWvsB,EAAKuwD,oBAChBC,EAAuBxwD,EAAKywD,kBAAkBlkC,GAC9CmkC,EAAuB1wD,EAAK2wD,kBAAkBH,EAClD,OAAOE,IAEXH,kBAAmBt9C,EACnBw9C,kBAAmB,SAAUlkC,GAAV,GACXn4B,GAAUG,KAAKH,QACf2yD,EAASpxD,EAAEvB,EAAQ2yD,OACvB,OAAI3yD,GAAQkW,SAAW0jD,GAEfniC,IAAKU,EAASV,IAAMk7B,EAAO3I,cAAgB,EAC3Ch0C,KAAMmiB,EAASniB,KAAO28C,EAAO5I,aAAe,GAG7C5xB,GAEXokC,kBAAmB,SAAUpkC,GAAV,GACXn4B,GAAUG,KAAKH,QACfwyD,EAAcjxD,EAAEvB,EAAQwyD,aACxBqD,EAAiB71D,EAAQ0yD,IAAMhC,EAAkB8B,EAAY,IAAM,CACvE,OAAKA,GAAYn5C,GAAG27C,GAMb78B,GAJCV,IAAKU,EAASV,KAAO+6B,EAAY71C,aAAe,GAChD3G,KAAMmiB,EAASniB,MAAQw8C,EAAYxD,cAAgB,GAAK6G,MAMxEqC,EAA0BrnD,OAAS,SAAU7Q,GACzC,MAAOk8D,IAA2Bh4B,QAAQrzB,OAAO7Q,IAEjDm4D,EAA0BD,EAA0Bp4D,QACpDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IAAMmjC,EAAiB5Q,cAAgB,EACnDh0C,KAAME,EAAOF,KAAO4kD,EAAiB7Q,iBAIjDmS,GAA2Bh4B,QAAQ83B,SAASjC,EAAM5B,GAC9CC,EAA2BF,EAA0Bp4D,QACrDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IACZzhB,KAAME,EAAOF,KAAO4kD,EAAiB7Q,aAAe,MAIhEmS,GAA2Bh4B,QAAQ83B,SAAShC,EAAO5B,GAC/CC,EAA+BH,EAA0Bp4D,QACzDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IACZzhB,KAAME,EAAOF,KAAO4kD,EAAiB7Q,iBAIjDmS,GAA2Bh4B,QAAQ83B,SAAS/B,EAAW5B,GACnDC,EAA+BJ,EAA0Bp4D,QACzDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IACZzhB,KAAME,EAAOF,SAIzBkmD,GAA2Bh4B,QAAQ83B,SAAS9B,EAAW5B,GACnDC,EAA2BL,EAA0Bp4D,QACrDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IAAMmjC,EAAiB5Q,cACnCh0C,KAAME,EAAOF,KAAO4kD,EAAiB7Q,aAAe,MAIhEmS,GAA2Bh4B,QAAQ83B,SAAS7B,EAAO5B,GAC/CC,EAA+BN,EAA0Bp4D,QACzDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IAAMmjC,EAAiB5Q,cACnCh0C,KAAME,EAAOF,KAAO4kD,EAAiB7Q,iBAIjDmS,GAA2Bh4B,QAAQ83B,SAAS5B,EAAW5B,GACnDC,EAA+BP,EAA0Bp4D,QACzDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IAAMmjC,EAAiB5Q,cACnCh0C,KAAME,EAAOF,SAIzBkmD,GAA2Bh4B,QAAQ83B,SAAS3B,EAAW5B,GACnDC,EAA0BR,EAA0Bp4D,QACpDq8D,kBAAmB,WAAA,GACXvB,GAAmBr5D,EAAEpB,KAAKH,QAAQ46D,kBAClC1kD,EAAS0kD,EAAiBziC,UAC9B,QACIV,IAAKvhB,EAAOuhB,IAAMmjC,EAAiB5Q,cAAgB,EACnDh0C,KAAME,EAAOF,SAIzBkmD,GAA2Bh4B,QAAQ83B,SAAS1B,EAAM5B,GAC9CC,EAA0BmD,EAAgBh8D,WAC9C64D,EAAwBz0B,QAAU,GAAIy0B,GAClCC,EAAyB72D,EAAMjC,QAC/BC,KAAM,SAAUC,GACZ,GAAI4L,GAAOzL,IACXyL,GAAK5L,QAAUF,KAAW8L,EAAK5L,QAASA,IAE5CA,SACI27D,QACIa,WAAY,KACZC,SAAU,MAEdb,QACIY,WAAY,KACZC,SAAU,OAGlBf,gBAAiB,SAAUgB,GAAV,GACT18D,GAAUG,KAAKH,QACf28D,EAAkB38D,EAAQ27D,OAAOa,WAAax8D,EAAQ27D,OAAOc,SAC7DG,EAAkB58D,EAAQ47D,OAAOY,WAAax8D,EAAQ47D,OAAOa,QACjE,QACId,OAAQe,EAAOf,OAASgB,EACxBf,OAAQc,EAAOd,OAASgB,EACxBtG,cAAeoG,EAAOpG,cAAgBqG,EACtCd,cAAea,EAAOb,cAAgBe,MAIlDhE,EAAuB/nD,OAAS,SAAU7Q,GACtC,MAAO24D,GAAwBz0B,QAAQrzB,OAAO7Q,IAE9C64D,EAA6BD,EAAuB94D,QACpDE,SACI27D,QACIa,WAAY,EACZC,SAAU,GAEdb,QACIY,WAAY,EACZC,SAAU,MAIlB3D,EAAuBD,EAA2B/4D,QAASE,SAAW27D,QAAUc,SAAU,MAC9F9D,EAAwBz0B,QAAQ83B,SAASjC,EAAMjB,GAC3CC,EAAuBF,EAA2B/4D,QAASE,SAAW27D,QAAUc,SAAU,OAC9F9D,EAAwBz0B,QAAQ83B,SAAS1B,EAAMvB,GAC3CC,EAA2BJ,EAAuB94D,QAClDE,SACI27D,QACIa,WAAY,EACZC,SAAU,GAEdb,QACIY,WAAY,EACZC,SAAU,MAIlBxD,EAAwBD,EAAyBl5D,QAASE,SAAW47D,QAAUa,SAAU,OAC7F9D,EAAwBz0B,QAAQ83B,SAAShC,EAAOf,GAC5CC,EAAwBF,EAAyBl5D,QAASE,SAAW47D,QAAUa,SAAU,MAC7F9D,EAAwBz0B,QAAQ83B,SAAS7B,EAAOjB,GAC5CC,EAAwCP,EAAuB94D,QAC/DE,SACI27D,QACIa,WAAY,EACZC,SAAU,GAEdb,QACIY,WAAY,EACZC,SAAU,MAIlBrD,EAA4BD,EAAsCr5D,QAClEE,SACI27D,QAAUc,SAAU,GACpBb,QAAUa,SAAU,OAG5B9D,EAAwBz0B,QAAQ83B,SAAS/B,EAAWb,GAChDC,EAA4BF,EAAsCr5D,QAClEE,SACI27D,QAAUc,SAAU,IACpBb,QAAUa,SAAU,OAG5B9D,EAAwBz0B,QAAQ83B,SAAS9B,EAAWb,GAChDC,EAA4BH,EAAsCr5D,QAClEE,SACI27D,QAAUc,SAAU,GACpBb,QAAUa,SAAU,MAG5B9D,EAAwBz0B,QAAQ83B,SAAS5B,EAAWd,GAChDC,EAA4BJ,EAAsCr5D,QAClEE,SACI27D,QAAUc,SAAU,IACpBb,QAAUa,SAAU,MAG5B9D,EAAwBz0B,QAAQ83B,SAAS3B,EAAWd,GACpDz5D,EAAOsE,GAAUm2D,kBAAmBA,KACtCz4D,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,kCACH,cACA,sCACA,kCACDD,IACL,YACG,SAAUE,EAAO6B,GA8Cd,QAASq7D,GAAYtxD,GACjB,MAAwB,KAAVA,EA/CrB,GACOimD,GAAS1vD,OACT2vD,EAAOD,EAAO/gD,KACdH,EAAMmhD,EAAKnhD,IACXC,EAAMkhD,EAAKlhD,IACXhP,EAAI5B,EAAMihB,OACVzH,EAAW5X,EAAE4X,SACbrZ,EAASyB,EAAEzB,OACXwC,EAAQf,EAAEe,MACVD,EAAU1C,EAAMwC,QAAQE,QACxB+B,EAASzE,EAAMsC,GAAG6J,OAClB/J,EAAQpC,EAAMoC,MACdw4D,EAAoBn2D,EAAOm2D,kBAC3B7I,EAAgBttD,EAAOstD,cACvBb,EAA2Ba,EAAcb,yBACzCrF,EAAYkG,EAAclG,UAC1BuF,EAAgBW,EAAcX,cAC9BG,EAAWQ,EAAcR,SACzBE,EAAgBM,EAAcN,cAC9BE,EAAWI,EAAcJ,SACzBx8C,EAAK,4BACLgoD,EAA8B,gCAC9BC,EAAc,UACdC,EAAuB,mBACvBvD,EAAa,YACbC,EAAO,OACPC,EAAW,UACXhI,EAAW,UACXC,EAAa,YACbiI,EAAa,YACbC,EAAY,WACZmD,EAAS,KACTC,EAAM,KACNjI,EAAQ,QACR7C,EAAQ,QACRgD,EAAQ,QACRgC,EAAS,SACT2C,EAAO,OACPC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAO,OACPpI,EAAM,IAINthD,EAAgB7O,EAAMjC,QACtBC,KAAM,SAAUuL,EAAStL,GACrB,GAAI4L,GAAOzL,IACXyL,GAAK5L,QAAUF,KAAW8L,EAAK5L,QAASA,GACxC4L,EAAKuxD,WACD57D,EAAE+J,GAAS+N,GAAG+4C,KACdxmD,EAAKN,QAAUA,IAGvB4F,QAAS,WACL,GAAItF,GAAOzL,IACXoB,GAAEqK,EAAKN,SAAS+J,IAAIP,GACpBlJ,EAAKN,QAAU,KACf/J,EAAEqK,EAAK5L,QAAQwyD,aAAan9C,IAAIs8C,EAAW78C,GAC3ClJ,EAAKwxD,yBAETp9D,SACIq9D,gBAAiB,KACjB3K,KAAK,EACLF,YAAa,KACb8K,SAAU,GACVrV,UAAW,GACXkV,UACMhnD,UAAW+jD,IACX/jD,UAAW6jD,IACX7jD,UAAW8jD,IACX9jD,UAAW4jD,IACX5jD,UAAWikD,IACXjkD,UAAWgkD,IACXhkD,UAAWkkD,IACXlkD,UAAWmkD,KAGrBvrD,OAAQ,SAAU+Q,GAAV,GACAlU,GAAOzL,KACPu8D,EAAS58D,MACT67D,OAAQ,EACRC,OAAQ,EACRtF,cAAe,EACfuF,cAAe,GAChB/7C,EACHlU,GAAK2xD,aAAab,EAAOf,OAAQe,EAAOpG,eACxC1qD,EAAK4xD,cAAcd,EAAOd,OAAQc,EAAOb,eACzCjwD,EAAKuF,qBAETosD,aAAc,SAAUrtD,EAAOE,GAAjB,GAON8lD,GACAuH,EACAC,EACAC,EATA/xD,EAAOzL,KACPmL,EAAU/J,EAAEqK,EAAKN,SACjBsyD,EAAatyD,EAAQ,GAAGhF,MAAM8uD,GAC9ByI,EAAevyD,EAAQy+C,aACvB+T,EAAcxyD,EAAQoX,SAAS7Z,QAC/Bk1D,EAAWnyD,EAAKoyD,sBAAsB5I,EAK5B,KAAVllD,IAGA2sD,EAAYjxD,EAAKqyD,wBACjBryD,EAAKqyD,qBAAuBJ,GAEhCF,EAAmBnS,GACfjgD,MAAOK,EAAKqyD,qBAAuB7tD,EACnCE,IAAK1E,EAAK5L,QAAQs9D,SAClB/sD,IAAKwtD,IAELhN,EAAc6M,IACVC,EAAe3tD,EAAQ4tD,GACvBL,EAAaltD,EAAIotD,EAAkBG,GACnCJ,EAAkBptD,EAAIqtD,EAAkBG,KAExCL,EAAantD,EAAIqtD,EAAkBG,GACnCJ,EAAkBntD,EAAIotD,EAAkBG,IAE5C5H,EAAW9E,EAAcP,EAAyB4M,EAAYC,KAE9DxH,EAAW5E,EAASqM,GAExB/xD,EAAKsyD,mBACL5yD,EAAQ,GAAGhF,MAAM8uD,GAASc,IAE9BsH,cAAe,SAAUttD,EAAOE,GAAjB,GAQP6nD,GACAwF,EACAC,EACAS,EAVAvyD,EAAOzL,KACPmL,EAAU/J,EAAEqK,EAAKN,SACjB8yD,EAAc9yD,EAAQ,GAAGhF,MAAM8wD,GAC/BiH,EAAgB/yD,EAAQ0+C,cACxBtnC,EAASpX,EAAQoX,SACjB47C,EAAe57C,EAAO5Z,SACtBy1D,EAAY3yD,EAAKoyD,sBAAsB5G,GAKvCnP,EAAYr8C,EAAK5L,QAAQioD,UACzBuW,EAAkB5yD,EAAK6yD,kBACb,KAAVvuD,IAGA2sD,EAAYjxD,EAAK8yD,yBACjB9yD,EAAK8yD,sBAAwBL,GAEjCF,EAAoB3S,GAChBjgD,MAAOK,EAAK8yD,sBAAwBtuD,EACpCE,IAAK23C,EACL13C,IAAKguD,IAELC,GAA2B,EAARtuD,GACnBtE,EAAKmsD,8BAELhH,EAAcqN,IACVC,EAAgBnuD,EAAQouD,GACxBb,EAAaltD,EAAI4tD,EAAmBG,GACpCZ,EAAkBptD,EAAI6tD,EAAmBG,KAEzCb,EAAantD,EAAI6tD,EAAmBG,GACpCZ,EAAkBntD,EAAI4tD,EAAmBG,IAE7CrG,EAAY7G,EAAcP,EAAyB4M,EAAYC,KAE/DzF,EAAY3G,EAAS6M,GAEzB7yD,EAAQ,GAAGhF,MAAM8wD,GAAUa,EACvBuG,GAA2B,EAARtuD,GACnBtE,EAAKisD,2BAGbmG,sBAAuB,SAAUW,GAAV,GACf/yD,GAAOzL,KACPmL,EAAU/J,EAAEqK,EAAKN,SACjBszD,EAAqBD,EAAUx6D,cAC/BkyD,EAAczqD,EAAK5L,QAAQ0yD,IAAM,GAAK,EACtChwC,EAASnhB,EAAEqK,EAAKN,SAASoX,SACzBme,EAAgBne,EAAO,GACvBm8C,EAAkBn8C,EAAOk8C,KACzBE,EAAqBzI,GAAesI,IAAcvJ,EAAQ1yC,EAAOssC,aAAetsC,EAAO/F,YAC3F,OAAIkkB,KAAkBv1B,EAAQa,QAAQ8wD,GAAQ,GACM,KAA5Cp8B,EAAcv6B,MAAMs4D,IAA+B7N,EAAcnlD,EAAKN,QAAQhF,MAAMs4D,IAG7EC,EAAkBC,EAFlBtuD,EAAAA,EAKJquD,EAAkBC,GAGjCZ,iBAAkB,WAQd,QAASa,GAAqBzzD,GAC1B,GAAIsyD,GAAatyD,EAAQhF,MAAMuC,KAC/B,OAAmB,KAAf+0D,IACO7M,EAAc6M,KAEdr8D,EAAE+J,GAASwzB,SAASi+B,GAbrB,GAOVp5D,GANAiI,EAAOzL,KACPmL,EAAU/J,EAAEqK,EAAKN,SACjBu1B,EAAgBv1B,EAAQoX,SAAS,GACjCs8C,EAAe1zD,EAAQa,QAAQ8wD,GAC/B1yD,EAAUy0D,EAAa7yD,QAAQ+wD,GAAKv+C,WACpCsgD,EAAgB10D,EAAQvJ,MAU5B,IAAI+9D,EAAqBzzD,EAAQ,KAAOu1B,IAAkBm+B,EAAa,IAAqC,KAA/Bn+B,EAAcv6B,MAAM8uD,GAC7F,IAAKzxD,EAAI,EAAOs7D,EAAJt7D,EAAmBA,IAC3B4G,EAAQ5G,GAAG2C,MAAM8uD,GAAS9D,EAAS/vD,EAAEgJ,EAAQ5G,IAAIkF,UAI7D41D,iBAAkB,WAAA,GAGL96D,GAFLiI,EAAOzL,KACPqK,EAAOjJ,EAAEqK,EAAKN,SAASqT,SAASs2C,GAAOt2C,SAASu+C,EACpD,KAASv5D,EAAI,EAAO6G,EAAKxJ,OAAT2C,EAAiBA,IAC7B,GAA6B,KAAzB6G,EAAK7G,GAAG2C,MAAMwC,QAAiBooD,EAAS1mD,EAAK7G,GAAG2C,MAAMwC,QACtD,OAAO,CAGf,QAAO,GAEXivD,4BAA6B,WAAA,GASrBp0D,GARAiI,EAAOzL,KACPs1D,EAAYl0D,EAAEqK,EAAKN,SAASqT,SAASs2C,GACrCyC,EAAkBjC,EAAU3sD,SAC5B0B,EAAOirD,EAAU92C,SAASu+C,GAC1Bl8D,EAASwJ,EAAKxJ,OACdg3D,EAAqBxtD,EAAKiJ,IAAI,WAC9B,MAAOlS,GAAEpB,MAAM6pD,eAGnB,KAAKrmD,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpB6G,EAAK7G,GAAG2C,MAAM8wD,GAAUhG,EAAcP,EAAyBmH,EAAmBr0D,GAAI+zD,KAG9FG,uBAAwB,WAAA,GAOhBl0D,GANAiI,EAAOzL,KACPqK,EAAOjJ,EAAEqK,EAAKN,SAASqT,SAASs2C,GAAOt2C,SAASu+C,GAChDl8D,EAASwJ,EAAKxJ,OACdg3D,EAAqBxtD,EAAKiJ,IAAI,WAC9B,MAAOlS,GAAEpB,MAAM6pD,eAGnB,KAAKrmD,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpB6G,EAAK7G,GAAG2C,MAAM8wD,GAAU9F,EAAS0G,EAAmBr0D,KAG5DwN,kBAAmB,WACf,GAAIvF,GAAOzL,IACXyL,GAAKszD,qBACLtzD,EAAKuzD,sBAETD,mBAAoB,WAAA,GAMZv7D,GALAiI,EAAOzL,KACPg9D,EAAUvxD,EAAKuxD,QACfn9D,EAAU4L,EAAK5L,QACfgzD,EAAgBpnD,EAAK5L,QAAQm9D,QAC7Bn8D,EAASgyD,EAAchyD,MAE3B,MAAIm8D,GAAWA,EAAQn8D,OAAS,GAAhC,CAGA,IAAK2C,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpBiI,EAAKuxD,QAAQ78D,KAAK,GAAIi6D,GAAkBz6D,GACpCgS,SAAU9R,EAAQq9D,gBAClBzC,iBAAkBhvD,EAAKN,QACvBknD,YAAaxyD,EAAQwyD,YACrBE,IAAK1yD,EAAQ0yD,KACdM,EAAcrvD,KAErBiI,GAAKwzD,+BAEThC,sBAAuB,WAAA,GAGVz5D,GAFLiI,EAAOzL,KACPa,EAAS4K,EAAKuxD,QAAUvxD,EAAKuxD,QAAQn8D,OAAS,CAClD,KAAS2C,EAAI,EAAO3C,EAAJ2C,EAAYA,IACxBiI,EAAKuxD,QAAQx5D,GAAGuN,WAGxBiuD,mBAAoB,WAAA,GAIZx7D,GAHAiI,EAAOzL,KACPg9D,EAAUvxD,EAAKuxD,YACfn8D,EAASm8D,EAAQn8D,MAErB,KAAK2C,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpBiI,EAAKuxD,QAAQx5D,GAAGmV,QAGxBsmD,2BAA4B,WAAA,GAIpBz7D,GACAgvD,EAJA/mD,EAAOzL,KACPg9D,EAAUvxD,EAAKuxD,YACfn8D,EAASm8D,EAAQn8D,MAGrB,KAAK2C,EAAI,EAAO3C,EAAJ2C,EAAYA,IACpBgvD,EAASwK,EAAQx5D,GACjBgvD,EAAO7hD,KAAK2oD,EAAYn3D,EAAMsJ,EAAKyzD,yBAA0BzzD,IAC7D+mD,EAAO7hD,KAAK4oD,EAAMp3D,EAAMsJ,EAAK0zD,oBAAqB1zD,IAClD+mD,EAAO7hD,KAAK6oD,EAAUr3D,EAAMsJ,EAAK2zD,uBAAwB3zD,IACzD+mD,EAAO7hD,KAAK+oD,EAAYv3D,EAAMsJ,EAAK4zD,yBAA0B5zD,IAC7D+mD,EAAO7hD,KAAKgpD,EAAWx3D,EAAMsJ,EAAK6zD,wBAAyB7zD,KAGnEyzD,yBAA0B,WAAA,GAClBzzD,GAAOzL,KACPmL,EAAU/J,EAAEqK,EAAKN,QACrBA,GAAQmB,SAASuwD,GACjBpxD,EAAK8yD,sBAAwBpzD,EAAQ0+C,cACrCp+C,EAAKqyD,qBAAuB3yD,EAAQy+C,aACpCn+C,EAAKsoD,oBAEToL,oBAAqB,SAAUjwD,GAC3BlP,KAAK4O,OAAOM,IAEhBkwD,uBAAwB,WACpB,GAAI3zD,GAAOzL,IACXoB,GAAEqK,EAAKN,SAASiO,YAAYyjD,GAC5BpxD,EAAKwoD,mBAETA,gBAAiB,WACb7yD,EAAEpB,KAAKH,QAAQwyD,aAAan9C,IAAIs8C,EAAW78C,IAE/Co/C,iBAAkB,WACd3yD,EAAEpB,KAAKH,QAAQwyD,aAAat9C,GAAGy8C,EAAW78C,EAAI,SAAUzF,GACpDA,EAAEsH,sBAIV+oD,EAAuB39D,EAAMjC,QAC7B+Q,OAAQ,SAAU/E,GACd,GAAI6zD,GAAUx/D,IACdoB,GAAEuK,EAAOqH,MAAM+B,GAAG08C,EAAa98C,EAAIs9C,EAAO,SAAU/iD,GAAV,GAClCuwD,GAAcvwD,EAAEmJ,OAChBqnD,EAAqBxwD,EAAEU,cACvBkB,EAAgBnF,EAAOmF,cACvB3F,EAAU2F,EAAgBA,EAAc3F,QAAU,IACtD,IAAI2F,GACA,GAAI3F,GAAWu0D,IAAuBv0D,EAAS,CAC3C,GAAI6N,EAAS0mD,EAAoBv0D,IAAYA,IAAYs0D,GAAezmD,EAAS7N,EAASs0D,GACtF,MAEIt0D,KAAYs0D,IACZ9zD,EAAOkF,wBACP2uD,EAAQjL,cAAc5oD,EAAQ+zD,SAK1CF,GAAQjL,cAAc5oD,EAAQ+zD,EAElC/zD,GAAOiF,4BACRmE,GAAG08C,EAAa98C,EAAI,SAAUzF,GAAV,GACf4B,GAAgBnF,EAAOmF,cACvB3F,EAAU2F,EAAgBA,EAAc3F,QAAU,KAClDkN,EAASnJ,EAAEmJ,OACXsnD,EAAwBv+D,EAAEiX,GAAQsmB,SAASg+B,IAAgCv7D,EAAEiX,GAAQ8hC,QAAQ4X,EAAM4K,GAA6B97D,OAAS,GACzIiQ,GAAiB3F,IAAYkN,GAAWW,EAAS7N,EAASkN,IAAYsnD,GACtEh0D,EAAOkF,2BAInB0jD,cAAe,SAAU5oD,EAAQkgC,GACxB3pC,EAAQkR,MAASlR,EAAQqS,UAC1B5I,EAAOmF,cAAgB,GAAIL,GAAco7B,GACrCqxB,gBAAiBvxD,EAAOqH,KACxBu/C,IAAK/yD,EAAMwC,QAAQmR,MAAMxH,EAAOR,SAChCknD,YAAa1mD,EAAOqH,UAKpCusD,GAAqBx7B,QAAU,GAAIw7B,GACnC9uD,EAAcC,OAAS,SAAU/E,GAC7B4zD,EAAqBx7B,QAAQrzB,OAAO/E,IAExChM,EAAOsE,GAAUwM,cAAeA,KAClC9O,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,iBAAkBD,IACjD,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOqC,EAASzE,EAAMsC,GAAG6J,OAAQC,EAAM3H,EAAO4H,IAAKlJ,EAAWnD,EAAMmD,SAAU+Y,EAAazX,EAAOyX,WAAYkkD,GAC9I,KACA,KACA,QACA,QACA,SACDzT,GACC,OACA,SACA,YACA,gBACA,cACA,YACA,YACA,YACA,WACA,WACA,aACA,SACA,WACA,gBACA,iBACA,cACA,cACA,YACA,eACA,aACA,aACA,mBACD0T,EAAa,cAAeC,EAA6B,IAAMD,EAAa,IAAKE,EAAqB,4BACzGznC,EAAgB,SAAUhW,GAC1B,MAAOlhB,GAAEkhB,GAAMpJ,GAAG,mBAElBqjB,EAAY,SAAUja,GACtB,MAAOA,GAAKhM,cAAwD,SAAxCgM,EAAKhM,aAAa,oBAE9CwwB,EAAkB,SAAUxkB,GAC5B,MAAO1W,GAAIwsB,UAAU9V,EAAMia,EAAWjE,IAEtC4Q,EAAqB,SAAUtzB,GAAV,GACjBoqD,GAAuBl5B,EAAgBlxB,EAAMgG,gBAC7CqkD,EAAqBn5B,EAAgBlxB,EAAMyH,eAC3C2iD,GAAwBC,KACpBD,GACApqD,EAAM2sB,eAAey9B,GAErBC,GACArqD,EAAM8sB,YAAYu9B,KAI1Bj1B,EAAoB,SAAUp1B,GAC9B,GAAIkxB,EAAgBlxB,EAAM0G,yBACtB,OAAO,CACJ,IAAIwqB,EAAgBlxB,EAAMgG,iBAAmBkrB,EAAgBlxB,EAAMyH,cAAe,CACrF,GAAI6iD,GAAgBxkD,EAAWmrB,kBAAkBjxB,EACjD,IAA6B,IAAzBsqD,EAAcr/D,OACd,OAAO,EAGf,OAAO,GAEPs/D,EAAW,SAAUt/D,GAAV,GAGF2C,GAFLyyB,EAAS,GACTmqC,EAAQ,gEACZ,KAAS58D,EAAI3C,GAAU,GAAI2C,EAAI,IAAKA,EAChCyyB,GAAUmqC,EAAMC,OAAO/vD,KAAKgwD,MAAMhwD,KAAKiwD,UAAYH,EAAMv/D,OAAS,IAEtE,OAAOo1B,IAEPgP,EAAmB,SAAUplB,GAC7B,GAA4CgW,GAAU5sB,EAAIu3D,EAAtDx7B,GAAyBljB,OAAO,EAYpC,OAXA1gB,GAAEye,GAAMzT,KAAK2zD,GAAoBpjC,KAAK,SAAUn5B,EAAG8e,GAC/CuT,EAAWjqB,EAAItI,KAAKgf,GACpBrZ,EAAKk3D,IACLK,EAAa,IAAM3qC,EAAW,IAAMgqC,EAAa,KAAQ52D,EAAK,OAAU4sB,EAAW,IACnFmP,EAAqB/7B,IACjBqZ,KAAMA,EACNnc,MAAO/E,EAAEkhB,GAAMjW,KAAK,UAExB24B,EAAqBljB,OAAQ,EAC7B1gB,EAAEkhB,GAAMm+C,YAAYD,KAEjBx7B,GAEPE,EAAoB,SAAUrlB,EAAMmlB,GACpC,GAAI/7B,GAAIszB,CACRn7B,GAAEye,GAAMzT,KAAK0zD,GAA4BnjC,KAAK,SAAUn5B,EAAG8e,GACvDrZ,EAAKqZ,EAAKhM,aAAaupD,GACvBtjC,EAAYyI,EAAqB/7B,GACjC7H,EAAEkhB,GAAMm+C,YAAYlkC,EAAUja,MAC1Bia,EAAUp2B,OAAS/E,EAAEm7B,EAAUja,MAAMjW,KAAK,UAC1CjL,EAAEm7B,EAAUja,MAAMg0B,WAAW,SAASjqC,KAAK,QAASkwB,EAAUp2B,UAItEu6D,EAAc,SAAUvqD,GACxB,GAAI/T,GAAO5C,EAAM4C,IACjB,OAAO+T,KAAY/T,EAAKgU,WAAaD,GAAW/T,EAAKiU,QAErDsqD,EAAoB,SAAU98D,GAC9B,GAAIhE,GAAUgE,EAAOA,EAAKhE,QAAUwB,CAChCxB,IAAWA,EAAQ4b,QACnB5b,EAAQ4b,OAAO6gC,cAAejjC,YAAY,KAG9CC,EAAa1X,EAAMjC,QACnBC,KAAM,SAAU+L,GACZ3L,KAAK2L,OAASA,EACd3L,KAAKglC,wBACLhlC,KAAKH,QAAUuB,EAAEzB,UAAWgM,GAAUA,EAAO9L,SAAW8L,EAAO9L,QAAQwZ,WACvE,IAAIvN,GAAQH,EAAOc,QAAQX,KAC3B60D,GAAkB70D,EAAMhH,aACxB67D,EAAkB70D,EAAMjH,eACxB87D,EAAkB70D,EAAM/G,cACxB47D,EAAkB70D,EAAM9G,cAE5B45B,UAAW,SAAUtc,GACjB,GAAiCrZ,GAA7BgtB,EAASj2B,KAAK4gE,QAAQt+C,EAQ1B,OAPmC,KAA/B2T,EAAOhpB,QAAQ4yD,IACf52D,EAAKjJ,KAAKmgE,WACVlqC,EAASA,EAAO5nB,QAAQ,IAAK,IAAMwxD,EAAa,KAAO52D,EAAK,OAE5DA,EAAKgtB,EAAOiF,MAAM,kCAAkC,GAExDl7B,KAAKglC,qBAAqB/7B,GAAMqZ,EACzB2T,GAEX2qC,QAAS,SAAUt+C,GAAV,GAGDuT,GAFA7b,EAAgBha,KAAKH,QAAQma,cAC7B6mD,QAA2B7mD,EAE/B,QAAQ6mD,GACR,IAAK,SACD,MAAOl+D,GAASqX,GAAesI,EACnC,KAAK,WACD,MAAOtI,GAAcsI,EACzB,SAEI,MADAuT,GAAWjqB,EAAItI,KAAKgf,GACb,IAAMuT,EAAW,MAAQA,EAAW,MAGnD2H,YAAa,SAAUlb,GAAV,GACL7W,GAAOzL,KACP8Z,EAAkB9Z,KAAKH,QAAQia,eACnC1Y,GAAE0+D,EAA4Bx9C,GAAMqa,KAAK,WAAA,GACjC1zB,GAAKjJ,KAAKsW,aAAaupD,GACvBtjC,EAAY9wB,EAAKu5B,qBAAqB/7B,EACtCzJ,GAAMi8B,WAAW3hB,IACjBA,EAAgB9Z,KAAMu8B,GAE1Bn7B,EAAEpB,MAAMygE,YAAYlkC,KAExB9wB,EAAKu5B,yBAETm7B,SAAU,SAAUt/D,GAChB,MAAOs/D,GAASt/D,IAEpB4U,QAAS,SAAUvG,EAAG0G,GAAb,GACDkrD,GAAaJ,EAAYxxD,EAAEiH,SAC3B4qD,EAAoBD,GAAc9gE,KAAKghE,gBAAgB9xD,EAAG0G,KAAWkrD,GAAc9gE,KAAKihE,cAAc/xD,EAAG0G,EAC7G,OAAImrD,IACA7xD,EAAEsH,kBACK,GAFX,GAKJyqD,cAAe,SAAU/xD,EAAG0G,GAAb,GACPjK,GAAS3L,KAAK2L,OACd6B,EAAW7B,EAAO6B,QACtB,OAAOoI,GAAM+F,YAAcnO,EAASu/B,kBAAoBv/B,EAASo9B,YAAY17B,IAAM87B,EAAkBp1B,IAEzGorD,gBAAiB,SAAU9xD,EAAG0G,GAAb,GAOTsrD,GAKI3kC,EAEI4kC,EAEIC,EAfZh/D,EAAO5C,EAAM4C,KACbkqC,EAAYp9B,EAAEiH,UAAY/T,EAAKgU,UAC/Bm2B,EAAMr9B,EAAEiH,SAAW/T,EAAKiU,MAC5B,KAAKi2B,IAAcC,EACf,OAAO,CAGX,IADI20B,GAAiB,EACjBtrD,EAAM+F,UAAW,CACjB,GAAIqvB,EAAkBp1B,GAClB,OAAO,CAGX,IADI2mB,EAAYv8B,KAAKqhE,cAAczrD,EAAO22B,GACtChQ,GAAa+P,IACT60B,EAAqBv1D,EAAII,QAAQ4J,EAAM0G,wBAAyB,MAChE6kD,IACIC,EAAqBx1D,EAAII,QAAQuwB,EAAW,MAC5C6kC,GAAsBA,IAAuBD,IAC7C,MAAOD,EAInB,IAAI3kC,IAAc3wB,EAAI2pB,UAAUgH,GAAY,CACxC,GAAI3wB,EAAIkoB,aAAayI,EAAWqjC,KAAmBh0D,EAAIkoB,aAAale,EAAM0G,wBAAyBsjD,GAAgB,CAC/G,KAAOrjC,GAAuD,GAA1CA,EAAUzJ,WAAWI,WAAWryB,QAChD07B,EAAYA,EAAUzJ,UAE1B,IAAIlnB,EAAI2pB,UAAUgH,GACd,MAAO2kC,EAEXlhE,MAAKshE,iBAAiB/kC,EAAW3mB,GAErCsrD,GAAiB,GAGzB,MAAOA,IAEXG,cAAe,SAAUzrD,EAAO40B,GAAjB,GAGHv0B,GAFJsrD,EAAkB3rD,EAAM0G,uBAC5B,IAAI1Q,EAAImpB,MAAMwsC,IAAqB/2B,GAAY9uB,EAAWisB,QAAQ/xB,EAAO2rD,KAAqB/2B,GAAY9uB,EAAWgsB,UAAU9xB,EAAO2rD,GAAmB,CAErJ,GADItrD,EAAOjW,KAAKwhE,UAAUD,EAAiB/2B,GACvCv0B,GAAQrK,EAAI8qB,QAAQzgB,KAAU6wB,EAAgB7wB,GAC9C,KAAOA,GAAQA,EAAKuI,UAAYvI,EAAKuI,SAASgsB,EAAW,EAAIv0B,EAAKuI,SAAS3d,OAAS,IAChFoV,EAAOA,EAAKuI,SAASgsB,EAAW,EAAIv0B,EAAKuI,SAAS3d,OAAS,EAGnE,OAAOimC,GAAgB7wB,KAG/BqrD,iBAAkB,SAAU/kC,EAAW3mB,GAArB,GACVjK,GAAS3L,KAAK2L,OACd08B,EAAoB,GAAIpkC,GAAOmQ,aAAawB,EAAOjK,EAAOqH,KAC9DpH,GAAI4E,OAAO+rB,GACXt4B,EAAOuQ,cAAc7I,EAAQ08B,IAEjCm5B,UAAW,SAAUl/C,EAAMkoB,GAGvB,IAHO,GAEav0B,GADhBqgB,EAAUkU,EAAW,cAAgB,kBACrCzG,EAAUzhB,EACPyhB,IAAY9tB,GACfA,EAAO8tB,EAAQzN,GACXrgB,GAAQrK,EAAI+mB,WAAW1c,IAAS,gBAAgBiB,KAAKjB,EAAKW,aAC1DmtB,EAAU9tB,EACVA,EAAO8tB,EAAQzN,IAEdrgB,IACD8tB,EAAUA,EAAQjR,WAG1B,OAAO7c,KAGfqD,GAAWijB,UAAYA,EACvBjjB,EAAWwtB,gBAAkBA,EAC7BxtB,EAAW4vB,mBAAqBA,EAChC5vB,EAAW0xB,kBAAoBA,EAC/B1xB,EAAW6yC,iBAAmBA,EAC9B7yC,EAAW2rB,iBAAmBA,EAC9B3rB,EAAW4rB,kBAAoBA,EAC/BjhC,EAAOqV,WAAaA,GACtB3X,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,4CAA6C,iBAAkBD,IACxE,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOyE,EAASzE,EAAMsC,GAAG6J,OAAQ9I,EAAcoB,EAAOpB,YAAa6Y,EAAazX,EAAOyX,WAAY9P,EAAM3H,EAAO4H,IAAKlI,EAAed,EAAYc,aAAclB,EAAewB,EAAOxB,aAAcgmC,EAAUxkC,EAAOwkC,QAClO6kB,EAAoB,GAAIrpD,GAAOo3C,oBAAqB33C,MAAO,YAC3D+9D,EAAoB,GAAIx9D,GAAOo3C,oBAC3B33C,MACI,KACA,SAGRg+D,EAAS,eACTvT,EAAqB1lB,EAAQ9oC,QAC7BwX,KAAM,WAAA,GACEuC,GAAM1Z,KACN2L,EAAS+N,EAAI/N,OACbiK,EAAQ8D,EAAI9D,MAAQ8D,EAAIkvB,YACxB+4B,EAAgBjoD,EAAIkoD,aAAgBloD,EAAI7Z,QAAQuuD,eAA6C/sD,EAA5BqY,EAAImoD,eAAejsD,GACpFksD,EAAgBpoD,EAAIqoD,oBAAsBJ,EAAgBjoD,EAAIsoD,eAAepsD,GAASvU,EACtFxB,GACAmgD,SAAS,EACT17C,SAAUqH,EAAO9L,QAAQyE,SACzB29D,cAAe7gE,EAAEe,MAAMuX,EAAIwoD,cAAexoD,GAC1CmyB,MAAOnyB,EAAIyoD,WAAWR,EAAeG,GACrClnD,cAAejP,EAAO9L,QAAQ+a,cAC9BzH,MAAO3T,EAAMwC,QAAQmR,MAAMxH,EAAOQ,UAElCyzC,EAAS,GAAI37C,GAAOm+D,kBAAkBviE,EAC1C+/C,GAAO3sC,QAEXivD,cAAe,SAAUtvC,GACrB,GAAIlZ,GAAM1Z,IACV0Z,GAAImvB,aAAanvB,EAAI9D,OACjBgd,IACIlZ,EAAI7Z,QAAQuuD,eACZ10C,EAAI2oD,YAAY3oD,EAAI4oD,eAAe1vC,IAEnClZ,EAAI6oD,YAAY3vC,EAAMlZ,EAAIkoD,aAAcloD,EAAIqoD,uBAIxDl5B,aAAc,SAAUjzB,GAAV,GACN8D,GAAM1Z,KACNiS,EAAMyH,EAAI/N,OAAOjB,QACrBkB,GAAIsoB,mBAAmBjiB,GAAK0D,QAC5B8yB,EAAQ3oC,GAAG+oC,aAAa9oC,KAAK2Z,EAAK9D,IAEtCysD,YAAa,SAAUx2B,GACnB,GAAIj2B,GAAQ5V,KAAK4V,KACjBA,GAAM2tB,WAAWsI,GACjBj2B,EAAMkB,UAAS,GACf9W,KAAK2L,OAAOoL,YAAYnB,IAE5B2sD,YAAa,SAAU3vC,EAAMiZ,EAAOi2B,GAShC,IATS,GAYLU,GACAttB,EAAK3yB,EAGDkgD,EACAC,EACAC,EAgBAC,EAMJC,EAvCAnpD,EAAM1Z,KACN8iE,EAAY1hE,EAAEyqC,EAAMxhC,MAAMiwC,UAC1ByoB,EAAYnwC,EAAKowC,gBACjB34D,EAAO04D,EAAU14D,KACjBD,EAAU24D,EAAU34D,QACpBoyB,EAAO,SAAUymC,GACjB,MAAOA,GAAWA,EAAWpiE,OAAS,IAEnCihE,EAAcjhE,OAAS,GAC1BihE,EAAcpoB,KAKlB,IAHI8oB,EAAkBV,EAAcjhE,OAAS27B,EAAKslC,GAAehvC,WAAa0J,EAAKsmC,GAEnFppD,EAAIwpD,iBAAiBJ,EAAWA,EAAUjiE,OAASwJ,GAC5BA,EAAnBy4D,EAAUjiE,OAKV,IAJI4hE,EAAWrhE,EAAEohE,GAAiBlhC,QAC9BohC,EAAcF,EAAgBrtB,MAAMt0C,OACpC8hE,EAAet4D,EAAOy4D,EAAUjiE,OACpC0hB,EAASigD,EAAgB1vC,WAClB6vC,GACHztB,EAAM3yB,EAAO4gD,UAAUV,EAAW,GAClC/oD,EAAI0pD,aAAaV,EAAcxtB,EAAIC,MAAMt0C,OAAQq0C,GACjDytB,GAGJG,GAAU,GAAG3tB,MAAMt0C,OAASuJ,GAC5BhJ,EAAE0hE,GAAWnmC,KAAK,SAAUn5B,EAAG0xC,GAC3B,KAAOA,EAAIC,MAAMt0C,OAASuJ,GACtB8qC,EAAImuB,WAAW,MAIKj5D,EAA5B04D,EAAU,GAAG3tB,MAAMt0C,SACf+hE,EAAYxhE,EAAEo7B,EAAKslC,IAAkBtlC,EAAKgmC,EAAgBrtB,QAAQ7T,QACtElgC,EAAE0hE,GAAWnmC,KAAK,SAAUn5B,EAAG0xC,GAC3Bx7B,EAAI0pD,aAAah5D,EAAU8qC,EAAIC,MAAMt0C,OAAQq0C,EAAK0tB,EAAY,MAGtElpD,EAAI4pD,uBAAuBz3B,EAAOk3B,GAC9BF,EAAWjwC,EAAK2wC,eAChBzB,EAAc,IACdl2D,EAAIS,KAAKy1D,EAAc,IAAM74D,GAAI45D,EAAS55D,IAAM,QAEnD45D,EAASv4D,eAAiBlJ,EAAE0hE,GAAWtkD,WAAapd,EAAE0gE,IAAgBnlC,KAAK,SAAUn5B,EAAG+mC,GACrF7wB,EAAI8pD,sBAAsBj5B,EAAMs4B,KAEpCnpD,EAAI+pD,eAAe53B,EAAOk3B,GAC1BA,EAAUW,iBAAmBX,EAAUW,mBAAoB,EACvDhqD,EAAIiqD,2BAA2B93B,IAAUk3B,EAAUW,kBACnDhqD,EAAIkqD,yBAAyB/3B,EAAOk3B,EAAUW,mBAGtDG,cAAe,SAAU3uB,GACrB,MAAOtpC,GAAIsN,GAAGg8B,EAAIpiB,WAAY,UAAYlnB,EAAIsN,GAAGg8B,EAAIC,MAAM,GAAI,OAEnEyuB,yBAA0B,SAAU/3B,EAAOi4B,GAAjB,GAIlBxiC,GAAOyiC,EAASC,EAHhBC,GAAY,GAAIC,OAAOC,UACvBC,KACAh6D,EAAUyhC,EAAMxhC,KAAK,GAAG8qC,MAAMt0C,OAE9BwjE,EAAc,WACd,IAAK,GAAI7gE,GAAI,EAAO4G,EAAJ5G,EAAaA,IACzB4gE,EAAI5gE,GAAK,WAAYygE,GAGzBK,EAAiB,SAAU3vC,EAAG4V,GAC9BnpC,EAAEmpC,GAAMu5B,EAAY,OAAS,cAAc,KAAMM,EAAIzvC,KAErD4vC,EAAsB,SAAU5vC,EAAG4V,GACnCnpC,EAAEmpC,GAAMu5B,EAAY,OAAS,cAAc,UAAWM,EAAIzvC,KAE1D6vC,EAAexkE,KAAK6jE,aACxBziE,GAAEyqC,EAAMxhC,MAAMsyB,KAAK,SAAU6T,EAAG0E,GAC5B,GAAIsvB,EAAatvB,GAQb,IAPA5T,EAAQkP,EACRuzB,EAAUl4B,EAAMxhC,OAAOi3B,GACvB0iC,EAAYD,IAAYS,EAAaT,GACjCC,IACAK,IACAjjE,EAAE8zC,EAAIC,OAAOxY,KAAK2nC,IAEfN,GACH5iE,EAAE2iE,EAAQ5uB,OAAOxY,KAAK4nC,GACtBR,EAAUl4B,EAAMxhC,OAAOi3B,GACvB0iC,EAAYD,IAAYS,EAAaT,MAKrDJ,2BAA4B,SAAU93B,GAAV,GASpB44B,GARAtvB,EAAQ/zC,EAAEyqC,EAAMxhC,MAAMmU,WACtBgmD,EAAexkE,KAAK6jE,cACpBa,IAUJ,OATAvvB,GAAMxY,KAAK,SAAUhI,EAAG4V,GAChBA,EAAKthC,IAAMu7D,EAAaj6B,EAAKzX,aAC7B4xC,EAAWvkE,KAAKoqC,EAAKthC;GAGzBw7D,EAAkBtvB,EAAMra,OAAO,SAAUnG,EAAG4V,GAC5C,GAAIo6B,GAAcp6B,EAAKj0B,aAAa,UACpC,OAAOquD,KAAgBH,EAAaj6B,EAAKzX,aAAe1xB,EAAEqC,QAAQkhE,EAAaD,GAAc,OAExFD,EAAgB5jE,QAE7BuiE,aAAc,SAAUppC,EAAOkb,EAAK5T,GAChCA,EAAQp0B,MAAMo0B,GAAS,GAAKA,CAC5B,KAAK,GAAWiJ,GAAP/mC,EAAI,EAAaw2B,EAAJx2B,EAAWA,IAC7B+mC,EAAO2K,EAAI0vB,WAAWtjC,GACtBiJ,EAAKj8B,UAAY,UAGzB40D,iBAAkB,SAAU74D,EAAM2vB,GAC9B,IAAK,GAAWkb,GAAK2vB,EAAZrhE,EAAI,EAAuBw2B,EAAJx2B,EAAWA,IACvC0xC,EAAM7qC,EAAKqvC,MACXmrB,EAAY3vB,EAAIpiB,WAChB+xC,EAAU3vC,YAAYggB,GACjB2vB,EAAUx6D,KAAKxJ,QAChB+K,EAAI4E,OAAOq0D,IAIvBvC,eAAgB,SAAU1vC,GAAV,GASRslB,GACK1H,EAAO0E,EAEHvgB,EAAO4V,EAXhB7wB,EAAM1Z,KACNiS,EAAMyH,EAAI/N,OAAOjB,SACjBq4D,EAAYnwC,EAAKowC,gBACjBH,EAAWjwC,EAAK2wC,eAChBuB,EAAgBjC,EAASv4D,eACzBuhC,EAAQjgC,EAAI8E,OAAOuB,EAAK,QAI5B,KAHAyH,EAAI4pD,uBAAuBz3B,EAAOk3B,GAClCrpD,EAAI+pD,eAAe53B,EAAOk3B,GACtB7qB,EAAQrM,EAAMk5B,cACTv0B,EAAI,EAAYuyB,EAAU14D,KAAdmmC,EAAoBA,IAErC,IADA0E,EAAMgD,EAAMirB,YACHxuC,EAAI,EAAaouC,EAAU34D,QAAduqB,EAAuBA,IACzC4V,EAAO2K,EAAI0vB,aACXr6B,EAAKj8B,UAAY,SACP,IAANkiC,GAAiB,IAAN7b,GAAWkuC,EAAS55D,KAC/BshC,EAAKthC,GAAK45D,EAAS55D,IAEvByQ,EAAI8pD,sBAAsBj5B,EAAMu6B,GAAuB,IAANt0B,GAAiB,IAAN7b,EAAUkuC,KAM9E,OAHIE,GAAUW,kBACVhqD,EAAIkqD,yBAAyB/3B,EAAOk3B,EAAUW,kBAE3C73B,GAEXy3B,uBAAwB,SAAUz3B,EAAOjZ,GACrC,GAAIzsB,GAAQnG,KAAKglE,eAAepyC,EAChChnB,GAAIS,KAAKw/B,GACLjjC,YAAagqB,EAAKhqB,aAAe,KACjCC,YAAa+pB,EAAK/pB,aAAe,KACjCusB,UAAWxC,EAAKwC,WAAa,KAC7BnsB,GAAI2pB,EAAK3pB,IAAM,KACfR,QAASmqB,EAAKnqB,SAAW,KACzBtC,MAAOA,GAAS,OAEpB/E,EAAEyqC,GAAOv/B,SAAS,YAEtBk3D,sBAAuB,SAAUj5B,EAAM3X,GACnC,GAAIzsB,GAAQnG,KAAKglE,eAAepyC,EAChCzsB,GAAMgrC,QAAUve,EAAK/pB,aAAe,KACpC1C,EAAM+qC,OAASte,EAAK9pB,YAAc,KAClC8C,EAAIS,KAAKk+B,GACLpkC,MAAOA,GAAS,KAChBivB,UAAWxC,EAAKwC,WAAa,QAGrCquC,eAAgB,SAAU53B,EAAOjZ,GAAjB,GAIJpqB,GAEAO,CALJ8iC,GAAMrjC,UAAYoqB,EAAKqyC,eACvBp5B,EAAMq5B,gBACCtyC,EAAKqyC,iBACRz8D,EAAUqjC,EAAMs5B,gBACpB38D,EAAQ8F,UAAYskB,EAAKqyC,eACrBl8D,EAAY/I,KAAKolE,kBAAkBxyC,EAAKyyC,kBAC5Cz5D,EAAIS,KAAK7D,GACLrC,OACIq2C,UAAWzzC,EAAUyzC,UACrB8oB,cAAev8D,EAAUu8D,mBAKzCN,eAAgB,SAAUpyC,GAAV,GACR7pB,GAAY/I,KAAKolE,kBAAkBxyC,EAAK7pB,WACxCs7C,EAAa,YAAczxB,GAAOA,EAAKvpB,SAAW,GAAK,SAAW,IACtE,QACIX,MAAOkqB,EAAKlqB,MAAQkqB,EAAKlqB,MAAQkqB,EAAK2yC,UAAY,KAClD58D,OAAQiqB,EAAKjqB,OAASiqB,EAAKjqB,OAASiqB,EAAK4yC,WAAa,KACtDhpB,UAAWzzC,EAAUyzC,UACrB8oB,cAAev8D,EAAUu8D,cACzBG,gBAAiB7yC,EAAK8yC,SAAW,KACjC10B,YAAape,EAAKoe,YAClB7nC,YAAaypB,EAAKzpB,YAClBw8D,YAAa/yC,EAAK+yC,YAClBC,eAAgBhzC,EAAKxpB,gBAAkB,WAAa,KACpDi7C,WAAYA,IAGpB+gB,kBAAmB,SAAUr8D,GAAV,GAKH88D,GAJRrpB,EAAY,GACZ8oB,EAAgB9oB,CAUpB,OATIzzC,KAC8B,IAA1BA,EAAUkE,QAAQ,MACd44D,EAAQ98D,EAAU+L,MAAM,KAC5B0nC,EAAYqpB,EAAM,GAClBP,EAAgBO,EAAM,IAEtBrpB,EAAYzzC,IAIhByzC,UAAWA,EACX8oB,cAAeA,IAGvBnD,WAAY,SAAUt2B,EAAOi2B,GAAjB,GAOJpoD,GACAosD,EACAz7D,EACA7B,EACAu9D,EAEAhiE,EAIAiiE,EACAX,EACA3B,EACAuC,CAnBJ,OAAKp6B,IAMDnyB,EAAM1Z,KACN8lE,EAASj6B,EAAM1lC,MACfkE,EAAOwhC,EAAMxhC,KACb7B,EAAUqjC,EAAMrjC,QAChBu9D,EAAe3kE,EAAEoH,EAAUA,EAAQ8qB,WAAU,GAAQjyB,GACzD0kE,EAAa35D,KAAK,aAAaoE,SAC3BzM,EAAW8nC,EAAMzW,UACrBrxB,EAAWA,EAASsK,QAAQ,wBAAyB,IACrDtK,EAAWA,EAASsK,QAAQ,cAAe,KAC3CtK,EAAWA,EAASsK,QAAQ,YAAa,IACrC23D,EAAiBtsD,EAAIwsD,cAAcr6B,GAAO,GAC1Cw5B,EAAmB78D,EAAUkR,EAAIwsD,cAAc19D,GAAWnH,EAC1DqiE,EAAmBhqD,EAAIiqD,2BAA2B93B,GAClDo6B,GACAjD,iBACIt6D,MAAOo9D,EAAOp9D,OAASmjC,EAAMnjC,MAAQksC,WAAWkxB,EAAOp9D,OAASmjC,EAAMnjC,OAAS,KAC/EC,OAAQm9D,EAAOn9D,QAAUkjC,EAAMljC,OAASisC,WAAWkxB,EAAOn9D,QAAUkjC,EAAMljC,QAAU,KACpFyB,QAASC,EAAK,GAAKA,EAAK,GAAGmU,SAAS3d,OAAS,EAC7CwJ,KAAMA,EAAKxJ,OACX0kE,UAAW7rD,EAAIysD,SAASL,EAAOp9D,OAC/B88D,WAAY9rD,EAAIysD,SAASL,EAAOn9D,QAChCC,YAAaijC,EAAMjjC,YACnBC,YAAagjC,EAAMhjC,YACnBE,UAAWi9D,EAAexpB,UAC1BkpB,QAASI,EAAOL,iBAAmB55B,EAAM65B,QACzCtwC,UAAWrxB,EACXkF,GAAI4iC,EAAM5iC,GACV+nC,YAAa80B,EAAO90B,aAAenF,EAAM3iC,OACzCy8D,YAAaG,EAAOH,YACpBx8D,YAAa28D,EAAO38D,aAAe,GACnCC,kBAAmB08D,EAAOF,eAC1Bn9D,QAASojC,EAAMpjC,QACfw8D,eAAgBz8D,EAAUu9D,EAAahqD,OAAS,GAChDspD,iBAAkB78D,GAAW68D,EAAiB7oB,UAAY6oB,EAAiB7oB,UAAY,IAAM6oB,EAAiBC,cAAgB,GAC9H5B,iBAAkBA,GAEtB5B,kBAEJmE,EAAU57D,KAAOqP,EAAI0sD,eAAe/7D,EAAMy3D,EAAemE,GAClDA,IA3CCjD,mBACAlB,mBA4CZsE,eAAgB,SAAU/7D,EAAMy3D,EAAemE,GAA/B,GAEG/wB,GAAKmxB,EAASlxB,EAAO5K,EAAM+7B,EACjC9iE,EAKIu2B,EAPTrgB,EAAM1Z,KACN4yB,IACJ,KAASpvB,EAAI,EAAO6G,EAAKxJ,OAAT2C,EAAiBA,IAK7B,IAJA0xC,EAAM7qC,EAAK7G,GACX6iE,GAAYlxB,UACZA,EAAQD,EAAIC,MACZviB,EAAKzyB,KAAKkmE,GACDtsC,EAAI,EAAOob,EAAMt0C,OAAVk5B,EAAkBA,IAC9BwQ,EAAO4K,EAAMpb,GACbusC,EAAW5sD,EAAI6sD,UAAUh8B,GACa,IAAlCnpC,EAAEqC,QAAQ8mC,EAAMu3B,IAChBmE,EAAUnE,cAAc3hE,KAAKmmE,GAEjCD,EAAQlxB,MAAMh1C,KAAKmmE,EAG3B,OAAO1zC,IAEX2zC,UAAW,SAAUh8B,GAAV,GAKH3X,GAJAlZ,EAAM1Z,KACNwmE,EAASj8B,EAAKpkC,MACd4C,EAAY2Q,EAAIwsD,cAAc37B,EAkBlC,OAjBAxhC,GAAYA,EAAUyzC,UAAYzzC,EAAUyzC,UAAY,IAAMzzC,EAAUu8D,cAAgB,GACpF1yC,GACAlqB,MAAO89D,EAAO99D,OAAS6hC,EAAK7hC,MAAQksC,WAAW4xB,EAAO99D,OAAS6hC,EAAK7hC,OAAS,KAC7EC,OAAQ69D,EAAO79D,QAAU4hC,EAAK5hC,OAASisC,WAAW4xB,EAAO79D,QAAU4hC,EAAK5hC,QAAU,KAClF48D,UAAW7rD,EAAIysD,SAASK,EAAO99D,OAC/B88D,WAAY9rD,EAAIysD,SAASK,EAAO79D,QAChCG,WAAY09D,EAAOt1B,OACnBroC,YAAa29D,EAAOr1B,QACpBpoC,UAAWA,EACX28D,QAASc,EAAOf,iBAAmBl7B,EAAKm7B,QACxCtwC,UAAWmV,EAAKnV,UAChBnsB,GAAIshC,EAAKthC,GACT+nC,YAAaw1B,EAAOx1B,aAAezG,EAAKrhC,OACxCy8D,YAAaa,EAAOb,YACpBx8D,YAAaq9D,EAAOr9D,YACpBE,SAA+B,UAArBm9D,EAAOniB,aAIzB6hB,cAAe,SAAU/6D,EAASs7D,GAAnB,GAMPC,GALAvgE,EAAQgF,EAAQhF,MAChBwgE,EAASxgE,EAAMq2C,WAAarxC,EAAQ06D,OAAS,EACjD,OAAIY,IACSjqB,UAAWmqB,IAEpBD,EAASvgE,EAAMm/D,eAAiBn6D,EAAQu7D,QAAU,GAClDC,GAAUD,GAENlqB,UAAWmqB,EACXrB,cAAeoB,IAGlBC,GAAUD,GAEPlqB,UAAW,OACX8oB,cAAeoB,GAGnBC,IAAWD,GAEPlqB,UAAWmqB,EACXrB,cAAe,QAInB9oB,UAAW,GACX8oB,cAAe,MAGvBa,SAAU,SAAU/6D,GAChB,GAAIw7D,IAAQx7D,GAAS,IAAI8vB,MAAMwmC,EAC/B,OAAOkF,GAAOA,EAAK,GAAK,MAE5B/E,eAAgB,SAAUjsD,GACtB,GAAIiJ,GAAQjT,EAAIqvB,SAASvf,EAAWmD,MAAMjJ,GAAQhK,EAAIyqB,iBAAiB,EACvE,OAAOi3B,GAAkBrU,aAAap6B,GAAO,IAEjDmjD,eAAgB,SAAUpsD,GACtB,GAAIiJ,GAAQjT,EAAIqvB,SAASvf,EAAWmD,MAAMjJ,GAAQhK,EAAIyqB,iBAAiB,EACvE,OAAOorC,GAAkBxoB,aAAap6B,MAG1CqvC,EAAkBjqD,EAAO3C,KAAK3B,QAC9BS,QAAS,SAAUP,GAEf,MADAA,GAAQuuD,eAAiBpuD,KAAKH,QAAQuuD,eAC/B,GAAID,GAAmBtuD,MAGlCgnE,EAAsB3Y,EAAgBvuD,QACtCsM,OAAQ,SAAUnK,EAAI+c,GAClB,GAAI/C,IAAewxC,EAAkBxxC,YAAY+C,EACjD/c,GAAGgd,YAAY,mBAAoBhD,KAG3Ctc,GAAMsC,GAAG6J,OAAOuiD,gBAAkBA,EAClC1uD,EAAMsC,GAAG6J,OAAOwiD,mBAAqBA,EACrCxqD,EAAa,cAAe,GAAIkjE,IAC5BzmE,QAAS+tD,EACTC,gBAAgB,EAChBzrD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtB0P,MAAO,qBAGjB9Q,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,2CAA4C,4CAA6CD,IAClG,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOsnE,GAClBvjE,OAAQ,IACR4M,IAAK,GACN42D,GACC,KACA,MACDC,GACC,QACA,SACA,SACA,SACA,SACA,QACA,QACA,SACA,UACA,UACA,OACA,UAEJC,GACA19B,aAEQnU,UAAW,0CACXhqB,MAAO,SAGPgqB,UAAW,4CACXhqB,MAAO,WAGPgqB,UAAW,2CACXhqB,MAAO,UAGPgqB,UAAW,gCACXhqB,MAAO,KAGfs+B,cAAe,YACfC,eAAgB,QAChBhnC,SAAU,4DACVukE,cAAe,2EAEfC,GACA59B,aAEQnU,UAAW,uCACXhqB,MAAO,aAGPgqB,UAAW,yCACXhqB,MAAO,eAGPgqB,UAAW,wCACXhqB,MAAO,cAGPgqB,UAAW,0CACXhqB,MAAO,gBAGPgqB,UAAW,4CACXhqB,MAAO,kBAGPgqB,UAAW,2CACXhqB,MAAO,iBAGPgqB,UAAW,0CACXhqB,MAAO,gBAGPgqB,UAAW,4CACXhqB,MAAO,kBAGPgqB,UAAW,2CACXhqB,MAAO,iBAGPgqB,UAAW,gCACXhqB,MAAO,KAGfs+B,cAAe,YACfC,eAAgB,QAChBhnC,SAAU,4DACVukE,cAAe,2EAEfE,GACA79B,aAEQnU,UAAW,uCACXhqB,MAAO,aAGPgqB,UAAW,yCACXhqB,MAAO,eAGPgqB,UAAW,wCACXhqB,MAAO,cAGPgqB,UAAW,0CACXhqB,MAAO,gBAGPgqB,UAAW,4CACXhqB,MAAO,kBAGPgqB,UAAW,2CACXhqB,MAAO,iBAGPgqB,UAAW,gCACXhqB,MAAO,KAGfs+B,cAAe,YACfC,eAAgB,QAChBhnC,SAAU,4DACVukE,cAAe,2EAEfG,EAAiB,mxMACjBjF,EAAoB5iE,EAAMoC,MAAMjC,QAChCC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,GAEnBoT,KAAM,WAEF,QAASQ,GAAMvE,GACXA,EAAEsH,iBACF/K,EAAKsF,UACL6uC,EAAO7uC,UAEX,QAASu2D,GAAUp4D,GACfzD,EAAK87D,oBAAoBC,GACzB/zD,EAAMvE,GACFzD,EAAKyS,QACLzS,EAAKyS,SAETre,EAAQoiE,cAAcuF,GAE1B,QAASC,GAAav4D,GAClBuE,EAAMvE,GACNrP,EAAQoiE,gBAjBV,GACyGriB,GAsBvGz0C,EAtBAM,EAAOzL,KAAMH,EAAU4L,EAAK5L,QAAS+a,EAAgB/a,EAAQ+a,cAAe4sD,EAAY3nE,EAAQgsC,MAAevnC,EAAWzE,EAAQyE,QAkBtIsW,GAAcnH,MAAQg0D,EACtB7sD,EAAcnI,MAAQnO,EAAS8D,YAC/BwS,EAAcolC,QAAUngD,EAAQmgD,QAChCJ,EAASx+C,EAAEqK,EAAKi0C,gBAAgBp7C,IAAWqN,SAASjH,SAASsI,MAAMg2B,YAAYpuB,GAAe5O,QAAQ,aAAa8S,YAAY,QAASjf,EAAQsT,OAAO2rB,MAAM1yB,KAAK,gBAAgBgM,MAAMkvD,GAAWxoC,MAAM1yB,KAAK,mBAAmBgM,MAAMqvD,GAAc3oC,MAAMlM,KAAK,eAC5PznB,EAAUy0C,EAAOz0C,QACrBM,EAAKi8D,uBAAuBv8D,GAC5BM,EAAKk8D,yBAAyBx8D,EAASq8D,GACvC/7D,EAAKm8D,wBAAwBz8D,EAASq8D,GACtC/7D,EAAKo8D,iCAAiC18D,EAASq8D,GAC/C5nB,EAAOS,SACPT,EAAO3sC,QAEXy0D,uBAAwB,SAAUv8D,GAC9B,GAAI28D,GAAa9nE,KAAK8nE,aACtBA,GAAWC,SAAW58D,EAAQiB,KAAK,wBAAwB47D,eAAgBjtD,WAAW,IAAS6X,KAAK,kBAExG20C,oBAAqB,WAAA,GACb97D,GAAOzL,KACP4yB,EAAOnnB,EAAK5L,QAAQgsC,KACxBpgC,GAAKw8D,wBAAwBr1C,GAC7BnnB,EAAKy8D,uBAAuBt1C,GAC5BnnB,EAAK08D,gCAAgCv1C,IAEzCq1C,wBAAyB,SAAUT,GAAV,GACjBY,GAAYpoE,KAAK8nE,WAAWM,UAC5BpF,EAAkBwE,EAAUxE,eAChCA,GAAgBt6D,MAAQ0/D,EAAU1/D,MAAM0C,QACxC43D,EAAgBuC,UAAY6C,EAAU7C,UAAUn6D,QAChD43D,EAAgBr6D,OAASy/D,EAAUz/D,OAAOyC,QAC1C43D,EAAgB54D,QAAUg+D,EAAUh+D,QAAQgB,QAC5C43D,EAAgB34D,KAAO+9D,EAAU/9D,KAAKe,QACtC43D,EAAgBwC,WAAa4C,EAAU5C,WAAWp6D,QAClD43D,EAAgBp6D,YAAcw/D,EAAUx/D,YAAYwC,QACpD43D,EAAgBn6D,YAAcu/D,EAAUv/D,YAAYuC,QACpD43D,EAAgBj6D,UAAYq/D,EAAUr/D,UAAUqC,QAChD43D,EAAgB0C,QAAU0C,EAAU1C,QAAQt6D,QAC5C43D,EAAgB5tC,UAAYgzC,EAAUhzC,UAAUhqB,MAChD43D,EAAgB/5D,GAAKm/D,EAAUn/D,GAAGmC,MAClC43D,EAAgBhyB,YAAco3B,EAAUp3B,YAAY5lC,QACpD43D,EAAgB2C,YAAcyC,EAAUzC,YAAYv6D,QACpD43D,EAAgB75D,YAAci/D,EAAUj/D,YAAYiC,QACpD43D,EAAgB55D,gBAAkBg/D,EAAUh/D,gBAAgBi/D,SAEhEH,uBAAwB,SAAUr8B,GAAV,GAChBy6B,GAAWz6B,EAAM03B,kBACjB+E,EAAWtoE,KAAK8nE,WAAWQ,QAC/BhC,GAASh8D,eAAiBg+D,EAASh+D,eAAe+9D,QAClD/B,EAAS59D,MAAQ4/D,EAAS5/D,MAAM0C,QAChCk7D,EAASf,UAAY+C,EAAS/C,UAAUn6D,QACxCk7D,EAAS39D,OAAS2/D,EAAS3/D,OAAOyC,QAClCk7D,EAASd,WAAa8C,EAAS9C,WAAWp6D,QAC1Ck7D,EAASx9D,WAAaw/D,EAASx/D,WAAWsC,QAC1Ck7D,EAASz9D,YAAcy/D,EAASz/D,YAAYuC,QAC5Ck7D,EAASv9D,UAAYu/D,EAASv/D,UAAUqC,QACxCk7D,EAASZ,QAAU4C,EAAS5C,QAAQt6D,QACpCk7D,EAASlxC,UAAYkzC,EAASlzC,UAAUhqB,MACxCk7D,EAASr9D,GAAKq/D,EAASr/D,GAAGmC,MAC1Bk7D,EAASt1B,YAAcs3B,EAASt3B,YAAY5lC,QAC5Ck7D,EAASX,YAAc2C,EAAS3C,YAAYv6D,QAC5Ck7D,EAASn9D,YAAcm/D,EAASn/D,YAAYiC,QAC5Ck7D,EAASj9D,SAAWi/D,EAASj/D,SAASg/D,SAE1CF,gCAAiC,SAAUt8B,GAAV,GACzBm3B,GAAkBn3B,EAAMm3B,gBACxBuF,EAAoBvoE,KAAK8nE,WAAWS,iBACxCvF,GAAgBiC,eAAiBsD,EAAkBtD,eAAe75D,MAClE43D,EAAgBqC,iBAAmBkD,EAAkBlD,iBAAiBj6D,QACtE43D,EAAgBv6D,QAAU8/D,EAAkB9/D,QAAQ2C,MACpD43D,EAAgBU,iBAAmB6E,EAAkB7E,iBAAiB2E,SAE1EG,SAAU,SAAUzB,EAAO37D,GACnBA,GAAoC,IAA3BhK,EAAEqC,QAAQ2H,EAAO27D,IAC1BA,EAAM5mE,KAAKiL,IAGnBu8D,yBAA0B,SAAUx8D,EAAS0gC,GAAnB,GAClBi8B,GAAa9nE,KAAK8nE,WAClBM,EAAYN,EAAWM,aACvBpF,EAAkBn3B,EAAMm3B,gBAAkBn3B,EAAMm3B,mBACpDA,GAAgB75D,YAAc65D,EAAgB75D,aAAe,GAC7DnJ,KAAKwoE,SAASzB,EAAO/D,EAAgBuC,WACrCvlE,KAAKwoE,SAASzB,EAAO/D,EAAgBwC,YACrCxlE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,yBAA0B,QAAS42D,EAAiBoF,GAC1FpoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,0BAA2B,SAAU42D,EAAiBoF,GAC5FpoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,2BAA4B,UAAW42D,EAAiBoF,GAC1Fj4D,IAAK,EACL/E,MAAO,IAEXpL,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,wBAAyB,OAAQ42D,EAAiBoF,GACpFj4D,IAAK,EACL/E,MAAO,IAEXpL,KAAK0oE,kBAAkBv9D,EAAQiB,KAAK,8BAA+B,YAAa42D,EAAiBoF,EAAWrB,GAC5G/mE,KAAK0oE,kBAAkBv9D,EAAQiB,KAAK,+BAAgC,aAAc42D,EAAiBoF,EAAWrB,GAC9G/mE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,gCAAiC,cAAe42D,EAAiBoF,GACvGpoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,gCAAiC,cAAe42D,EAAiBoF,GACvGpoE,KAAK2oE,4BAA4Bx9D,EAAQiB,KAAK,6BAA8B42D,GAC5EhjE,KAAK4oE,iBAAiBz9D,EAAQiB,KAAK,sBAAuB,UAAW42D,EAAiBoF,GACtFpoE,KAAK6oE,WAAW19D,EAAQiB,KAAK,uBAAwB,YAAa42D,EAAiBoF,GACnFpoE,KAAK6oE,WAAW19D,EAAQiB,KAAK,gBAAiB,KAAM42D,EAAiBoF,GACrEpoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,0BAA2B,cAAe42D,EAAiBoF,GACjGpoE,KAAK4oE,iBAAiBz9D,EAAQiB,KAAK,0BAA2B,cAAe42D,EAAiBoF,GAC9FpoE,KAAK0oE,kBAAkBv9D,EAAQiB,KAAK,0BAA2B,cAAe42D,EAAiBoF,EAAWpB,GAC1GhnE,KAAK8oE,cAAc39D,EAAQiB,KAAK,8BAA+B,kBAAmB42D,EAAiBoF,IAEvGR,wBAAyB,SAAUz8D,EAAS0gC,GAAnB,GAIjB03B,GAHAuE,EAAa9nE,KAAK8nE,WAClBQ,EAAWR,EAAWQ,WAC1Bz8B,GAAMi2B,cAAgBj2B,EAAMi2B,cAAgBj2B,EAAMi2B,kBAC9CyB,EAAiB13B,EAAMi2B,cAAc,KACrC34D,YAAa,GACbE,UAAU,GAEdrJ,KAAKwoE,SAASzB,EAAOxD,EAAegC,WACpCvlE,KAAKwoE,SAASzB,EAAOxD,EAAeiC,YACpCxlE,KAAK8oE,cAAc39D,EAAQiB,KAAK,4BAA6B,iBAAkBy/B,EAAMm3B,gBAAiBsF,GACtGtoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,wBAAyB,QAASm3D,EAAgB+E,GACxFtoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,yBAA0B,SAAUm3D,EAAgB+E,GAC1FtoE,KAAK0oE,kBAAkBv9D,EAAQiB,KAAK,6BAA8B,YAAam3D,EAAgB+E,EAAUvB,GACzG/mE,KAAK0oE,kBAAkBv9D,EAAQiB,KAAK,8BAA+B,aAAcm3D,EAAgB+E,EAAUvB,GAC3G/mE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,+BAAgC,aAAcm3D,EAAgB+E,GACpGtoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,iCAAkC,cAAem3D,EAAgB+E,GACvGtoE,KAAK+oE,2BAA2B59D,EAAQiB,KAAK,4BAA6Bm3D,GAC1EvjE,KAAK4oE,iBAAiBz9D,EAAQiB,KAAK,qBAAsB,UAAWm3D,EAAgB+E,GACpFtoE,KAAK6oE,WAAW19D,EAAQiB,KAAK,4BAA6B,YAAam3D,EAAgB+E,GACvFtoE,KAAK6oE,WAAW19D,EAAQiB,KAAK,qBAAsB,KAAMm3D,EAAgB+E,GACzEtoE,KAAKyoE,oBAAoBt9D,EAAQiB,KAAK,+BAAgC,cAAem3D,EAAgB+E,GACrGtoE,KAAK4oE,iBAAiBz9D,EAAQiB,KAAK,+BAAgC,cAAem3D,EAAgB+E,GAClGtoE,KAAK0oE,kBAAkBv9D,EAAQiB,KAAK,+BAAgC,cAAem3D,EAAgB+E,EAAUtB,GAC7GhnE,KAAK8oE,cAAc39D,EAAQiB,KAAK,uBAAwB,WAAYm3D,EAAgB+E,IAExFT,iCAAkC,SAAU18D,EAAS0gC,GAAnB,GAC1Bi8B,GAAa9nE,KAAK8nE,WAClBS,EAAoBT,EAAWS,qBAC/BvF,EAAkBn3B,EAAMm3B,eAC5BhjE,MAAK6oE,WAAW19D,EAAQiB,KAAK,2BAA4B,iBAAkB42D,EAAiBuF,GAC5FvoE,KAAKgpE,oCAAoC79D,EAAQiB,KAAK,qCAAsC42D,GAC5FhjE,KAAK6oE,WAAW19D,EAAQiB,KAAK,mCAAoC,UAAW42D,EAAiBuF,GAC7FvoE,KAAK8oE,cAAc39D,EAAQiB,KAAK,2BAA4B,mBAAoB42D,EAAiBuF,IAErGE,oBAAqB,SAAUt9D,EAASwyB,EAAU/K,EAAMq2C,EAASC,GAC7D,GAAIC,GAAYF,EAAQtrC,GAAYxyB,EAAQi+D,oBAAoBF,EAAW9nE,EAAEzB,UAAWmnE,EAAwBoC,GAAYpC,GAAwBl0C,KAAK,sBACrJ+K,KAAY/K,IACZu2C,EAAU/9D,MAAM2B,SAAS6lB,EAAK+K,GAAW,MAGjD+qC,kBAAmB,SAAUv9D,EAASwyB,EAAU/K,EAAMq2C,EAAS1/B,GAC3D,GAAI4/B,GAAYF,EAAQtrC,GAAYxyB,EAAQk+D,mBAAoB9/B,WAAYA,IAAc3W,KAAK,oBAC/F5yB,MAAKspE,mBAAmBH,EAAWv2C,EAAM+K,IAE7CgrC,4BAA6B,SAAUx9D,EAASynB,GAAnB,GACrBtuB,GAAWtE,KAAKH,QAAQyE,SACxB8jE,EAAYpoE,KAAK8nE,WAAWM,UAC5B7+B,EAAa09B,EAA+B19B,UAChDA,GAAW,GAAGggB,QAAUjlD,EAASiF,UACjCggC,EAAW,GAAGggB,QAAUjlD,EAASkF,YACjC+/B,EAAW,GAAGggB,QAAUjlD,EAASmF,WACjC8/B,EAAW,GAAGggB,QAAUjlD,EAAS6F,YACjCnK,KAAKupE,uBAAuBp+D,EAAS87D,EAAgC,YAAar0C,EAAMw1C,IAE5FW,2BAA4B,SAAU59D,EAASynB,GAAnB,GACpBtuB,GAAWtE,KAAKH,QAAQyE,SACxBgkE,EAAWtoE,KAAK8nE,WAAWQ,SAC3B/+B,EAAa49B,EAA8B59B,UAC/CA,GAAW,GAAGggB,QAAUjlD,EAASoF,aACjC6/B,EAAW,GAAGggB,QAAUjlD,EAASqF,eACjC4/B,EAAW,GAAGggB,QAAUjlD,EAASsF,cACjC2/B,EAAW,GAAGggB,QAAUjlD,EAASuF,gBACjC0/B,EAAW,GAAGggB,QAAUjlD,EAASwF,kBACjCy/B,EAAW,GAAGggB,QAAUjlD,EAASyF,iBACjCw/B,EAAW,GAAGggB,QAAUjlD,EAAS0F,gBACjCu/B,EAAW,GAAGggB,QAAUjlD,EAAS2F,kBACjCs/B,EAAW,GAAGggB,QAAUjlD,EAAS4F,iBACjCq/B,EAAW,GAAGggB,QAAUjlD,EAAS6F,YACjCnK,KAAKupE,uBAAuBp+D,EAASg8D,EAA+B,YAAav0C,EAAM01C,IAE3FU,oCAAqC,SAAU79D,EAASynB,GAAnB,GAC7BtuB,GAAWtE,KAAKH,QAAQyE,SACxBikE,EAAoBvoE,KAAK8nE,WAAWS,kBACpCh/B,EAAa69B,EAAuC79B,UACxDA,GAAW,GAAGggB,QAAUjlD,EAASoF,aACjC6/B,EAAW,GAAGggB,QAAUjlD,EAASqF,eACjC4/B,EAAW,GAAGggB,QAAUjlD,EAASsF,cACjC2/B,EAAW,GAAGggB,QAAUjlD,EAAS0F,gBACjCu/B,EAAW,GAAGggB,QAAUjlD,EAAS2F,kBACjCs/B,EAAW,GAAGggB,QAAUjlD,EAAS4F,iBACjCq/B,EAAW,GAAGggB,QAAUjlD,EAAS6F,YACjCnK,KAAKupE,uBAAuBp+D,EAASi8D,EAAwC,mBAAoBx0C,EAAM21C,IAE3GgB,uBAAwB,SAAUp+D,EAAS+9D,EAAU5lE,EAAMsvB,EAAMq2C,GAC7D,GAAIE,GAAYF,EAAQ3lE,GAAQ6H,EAAQk+D,kBAAkBH,GAAUt2C,KAAK,oBACzEu2C,GAAUtyC,KAAKvqB,SAAS,WAAWsF,IAAI,QAAS,SAChD5R,KAAKspE,mBAAmBH,EAAWv2C,EAAMtvB,IAE7CgmE,mBAAoB,SAAUH,EAAWv2C,EAAM+K,GACvCA,IAAY/K,IACZu2C,EAAU/9D,MAAMwnB,EAAK+K,KAG7BirC,iBAAkB,SAAUz9D,EAASwyB,EAAU/K,EAAMq2C,GACjD,GAAIE,GAAYF,EAAQtrC,GAAYxyB,EAAQq+D,mBAAmB52C,KAAK,mBAChEA,GAAK+K,IACLwrC,EAAU/9D,MAAMwnB,EAAK+K,KAG7BkrC,WAAY,SAAU19D,EAASwyB,EAAU/K,EAAMq2C,GAC3C,GAAIE,GAAYF,EAAQtrC,GAAYxyB,EAAQ4N,IAAI,EAC5C4kB,KAAY/K,KACZu2C,EAAU/9D,MAAQwnB,EAAK+K,KAG/BmrC,cAAe,SAAU39D,EAASwyB,EAAU/K,EAAMq2C,GAC9C,GAAIE,GAAYF,EAAQtrC,GAAYxyB,EAAQ4N,IAAI,EAC5C4kB,KAAY/K,KACZu2C,EAAUd,QAAUz1C,EAAK+K,KAGjC5sB,QAAS,WACL/Q,KAAKypE,mBAAmBzpE,KAAK8nE,WAAWM,WACxCpoE,KAAKypE,mBAAmBzpE,KAAK8nE,WAAWQ,UACxCtoE,KAAKypE,mBAAmBzpE,KAAK8nE,WAAWS,mBACxCvoE,KAAKypE,mBAAmBzpE,KAAK8nE,kBACtB9nE,MAAK8nE,YAEhB2B,mBAAoB,SAAU3B,GAC1B,IAAK,GAAI/b,KAAU+b,GACXA,EAAW/b,GAAQh7C,SACnB+2D,EAAW/b,GAAQh7C,gBAEhB+2D,GAAW/b,IAG1BrM,gBAAiB,SAAUp7C,GACvB,MAAO9E,GAAMmD,SAAS0kE,IAAkB/iE,SAAUA,MAG1D9E,GAAMsC,GAAG6J,OAAOy2D,kBAAoBA,GACtCzgE,OAAOnC,MAAMihB,SACC,kBAAVlhB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBACH,iBACA,qBACA,kBACA,eACA,oBACA,qBACA,qBACA,cACA,aACA,oBACA,eACA,gBACA,sBACA,qBACA,mBACA,eACA,cACA,cACA,eACA,oBACA,gBACA,kBACA,oBACA,iBACA,gBACA,kCACA,+BACA,iCACA,sCACA,oBACA,2CACA,2CACDD,IACL,aAoCkB,kBAAVC,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var COLUMN_RESIZING_NS = '.kendoEditorColumnResizing';\n        var ROW_RESIZING_NS = '.kendoEditorRowResizing';\n        var TABLE_RESIZING_NS = '.kendoEditorTableResizing';\n        var SELECT = 'select';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a href=\"\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker #= data.cssClass #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a href=\"\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\"><span unselectable=\"on\" class=\"k-icon k-i-more\"></span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + toolName;\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            createTable: 'Create table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that._initializeColumnResizing();\n                that._initializeRowResizing();\n                that._initializeTableResizing();\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function () {\n                        that._mouseup();\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-resize-se\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor.bind(SELECT, proxy(editor._showTableResizeHandles, editor));\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                }\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                iframe.src = src;\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (browser.msie || browser.edge ? 'height:auto;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var NS = '.kendoEditor';\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        type = type.split(' ').join(NS + ' ') + NS;\n                        this._handlers.push({\n                            element: element,\n                            type: type,\n                            handler: handler\n                        });\n                        element.on(type, handler);\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                this._registerHandler(mousedownTrigger, 'mousedown ', proxy(this._mousedown, this));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'selectionchange': proxy(this._selectionChange, this),\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            editor._selectionChange();\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                        }, 10);\n                    }\n                });\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target);\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n            },\n            _mouseup: function () {\n                var that = this;\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that.textarea.val(that.value());\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(that.textarea.val());\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                var body = $(editor.body);\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyTableResizing();\n                body.off(TABLE_RESIZING_NS);\n                editor._destroyRowResizing();\n                body.off(ROW_RESIZING_NS);\n                editor._destroyColumnResizing();\n                body.off(COLUMN_RESIZING_NS);\n                kendo.destroy(this.wrapper);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                if (activeElement != body && activeElement != iframe) {\n                    var scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that.restoreSelection();\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        if (!command.managesUndoRedo) {\n                            that.undoRedoStack.push(command);\n                        }\n                        command.editor = that;\n                        command.exec();\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new kendo.ui.editor.FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie && browser.version == 10) {\n            emptyTableCellContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                FormatTool: FormatTool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (kendo.support.browser.webkit || scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node) {\n                var element = $(Dom.isDataNode(node) ? node.parentNode : node), wnd = Dom.windowFromDocument(node.ownerDocument), windowHeight = wnd.innerHeight, elementTop, elementHeight, scrollContainer = Dom.scrollContainer(node.ownerDocument);\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (!elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                node.parentNode.removeChild(node);\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                        if (Dom.isWhitespace(node)) {\n                            Dom.insertBefore(node, parent);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (!node.childNodes.length && !Dom.isEmpty(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color');\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types)) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            this.removeAttribute(name);\n                        }\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            result.push('<iframe');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            result.push('<script');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<b>');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<i>');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<strong>');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<em>');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<span style=\"text-decoration:underline;\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    attributes.sort(function (a, b) {\n                        return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                    });\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (node.nodeValue === '\\uFEFF') {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous;\n                    if ($(node).hasClass('k-table-resize-handle') || $(node).hasClass('k-column-resize-handle') || $(node).hasClass('k-row-resize-handle')) {\n                        return;\n                    }\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/serializer'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var collapsed = false;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node)) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/system', ['editor/range'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, EditorUtils = editorNS.EditorUtils, RangeUtils = editorNS.RangeUtils, registerTool = EditorUtils.registerTool, dom = editorNS.Dom, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                range.setStartAfter(caret);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                if (dom.isDataNode(node)) {\n                    this._cleanBomBefore(range);\n                }\n                if (block && block.previousSibling && editorNS.RangeUtils.isStartOf(range, block)) {\n                    var prev = block.previousSibling;\n                    var caret = this._addCaret(block);\n                    this._merge(prev, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (li && editorNS.RangeUtils.isStartOf(range, li)) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    this.editor.selectRange(range);\n                    return true;\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (/t(able|body)/i.test(dom.name(ancestor))) {\n                    range.selectNode(table);\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _root: function (node) {\n                while (node && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        dest.appendChild(src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions;\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == e.ctrlKey && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = editorNS.RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue);\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    editorNS.RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                $(fragment.childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content;\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    content = p.innerHTML;\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li = placeholder, rootMargin, listContainer, i, p, type, margin, list, listData;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || name != 'p') {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else {\n                            lastMargin = -1;\n                            li = placeholder;\n                        }\n                        continue;\n                    }\n                    margin = parseFloat(p.style.marginLeft || 0);\n                    if (rootMargin === undefined) {\n                        rootMargin = margin;\n                    }\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = dom.create(document, type, { style: { listStyleType: listType.style } });\n                        if (li == placeholder || margin <= lastMargin) {\n                            if (listContainer && rootMargin !== margin) {\n                                listContainer.appendChild(list);\n                            } else {\n                                dom.insertBefore(list, p);\n                            }\n                            levels[margin] = {};\n                        } else {\n                            listContainer = li;\n                            li.appendChild(list);\n                        }\n                        levels[margin][levelType] = list;\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    lastMargin = margin;\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = this.extractListLevels(html);\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = this.lockRange(true);\n                this.editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                });\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand,\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool,\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard,\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner,\n            PrintCommand: PrintCommand,\n            ExportPdfCommand: ExportPdfCommand\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/inlineformat', ['editor/system'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        if (dom.is(formatNode, 'font')) {\n                            if (styleAttr.color) {\n                                formatNode.removeAttribute('color');\n                            }\n                            if (styleAttr.fontName) {\n                                formatNode.removeAttribute('face');\n                            }\n                            if (styleAttr.fontSize) {\n                                formatNode.removeAttribute('size');\n                            }\n                        }\n                        dom.attr(formatNode, attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                ui.data(this.type).value('inherit');\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-' + options.name,\n                    palette: palette,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        editor.focus();\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatblock', ['editor/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            FormatCommand: FormatCommand,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/linebreak', ['editor/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        range.setStartBefore(focusNode.firstChild || focusNode);\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = dom.create(doc, 'p');\n                    dom.insertAfter(paragraph, heading);\n                    paragraph.innerHTML = emptyParagraphContent;\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous);\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next);\n                RangeUtils.selectRange(range);\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                range.deleteContents();\n                range.insertNode(br);\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/lists', ['editor/linebreak'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/link', ['editor/lists'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var traverser = new LeftDomTextTraverser({\n                    node: range.startContainer,\n                    offset: range.startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/file', [\n        'kendo.filebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(dialog.element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            dialog.element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/image', [\n        'kendo.imagebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(dialog.element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            dialog.element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/image'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/indent', ['editor/components'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/viewhtml', ['editor/indent'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content;\n                options.serialization.immutables = editor.immutables;\n                content = ViewHtmlCommand.indent(editor.value());\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog\\'>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatting', ['editor/viewhtml'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                that.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/formatting'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = kendo.ui.editor.EditorUtils;\n        var ToolTemplate = kendo.ui.editor.ToolTemplate;\n        var Tool = kendo.ui.editor.Tool;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-button-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-move\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide;\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'more' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(editorElement.outerWidth() - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - wrapper.outerHeight() - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        window.open();\n                    }\n                }\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-custom',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled';\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, buttons, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).hasClass('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 : -1, that.element, true);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement) {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    var button = $(this);\n                    e.preventDefault();\n                    e.stopPropagation();\n                    button.removeClass('k-state-hover');\n                    if (!button.is('[data-popup]')) {\n                        that._editor.exec(that._toolName(this));\n                    }\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editorNS = kendo.ui.editor, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    var editorNS = kendo.ui.editor;\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', group.outerWidth(true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/tables', ['editor/toolbar'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.buttonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', function () {\n                    that._setTableSize();\n                }).on('down', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.dialogCancel);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.dialogCancel).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyTableCellContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var row = rows[0];\n                if (this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : column.outerWidth());\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : column.outerWidth();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: tableBody.position().top + scrollTopOffset,\n                    left: column.position().left + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = column.outerWidth();\n                var columnLeftOffset = column.position().left;\n                var adjacentColumnWidth = column.next().outerWidth() || 0;\n                var resizeHandle = $(that.resizeHandle);\n                var rootElement = $(options.rootElement);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var handleOffset = constrain({\n                    value: resizeHandle.position().left + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = column.outerWidth();\n                initialAdjacentColumnWidth = column.next().outerWidth() || 0;\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(column.index(), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels($(element).outerWidth());\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = tableBody.outerWidth();\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return $(this).outerWidth();\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).index();\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).index() === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, $(this.element).children(TBODY).outerWidth()));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return $(this).index() === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + tableElement.outerHeight();\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rowPosition = row.position();\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: rowPosition.top + row.outerHeight() + scrollTopOffset - handleHeight / 2,\n                    left: rowPosition.left + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyTopOffset = tableBody.position().top;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var handleOffset = constrain({\n                    value: resizeHandle.position().top + scrollTopOffset + e.y.delta,\n                    min: $(row).position().top + scrollTopOffset + min,\n                    max: tableBodyTopOffset + tableBody.outerHeight() + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = $(row).outerHeight();\n                var element = $(that.element);\n                var initialTableHeight = element.outerHeight();\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return $(this).outerHeight();\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return $(this).outerHeight();\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - handle.outerHeight() / 2,\n                        left: position.left - handle.outerWidth() / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + resizableElement.outerHeight() / 2,\n                    left: offset.left + resizableElement.outerWidth()\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + resizableElement.outerWidth() / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + resizableElement.outerWidth()\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + resizableElement.outerHeight(),\n                    left: offset.left + resizableElement.outerWidth() / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + resizableElement.outerHeight(),\n                    left: offset.left + resizableElement.outerWidth()\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + resizableElement.outerHeight(),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + resizableElement.outerHeight() / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = element.outerWidth();\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = element.outerHeight();\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return $(this).outerHeight();\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return $(this).outerHeight();\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = element.outerHeight();\n                that._initialElementWidth = element.outerWidth();\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || null,\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor,\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', ['editor/table-wizard/table-wizard-command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-font-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-font-icon k-i-justify-clear',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-font-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-justify-clear',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-font-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-font-icon k-i-justify-clear',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-edit-form-container k-popup-edit-form\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-input k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker().data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/system',\n        'editor/inlineformat',\n        'editor/formatblock',\n        'editor/linebreak',\n        'editor/lists',\n        'editor/link',\n        'editor/file',\n        'editor/image',\n        'editor/components',\n        'editor/indent',\n        'editor/viewhtml',\n        'editor/formatting',\n        'editor/toolbar',\n        'editor/tables',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/immutables',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}